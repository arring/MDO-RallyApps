<!DOCTYPE html>
<html>
<head>
    <title>Train CFD Charts</title>

    <script type="text/javascript" src="https://rally1.rallydev.com/apps/2.0rc3/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function () {
                function Vector(){}function Matrix(){}function Line(){}function Plane(){}var Sylvester={version:"0.1.3",precision:1e-6};Vector.prototype={e:function(i){return 1>i||i>this.elements.length?null:this.elements[i-1]},dimensions:function(){return this.elements.length},modulus:function(){return Math.sqrt(this.dot(this))},eql:function(vector){var n=this.elements.length,V=vector.elements||vector;if(n!=V.length)return!1;do if(Math.abs(this.elements[n-1]-V[n-1])>Sylvester.precision)return!1;while(--n);return!0},dup:function(){return Vector.create(this.elements)},map:function(fn){var elements=[];return this.each(function(x,i){elements.push(fn(x,i))}),Vector.create(elements)},each:function(fn){var n=this.elements.length,k=n,i;do i=k-n,fn(this.elements[i],i+1);while(--n)},toUnitVector:function(){var r=this.modulus();return 0===r?this.dup():this.map(function(x){return x/r})},angleFrom:function(vector){var V=vector.elements||vector,n=this.elements.length,k=n,i;if(n!=V.length)return null;var dot=0,mod1=0,mod2=0;if(this.each(function(x,i){dot+=x*V[i-1],mod1+=x*x,mod2+=V[i-1]*V[i-1]}),mod1=Math.sqrt(mod1),mod2=Math.sqrt(mod2),0===mod1*mod2)return null;var theta=dot/(mod1*mod2);return-1>theta&&(theta=-1),theta>1&&(theta=1),Math.acos(theta)},isParallelTo:function(vector){var angle=this.angleFrom(vector);return null===angle?null:Sylvester.precision>=angle},isAntiparallelTo:function(vector){var angle=this.angleFrom(vector);return null===angle?null:Math.abs(angle-Math.PI)<=Sylvester.precision},isPerpendicularTo:function(vector){var dot=this.dot(vector);return null===dot?null:Math.abs(dot)<=Sylvester.precision},add:function(vector){var V=vector.elements||vector;return this.elements.length!=V.length?null:this.map(function(x,i){return x+V[i-1]})},subtract:function(vector){var V=vector.elements||vector;return this.elements.length!=V.length?null:this.map(function(x,i){return x-V[i-1]})},multiply:function(k){return this.map(function(x){return x*k})},x:function(k){return this.multiply(k)},dot:function(vector){var V=vector.elements||vector,i,product=0,n=this.elements.length;if(n!=V.length)return null;do product+=this.elements[n-1]*V[n-1];while(--n);return product},cross:function(vector){var B=vector.elements||vector;if(3!=this.elements.length||3!=B.length)return null;var A=this.elements;return Vector.create([A[1]*B[2]-A[2]*B[1],A[2]*B[0]-A[0]*B[2],A[0]*B[1]-A[1]*B[0]])},max:function(){var m=0,n=this.elements.length,k=n,i;do i=k-n,Math.abs(this.elements[i])>Math.abs(m)&&(m=this.elements[i]);while(--n);return m},indexOf:function(x){var index=null,n=this.elements.length,k=n,i;do i=k-n,null===index&&this.elements[i]==x&&(index=i+1);while(--n);return index},toDiagonalMatrix:function(){return Matrix.Diagonal(this.elements)},round:function(){return this.map(function(x){return Math.round(x)})},snapTo:function(x){return this.map(function(y){return Math.abs(y-x)<=Sylvester.precision?x:y})},distanceFrom:function(obj){if(obj.anchor)return obj.distanceFrom(this);var V=obj.elements||obj;if(V.length!=this.elements.length)return null;var sum=0,part;return this.each(function(x,i){part=x-V[i-1],sum+=part*part}),Math.sqrt(sum)},liesOn:function(line){return line.contains(this)},liesIn:function(plane){return plane.contains(this)},rotate:function(t,obj){var V,R,x,y,z;switch(this.elements.length){case 2:return V=obj.elements||obj,2!=V.length?null:(R=Matrix.Rotation(t).elements,x=this.elements[0]-V[0],y=this.elements[1]-V[1],Vector.create([V[0]+R[0][0]*x+R[0][1]*y,V[1]+R[1][0]*x+R[1][1]*y]));case 3:if(!obj.direction)return null;var C=obj.pointClosestTo(this).elements;return R=Matrix.Rotation(t,obj.direction).elements,x=this.elements[0]-C[0],y=this.elements[1]-C[1],z=this.elements[2]-C[2],Vector.create([C[0]+R[0][0]*x+R[0][1]*y+R[0][2]*z,C[1]+R[1][0]*x+R[1][1]*y+R[1][2]*z,C[2]+R[2][0]*x+R[2][1]*y+R[2][2]*z]);default:return null}},reflectionIn:function(obj){if(obj.anchor){var P=this.elements.slice(),C=obj.pointClosestTo(P).elements;return Vector.create([C[0]+(C[0]-P[0]),C[1]+(C[1]-P[1]),C[2]+(C[2]-(P[2]||0))])}var Q=obj.elements||obj;return this.elements.length!=Q.length?null:this.map(function(x,i){return Q[i-1]+(Q[i-1]-x)})},to3D:function(){var V=this.dup();switch(V.elements.length){case 3:break;case 2:V.elements.push(0);break;default:return null}return V},inspect:function(){return"["+this.elements.join(", ")+"]"},setElements:function(els){return this.elements=(els.elements||els).slice(),this}},Vector.create=function(elements){var V=new Vector;return V.setElements(elements)},Vector.i=Vector.create([1,0,0]),Vector.j=Vector.create([0,1,0]),Vector.k=Vector.create([0,0,1]),Vector.Random=function(n){var elements=[];do elements.push(Math.random());while(--n);return Vector.create(elements)},Vector.Zero=function(n){var elements=[];do elements.push(0);while(--n);return Vector.create(elements)},Matrix.prototype={e:function(i,j){return 1>i||i>this.elements.length||1>j||j>this.elements[0].length?null:this.elements[i-1][j-1]},row:function(i){return i>this.elements.length?null:Vector.create(this.elements[i-1])},col:function(j){if(j>this.elements[0].length)return null;var col=[],n=this.elements.length,k=n,i;do i=k-n,col.push(this.elements[i][j-1]);while(--n);return Vector.create(col)},dimensions:function(){return{rows:this.elements.length,cols:this.elements[0].length}},rows:function(){return this.elements.length},cols:function(){return this.elements[0].length},eql:function(matrix){var M=matrix.elements||matrix;if(M[0][0]===void 0&&(M=Matrix.create(M).elements),this.elements.length!=M.length||this.elements[0].length!=M[0].length)return!1;var ni=this.elements.length,ki=ni,i,nj,kj=this.elements[0].length,j;do{i=ki-ni,nj=kj;do if(j=kj-nj,Math.abs(this.elements[i][j]-M[i][j])>Sylvester.precision)return!1;while(--nj)}while(--ni);return!0},dup:function(){return Matrix.create(this.elements)},map:function(fn){var els=[],ni=this.elements.length,ki=ni,i,nj,kj=this.elements[0].length,j;do{i=ki-ni,nj=kj,els[i]=[];do j=kj-nj,els[i][j]=fn(this.elements[i][j],i+1,j+1);while(--nj)}while(--ni);return Matrix.create(els)},isSameSizeAs:function(matrix){var M=matrix.elements||matrix;return M[0][0]===void 0&&(M=Matrix.create(M).elements),this.elements.length==M.length&&this.elements[0].length==M[0].length},add:function(matrix){var M=matrix.elements||matrix;return M[0][0]===void 0&&(M=Matrix.create(M).elements),this.isSameSizeAs(M)?this.map(function(x,i,j){return x+M[i-1][j-1]}):null},subtract:function(matrix){var M=matrix.elements||matrix;return M[0][0]===void 0&&(M=Matrix.create(M).elements),this.isSameSizeAs(M)?this.map(function(x,i,j){return x-M[i-1][j-1]}):null},canMultiplyFromLeft:function(matrix){var M=matrix.elements||matrix;return M[0][0]===void 0&&(M=Matrix.create(M).elements),this.elements[0].length==M.length},multiply:function(matrix){if(!matrix.elements)return this.map(function(x){return x*matrix});var returnVector=matrix.modulus?!0:!1,M=matrix.elements||matrix;if(M[0][0]===void 0&&(M=Matrix.create(M).elements),!this.canMultiplyFromLeft(M))return null;var ni=this.elements.length,ki=ni,i,nj,kj=M[0].length,j,cols=this.elements[0].length,elements=[],sum,nc,c;do{i=ki-ni,elements[i]=[],nj=kj;do{j=kj-nj,sum=0,nc=cols;do c=cols-nc,sum+=this.elements[i][c]*M[c][j];while(--nc);elements[i][j]=sum}while(--nj)}while(--ni);var M=Matrix.create(elements);return returnVector?M.col(1):M},x:function(matrix){return this.multiply(matrix)},minor:function(a,b,c,d){var elements=[],ni=c,i,nj,j,rows=this.elements.length,cols=this.elements[0].length;do{i=c-ni,elements[i]=[],nj=d;do j=d-nj,elements[i][j]=this.elements[(a+i-1)%rows][(b+j-1)%cols];while(--nj)}while(--ni);return Matrix.create(elements)},transpose:function(){var rows=this.elements.length,cols=this.elements[0].length,elements=[],ni=cols,i,nj,j;do{i=cols-ni,elements[i]=[],nj=rows;do j=rows-nj,elements[i][j]=this.elements[j][i];while(--nj)}while(--ni);return Matrix.create(elements)},isSquare:function(){return this.elements.length==this.elements[0].length},max:function(){var m=0,ni=this.elements.length,ki=ni,i,nj,kj=this.elements[0].length,j;do{i=ki-ni,nj=kj;do j=kj-nj,Math.abs(this.elements[i][j])>Math.abs(m)&&(m=this.elements[i][j]);while(--nj)}while(--ni);return m},indexOf:function(x){var index=null,ni=this.elements.length,ki=ni,i,nj,kj=this.elements[0].length,j;do{i=ki-ni,nj=kj;do if(j=kj-nj,this.elements[i][j]==x)return{i:i+1,j:j+1};while(--nj)}while(--ni);return null},diagonal:function(){if(!this.isSquare)return null;var els=[],n=this.elements.length,k=n,i;do i=k-n,els.push(this.elements[i][i]);while(--n);return Vector.create(els)},toRightTriangular:function(){var M=this.dup(),els,n=this.elements.length,k=n,i,np,kp=this.elements[0].length,p;do{if(i=k-n,0==M.elements[i][i])for(j=i+1;k>j;j++)if(0!=M.elements[j][i]){els=[],np=kp;do p=kp-np,els.push(M.elements[i][p]+M.elements[j][p]);while(--np);M.elements[i]=els;break}if(0!=M.elements[i][i])for(j=i+1;k>j;j++){var multiplier=M.elements[j][i]/M.elements[i][i];els=[],np=kp;do p=kp-np,els.push(i>=p?0:M.elements[j][p]-M.elements[i][p]*multiplier);while(--np);M.elements[j]=els}}while(--n);return M},toUpperTriangular:function(){return this.toRightTriangular()},determinant:function(){if(!this.isSquare())return null;var M=this.toRightTriangular(),det=M.elements[0][0],n=M.elements.length-1,k=n,i;do i=k-n+1,det*=M.elements[i][i];while(--n);return det},det:function(){return this.determinant()},isSingular:function(){return this.isSquare()&&0===this.determinant()},trace:function(){if(!this.isSquare())return null;var tr=this.elements[0][0],n=this.elements.length-1,k=n,i;do i=k-n+1,tr+=this.elements[i][i];while(--n);return tr},tr:function(){return this.trace()},rank:function(){var M=this.toRightTriangular(),rank=0,ni=this.elements.length,ki=ni,i,nj,kj=this.elements[0].length,j;do{i=ki-ni,nj=kj;do if(j=kj-nj,Math.abs(M.elements[i][j])>Sylvester.precision){rank++;break}while(--nj)}while(--ni);return rank},rk:function(){return this.rank()},augment:function(matrix){var M=matrix.elements||matrix;M[0][0]===void 0&&(M=Matrix.create(M).elements);var T=this.dup(),cols=T.elements[0].length,ni=T.elements.length,ki=ni,i,nj,kj=M[0].length,j;if(ni!=M.length)return null;do{i=ki-ni,nj=kj;do j=kj-nj,T.elements[i][cols+j]=M[i][j];while(--nj)}while(--ni);return T},inverse:function(){if(!this.isSquare()||this.isSingular())return null;var ni=this.elements.length,ki=ni,i,j,M=this.augment(Matrix.I(ni)).toRightTriangular(),np,kp=M.elements[0].length,p,els,divisor,inverse_elements=[],new_element;do{i=ni-1,els=[],np=kp,inverse_elements[i]=[],divisor=M.elements[i][i];do p=kp-np,new_element=M.elements[i][p]/divisor,els.push(new_element),p>=ki&&inverse_elements[i].push(new_element);while(--np);for(M.elements[i]=els,j=0;i>j;j++){els=[],np=kp;do p=kp-np,els.push(M.elements[j][p]-M.elements[i][p]*M.elements[j][i]);while(--np);M.elements[j]=els}}while(--ni);return Matrix.create(inverse_elements)},inv:function(){return this.inverse()},round:function(){return this.map(function(x){return Math.round(x)})},snapTo:function(x){return this.map(function(p){return Math.abs(p-x)<=Sylvester.precision?x:p})},inspect:function(){var matrix_rows=[],n=this.elements.length,k=n,i;do i=k-n,matrix_rows.push(Vector.create(this.elements[i]).inspect());while(--n);return matrix_rows.join("\n")},setElements:function(els){var i,elements=els.elements||els;if(elements[0][0]!==void 0){var ni=elements.length,ki=ni,nj,kj,j;this.elements=[];do{i=ki-ni,nj=elements[i].length,kj=nj,this.elements[i]=[];do j=kj-nj,this.elements[i][j]=elements[i][j];while(--nj)}while(--ni);return this}var n=elements.length,k=n;this.elements=[];do i=k-n,this.elements.push([elements[i]]);while(--n);return this}},Matrix.create=function(elements){var M=new Matrix;return M.setElements(elements)},Matrix.I=function(n){var els=[],k=n,i,nj,j;do{i=k-n,els[i]=[],nj=k;do j=k-nj,els[i][j]=i==j?1:0;while(--nj)}while(--n);return Matrix.create(els)},Matrix.Diagonal=function(elements){var n=elements.length,k=n,i,M=Matrix.I(n);do i=k-n,M.elements[i][i]=elements[i];while(--n);return M},Matrix.Rotation=function(theta,a){if(!a)return Matrix.create([[Math.cos(theta),-Math.sin(theta)],[Math.sin(theta),Math.cos(theta)]]);var axis=a.dup();if(3!=axis.elements.length)return null;var mod=axis.modulus(),x=axis.elements[0]/mod,y=axis.elements[1]/mod,z=axis.elements[2]/mod,s=Math.sin(theta),c=Math.cos(theta),t=1-c;return Matrix.create([[t*x*x+c,t*x*y-s*z,t*x*z+s*y],[t*x*y+s*z,t*y*y+c,t*y*z-s*x],[t*x*z-s*y,t*y*z+s*x,t*z*z+c]])},Matrix.RotationX=function(t){var c=Math.cos(t),s=Math.sin(t);return Matrix.create([[1,0,0],[0,c,-s],[0,s,c]])},Matrix.RotationY=function(t){var c=Math.cos(t),s=Math.sin(t);return Matrix.create([[c,0,s],[0,1,0],[-s,0,c]])},Matrix.RotationZ=function(t){var c=Math.cos(t),s=Math.sin(t);return Matrix.create([[c,-s,0],[s,c,0],[0,0,1]])},Matrix.Random=function(n,m){return Matrix.Zero(n,m).map(function(){return Math.random()})},Matrix.Zero=function(n,m){var els=[],ni=n,i,nj,j;do{i=n-ni,els[i]=[],nj=m;do j=m-nj,els[i][j]=0;while(--nj)}while(--ni);return Matrix.create(els)},Line.prototype={eql:function(line){return this.isParallelTo(line)&&this.contains(line.anchor)},dup:function(){return Line.create(this.anchor,this.direction)},translate:function(vector){var V=vector.elements||vector;return Line.create([this.anchor.elements[0]+V[0],this.anchor.elements[1]+V[1],this.anchor.elements[2]+(V[2]||0)],this.direction)},isParallelTo:function(obj){if(obj.normal)return obj.isParallelTo(this);var theta=this.direction.angleFrom(obj.direction);return Math.abs(theta)<=Sylvester.precision||Math.abs(theta-Math.PI)<=Sylvester.precision},distanceFrom:function(obj){if(obj.normal)return obj.distanceFrom(this);if(obj.direction){if(this.isParallelTo(obj))return this.distanceFrom(obj.anchor);var N=this.direction.cross(obj.direction).toUnitVector().elements,A=this.anchor.elements,B=obj.anchor.elements;return Math.abs((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}var P=obj.elements||obj,A=this.anchor.elements,D=this.direction.elements,PA1=P[0]-A[0],PA2=P[1]-A[1],PA3=(P[2]||0)-A[2],modPA=Math.sqrt(PA1*PA1+PA2*PA2+PA3*PA3);if(0===modPA)return 0;var cosTheta=(PA1*D[0]+PA2*D[1]+PA3*D[2])/modPA,sin2=1-cosTheta*cosTheta;return Math.abs(modPA*Math.sqrt(0>sin2?0:sin2))},contains:function(point){var dist=this.distanceFrom(point);return null!==dist&&Sylvester.precision>=dist},liesIn:function(plane){return plane.contains(this)},intersects:function(obj){return obj.normal?obj.intersects(this):!this.isParallelTo(obj)&&this.distanceFrom(obj)<=Sylvester.precision},intersectionWith:function(obj){if(obj.normal)return obj.intersectionWith(this);if(!this.intersects(obj))return null;var P=this.anchor.elements,X=this.direction.elements,Q=obj.anchor.elements,Y=obj.direction.elements,X1=X[0],X2=X[1],X3=X[2],Y1=Y[0],Y2=Y[1],Y3=Y[2],PsubQ1=P[0]-Q[0],PsubQ2=P[1]-Q[1],PsubQ3=P[2]-Q[2],XdotQsubP=-X1*PsubQ1-X2*PsubQ2-X3*PsubQ3,YdotPsubQ=Y1*PsubQ1+Y2*PsubQ2+Y3*PsubQ3,XdotX=X1*X1+X2*X2+X3*X3,YdotY=Y1*Y1+Y2*Y2+Y3*Y3,XdotY=X1*Y1+X2*Y2+X3*Y3,k=(XdotQsubP*YdotY/XdotX+XdotY*YdotPsubQ)/(YdotY-XdotY*XdotY);return Vector.create([P[0]+k*X1,P[1]+k*X2,P[2]+k*X3])},pointClosestTo:function(obj){if(obj.direction){if(this.intersects(obj))return this.intersectionWith(obj);if(this.isParallelTo(obj))return null;var D=this.direction.elements,E=obj.direction.elements,D1=D[0],D2=D[1],D3=D[2],E1=E[0],E2=E[1],E3=E[2],x=D3*E1-D1*E3,y=D1*E2-D2*E1,z=D2*E3-D3*E2,N=Vector.create([x*E3-y*E2,y*E1-z*E3,z*E2-x*E1]),P=Plane.create(obj.anchor,N);return P.intersectionWith(this)}var P=obj.elements||obj;if(this.contains(P))return Vector.create(P);var A=this.anchor.elements,D=this.direction.elements,D1=D[0],D2=D[1],D3=D[2],A1=A[0],A2=A[1],A3=A[2],x=D1*(P[1]-A2)-D2*(P[0]-A1),y=D2*((P[2]||0)-A3)-D3*(P[1]-A2),z=D3*(P[0]-A1)-D1*((P[2]||0)-A3),V=Vector.create([D2*x-D3*z,D3*y-D1*x,D1*z-D2*y]),k=this.distanceFrom(P)/V.modulus();return Vector.create([P[0]+V.elements[0]*k,P[1]+V.elements[1]*k,(P[2]||0)+V.elements[2]*k])},rotate:function(t,line){line.direction===void 0&&(line=Line.create(line.to3D(),Vector.k));var R=Matrix.Rotation(t,line.direction).elements,C=line.pointClosestTo(this.anchor).elements,A=this.anchor.elements,D=this.direction.elements,C1=C[0],C2=C[1],C3=C[2],A1=A[0],A2=A[1],A3=A[2],x=A1-C1,y=A2-C2,z=A3-C3;return Line.create([C1+R[0][0]*x+R[0][1]*y+R[0][2]*z,C2+R[1][0]*x+R[1][1]*y+R[1][2]*z,C3+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*D[0]+R[0][1]*D[1]+R[0][2]*D[2],R[1][0]*D[0]+R[1][1]*D[1]+R[1][2]*D[2],R[2][0]*D[0]+R[2][1]*D[1]+R[2][2]*D[2]])},reflectionIn:function(obj){if(obj.normal){var A=this.anchor.elements,D=this.direction.elements,A1=A[0],A2=A[1],A3=A[2],D1=D[0],D2=D[1],D3=D[2],newA=this.anchor.reflectionIn(obj).elements,AD1=A1+D1,AD2=A2+D2,AD3=A3+D3,Q=obj.pointClosestTo([AD1,AD2,AD3]).elements,newD=[Q[0]+(Q[0]-AD1)-newA[0],Q[1]+(Q[1]-AD2)-newA[1],Q[2]+(Q[2]-AD3)-newA[2]];return Line.create(newA,newD)}if(obj.direction)return this.rotate(Math.PI,obj);var P=obj.elements||obj;return Line.create(this.anchor.reflectionIn([P[0],P[1],P[2]||0]),this.direction)},setVectors:function(anchor,direction){if(anchor=Vector.create(anchor),direction=Vector.create(direction),2==anchor.elements.length&&anchor.elements.push(0),2==direction.elements.length&&direction.elements.push(0),anchor.elements.length>3||direction.elements.length>3)return null;var mod=direction.modulus();return 0===mod?null:(this.anchor=anchor,this.direction=Vector.create([direction.elements[0]/mod,direction.elements[1]/mod,direction.elements[2]/mod]),this)}},Line.create=function(anchor,direction){var L=new Line;return L.setVectors(anchor,direction)},Line.X=Line.create(Vector.Zero(3),Vector.i),Line.Y=Line.create(Vector.Zero(3),Vector.j),Line.Z=Line.create(Vector.Zero(3),Vector.k),Plane.prototype={eql:function(plane){return this.contains(plane.anchor)&&this.isParallelTo(plane)},dup:function(){return Plane.create(this.anchor,this.normal)},translate:function(vector){var V=vector.elements||vector;return Plane.create([this.anchor.elements[0]+V[0],this.anchor.elements[1]+V[1],this.anchor.elements[2]+(V[2]||0)],this.normal)},isParallelTo:function(obj){var theta;return obj.normal?(theta=this.normal.angleFrom(obj.normal),Math.abs(theta)<=Sylvester.precision||Math.abs(Math.PI-theta)<=Sylvester.precision):obj.direction?this.normal.isPerpendicularTo(obj.direction):null},isPerpendicularTo:function(plane){var theta=this.normal.angleFrom(plane.normal);return Math.abs(Math.PI/2-theta)<=Sylvester.precision},distanceFrom:function(obj){if(this.intersects(obj)||this.contains(obj))return 0;if(obj.anchor){var A=this.anchor.elements,B=obj.anchor.elements,N=this.normal.elements;return Math.abs((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}var P=obj.elements||obj,A=this.anchor.elements,N=this.normal.elements;return Math.abs((A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2])},contains:function(obj){if(obj.normal)return null;if(obj.direction)return this.contains(obj.anchor)&&this.contains(obj.anchor.add(obj.direction));var P=obj.elements||obj,A=this.anchor.elements,N=this.normal.elements,diff=Math.abs(N[0]*(A[0]-P[0])+N[1]*(A[1]-P[1])+N[2]*(A[2]-(P[2]||0)));return Sylvester.precision>=diff},intersects:function(obj){return obj.direction===void 0&&obj.normal===void 0?null:!this.isParallelTo(obj)},intersectionWith:function(obj){if(!this.intersects(obj))return null;if(obj.direction){var A=obj.anchor.elements,D=obj.direction.elements,P=this.anchor.elements,N=this.normal.elements,multiplier=(N[0]*(P[0]-A[0])+N[1]*(P[1]-A[1])+N[2]*(P[2]-A[2]))/(N[0]*D[0]+N[1]*D[1]+N[2]*D[2]);return Vector.create([A[0]+D[0]*multiplier,A[1]+D[1]*multiplier,A[2]+D[2]*multiplier])}if(obj.normal){for(var direction=this.normal.cross(obj.normal).toUnitVector(),N=this.normal.elements,A=this.anchor.elements,O=obj.normal.elements,B=obj.anchor.elements,solver=Matrix.Zero(2,2),i=0;solver.isSingular();)i++,solver=Matrix.create([[N[i%3],N[(i+1)%3]],[O[i%3],O[(i+1)%3]]]);for(var inverse=solver.inverse().elements,x=N[0]*A[0]+N[1]*A[1]+N[2]*A[2],y=O[0]*B[0]+O[1]*B[1]+O[2]*B[2],intersection=[inverse[0][0]*x+inverse[0][1]*y,inverse[1][0]*x+inverse[1][1]*y],anchor=[],j=1;3>=j;j++)anchor.push(i==j?0:intersection[(j+(5-i)%3)%3]);return Line.create(anchor,direction)}},pointClosestTo:function(point){var P=point.elements||point,A=this.anchor.elements,N=this.normal.elements,dot=(A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2];return Vector.create([P[0]+N[0]*dot,P[1]+N[1]*dot,(P[2]||0)+N[2]*dot])},rotate:function(t,line){var R=Matrix.Rotation(t,line.direction).elements,C=line.pointClosestTo(this.anchor).elements,A=this.anchor.elements,N=this.normal.elements,C1=C[0],C2=C[1],C3=C[2],A1=A[0],A2=A[1],A3=A[2],x=A1-C1,y=A2-C2,z=A3-C3;return Plane.create([C1+R[0][0]*x+R[0][1]*y+R[0][2]*z,C2+R[1][0]*x+R[1][1]*y+R[1][2]*z,C3+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*N[0]+R[0][1]*N[1]+R[0][2]*N[2],R[1][0]*N[0]+R[1][1]*N[1]+R[1][2]*N[2],R[2][0]*N[0]+R[2][1]*N[1]+R[2][2]*N[2]])},reflectionIn:function(obj){if(obj.normal){var A=this.anchor.elements,N=this.normal.elements,A1=A[0],A2=A[1],A3=A[2],N1=N[0],N2=N[1],N3=N[2],newA=this.anchor.reflectionIn(obj).elements,AN1=A1+N1,AN2=A2+N2,AN3=A3+N3,Q=obj.pointClosestTo([AN1,AN2,AN3]).elements,newN=[Q[0]+(Q[0]-AN1)-newA[0],Q[1]+(Q[1]-AN2)-newA[1],Q[2]+(Q[2]-AN3)-newA[2]];return Plane.create(newA,newN)}if(obj.direction)return this.rotate(Math.PI,obj);var P=obj.elements||obj;return Plane.create(this.anchor.reflectionIn([P[0],P[1],P[2]||0]),this.normal)},setVectors:function(anchor,v1,v2){if(anchor=Vector.create(anchor),anchor=anchor.to3D(),null===anchor)return null;if(v1=Vector.create(v1),v1=v1.to3D(),null===v1)return null;if(v2===void 0)v2=null;else if(v2=Vector.create(v2),v2=v2.to3D(),null===v2)return null;var A1=anchor.elements[0],A2=anchor.elements[1],A3=anchor.elements[2],v11=v1.elements[0],v12=v1.elements[1],v13=v1.elements[2],normal,mod;if(null!==v2){var v21=v2.elements[0],v22=v2.elements[1],v23=v2.elements[2];if(normal=Vector.create([(v12-A2)*(v23-A3)-(v13-A3)*(v22-A2),(v13-A3)*(v21-A1)-(v11-A1)*(v23-A3),(v11-A1)*(v22-A2)-(v12-A2)*(v21-A1)]),mod=normal.modulus(),0===mod)return null;normal=Vector.create([normal.elements[0]/mod,normal.elements[1]/mod,normal.elements[2]/mod])}else{if(mod=Math.sqrt(v11*v11+v12*v12+v13*v13),0===mod)return null;normal=Vector.create([v1.elements[0]/mod,v1.elements[1]/mod,v1.elements[2]/mod])}return this.anchor=anchor,this.normal=normal,this}},Plane.create=function(anchor,v1,v2){var P=new Plane;return P.setVectors(anchor,v1,v2)},Plane.XY=Plane.create(Vector.Zero(3),Vector.k),Plane.YZ=Plane.create(Vector.Zero(3),Vector.i),Plane.ZX=Plane.create(Vector.Zero(3),Vector.j),Plane.YX=Plane.XY,Plane.ZY=Plane.YZ,Plane.XZ=Plane.ZX;var $V=Vector.create,$M=Matrix.create,$L=Line.create,$P=Plane.create;
                (function(global,factory){"object"==typeof module&&"object"==typeof module.exports?module.exports=global.document?factory(global,!0):function(w){if(!w.document)throw Error("jQuery requires a window with a document");return factory(w)}:factory(global)})("undefined"!=typeof window?window:this,function(window,noGlobal){function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);return"function"===type||jQuery.isWindow(obj)?!1:1===obj.nodeType&&length?!0:"array"===type||0===length||"number"==typeof length&&length>0&&length-1 in obj}function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier!==not});if("string"==typeof qualifier){if(risSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>=0!==not})}function sibling(cur,dir){for(;(cur=cur[dir])&&1!==cur.nodeType;);return cur}function createOptions(options){var object=optionsCache[options]={};return jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=!0}),object}function completed(){document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1),jQuery.ready()}function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=jQuery.expando+Data.uid++}function dataAttr(elem,key,data){var name;if(void 0===data&&1===elem.nodeType)if(name="data-"+key.replace(rmultiDash,"-$1").toLowerCase(),data=elem.getAttribute(name),"string"==typeof data){try{data="true"===data?!0:"false"===data?!1:"null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}data_user.set(elem,key,data)}else data=void 0;return data}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(11!==content.nodeType?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){return elem.type=(null!==elem.getAttribute("type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function setGlobalEval(elems,refElements){for(var i=0,l=elems.length;l>i;i++)data_priv.set(elems[i],"globalEval",!refElements||data_priv.get(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(1===dest.nodeType){if(data_priv.hasData(src)&&(pdataOld=data_priv.access(src),pdataCur=data_priv.set(dest,pdataOld),events=pdataOld.events)){delete pdataCur.handle,pdataCur.events={};for(type in events)for(i=0,l=events[type].length;l>i;i++)jQuery.event.add(dest,type,events[type][i])}data_user.hasData(src)&&(udataOld=data_user.access(src),udataCur=jQuery.extend({},udataOld),data_user.set(dest,udataCur))}}function getAll(context,tag){var ret=context.getElementsByTagName?context.getElementsByTagName(tag||"*"):context.querySelectorAll?context.querySelectorAll(tag||"*"):[];return void 0===tag||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();"input"===nodeName&&rcheckableType.test(src.type)?dest.checked=src.checked:("input"===nodeName||"textarea"===nodeName)&&(dest.defaultValue=src.defaultValue)}function actualDisplay(name,doc){var style,elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle&&(style=window.getDefaultComputedStyle(elem[0]))?style.display:jQuery.css(elem[0],"display");return elem.detach(),display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];return display||(display=actualDisplay(nodeName,doc),"none"!==display&&display||(iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement),doc=iframe[0].contentDocument,doc.write(),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach()),elemdisplay[nodeName]=display),display}function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;return computed=computed||getStyles(elem),computed&&(ret=computed.getPropertyValue(name)||computed[name]),computed&&(""!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),void 0!==ret?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function(){return conditionFn()?(delete this.get,void 0):(this.get=hookFn).apply(this,arguments)}}}function vendorPropName(style,name){if(name in style)return name;for(var capName=name[0].toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;i--;)if(name=cssPrefixes[i]+capName,name in style)return name;return origName}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;4>i;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox="border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(0>=val||null==val){if(val=curCSS(elem,name,styles),(0>val||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function showHide(elements,show){for(var display,elem,hidden,values=[],index=0,length=elements.length;length>index;index++)elem=elements[index],elem.style&&(values[index]=data_priv.get(elem,"olddisplay"),display=elem.style.display,show?(values[index]||"none"!==display||(elem.style.display=""),""===elem.style.display&&isHidden(elem)&&(values[index]=data_priv.access(elem,"olddisplay",defaultDisplay(elem.nodeName)))):(hidden=isHidden(elem),"none"===display&&hidden||data_priv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))));for(index=0;length>index;index++)elem=elements[index],elem.style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"));return elements}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}function createFxNow(){return setTimeout(function(){fxNow=void 0}),fxNow=jQuery.now()}function genFx(type,includeWidth){var which,i=0,attrs={height:type};for(includeWidth=includeWidth?1:0;4>i;i+=2-includeWidth)which=cssExpand[i],attrs["margin"+which]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function createTween(value,prop,animation){for(var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;length>index;index++)if(tween=collection[index].call(animation,prop,value))return tween}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,checkDisplay,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=data_priv.get(elem,"fxshow");opts.queue||(hooks=jQuery._queueHooks(elem,"fx"),null==hooks.unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()})})),1===elem.nodeType&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],display=jQuery.css(elem,"display"),checkDisplay="none"===display?data_priv.get(elem,"olddisplay")||defaultDisplay(elem.nodeName):display,"inline"===checkDisplay&&"none"===jQuery.css(elem,"float")&&(style.display="inline-block")),opts.overflow&&(style.overflow="hidden",anim.always(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]}));for(prop in props)if(value=props[prop],rfxtypes.exec(value)){if(delete props[prop],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show")){if("show"!==value||!dataShow||void 0===dataShow[prop])continue;hidden=!0}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}else display=void 0;if(jQuery.isEmptyObject(orig))"inline"===("none"===display?defaultDisplay(elem.nodeName):display)&&(style.display=display);else{dataShow?"hidden"in dataShow&&(hidden=dataShow.hidden):dataShow=data_priv.access(elem,"fxshow",{}),toggle&&(dataShow.hidden=!hidden),hidden?jQuery(elem).show():anim.done(function(){jQuery(elem).hide()}),anim.done(function(){var prop;data_priv.remove(elem,"fxshow");for(prop in orig)jQuery.style(elem,prop,orig[prop])});for(prop in orig)tween=createTween(hidden?dataShow[prop]:0,prop,anim),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,tween.start="width"===prop||"height"===prop?1:0))}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(name=jQuery.camelCase(index),easing=specialEasing[name],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),hooks=jQuery.cssHooks[name],hooks&&"expand"in hooks){value=hooks.expand(value),delete props[name];for(index in value)index in props||(props[index]=value[index],specialEasing[index]=easing)}else specialEasing[name]=easing}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;length>index;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),1>percent&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;length>index;index++)animation.tweens[index].run(1);return gotoEnd?deferred.resolveWith(elem,[animation,gotoEnd]):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(propFilter(props,animation.opts.specialEasing);length>index;index++)if(result=animationPrefilters[index].call(animation,elem,props,animation.opts))return result;return jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType[0]?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)}),selected}var inspected={},seekingTransport=structure===transports;return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)void 0!==src[key]&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}function ajaxHandleResponses(s,jqXHR,responses){for(var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;"*"===dataTypes[0];)dataTypes.shift(),void 0===ct&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}return finalDataType?(finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]):void 0}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(current=dataTypes.shift();current;)if(s.responseFields[current]&&(jqXHR[s.responseFields[current]]=response),!prev&&isSuccess&&s.dataFilter&&(response=s.dataFilter(response,s.dataType)),prev=current,current=dataTypes.shift())if("*"===current)current=prev;else if("*"!==prev&&prev!==current){if(conv=converters[prev+" "+current]||converters["* "+current],!conv)for(conv2 in converters)if(tmp=conv2.split(" "),tmp[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){conv===!0?conv=converters[conv2]:converters[conv2]!==!0&&(current=tmp[0],dataTypes.unshift(tmp[1]));break}if(conv!==!0)if(conv&&s["throws"])response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}return{state:"success",data:response}}function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType&&elem.defaultView}var arr=[],slice=arr.slice,concat=arr.concat,push=arr.push,indexOf=arr.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,support={},document=window.document,version="2.1.3",jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return null!=num?0>num?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function(callback,args){return jQuery.each(this,callback,args)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(0>i?len:0);return this.pushStack(j>=0&&len>j?[this[j]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:arr.sort,splice:arr.splice},jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[i]||{},i++),"object"==typeof target||jQuery.isFunction(target)||(target={}),i===length&&(target=this,i--);length>i;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target},jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:!0,error:function(msg){throw Error(msg)},noop:function(){},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray,isWindow:function(obj){return null!=obj&&obj===obj.window},isNumeric:function(obj){return!jQuery.isArray(obj)&&obj-parseFloat(obj)+1>=0},isPlainObject:function(obj){return"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj)?!1:obj.constructor&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},type:function(obj){return null==obj?obj+"":"object"==typeof obj||"function"==typeof obj?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code),code&&(1===code.indexOf("use strict")?(script=document.createElement("script"),script.text=code,document.head.appendChild(script).parentNode.removeChild(script)):indirect(code))},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray)for(;length>i&&(value=callback.apply(obj[i],args),value!==!1);i++);else for(i in obj)if(value=callback.apply(obj[i],args),value===!1)break}else if(isArray)for(;length>i&&(value=callback.call(obj[i],i,obj[i]),value!==!1);i++);else for(i in obj)if(value=callback.call(obj[i],i,obj[i]),value===!1)break;return obj},trim:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];return null!=arr&&(isArraylike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):push.call(ret,arr)),ret},inArray:function(elem,arr,i){return null==arr?-1:indexOf.call(arr,elem,i)},merge:function(first,second){for(var len=+second.length,j=0,i=first.length;len>j;j++)first[i++]=second[j];return first.length=i,first},grep:function(elems,callback,invert){for(var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;length>i;i++)callbackInverse=!callback(elems[i],i),callbackInverse!==callbackExpect&&matches.push(elems[i]);return matches},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray)for(;length>i;i++)value=callback(elems[i],i,arg),null!=value&&ret.push(value);else for(i in elems)value=callback(elems[i],i,arg),null!=value&&ret.push(value);return concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;return"string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn)?(args=slice.call(arguments,2),proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))},proxy.guid=fn.guid=fn.guid||jQuery.guid++,proxy):void 0},now:Date.now,support:support}),jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});var Sizzle=function(window){function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),context=context||document,results=results||[],nodeType=context.nodeType,"string"!=typeof selector||!selector||1!==nodeType&&9!==nodeType&&11!==nodeType)return results;if(!seed&&documentIsHTML){if(11!==nodeType&&(match=rquickExpr.exec(selector)))if(m=match[1]){if(9===nodeType){if(elem=context.getElementById(m),!elem||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=1!==nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&testContext(context.parentNode)||context,newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}var keys=[];return cache}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return!1}finally{div.parentNode&&div.parentNode.removeChild(div),div=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=attrs.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function testContext(context){return context&&context.getElementsByTagName!==void 0&&context}function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";len>i;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements){if(outerCache=elem[expando]||(elem[expando]={}),(oldCache=outerCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if(outerCache[dir]=newCache,newCache[2]=matcher(elem,context,xml))return!0}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;len>i;i++)Sizzle(selector,contexts[i],results);return results}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;len>i;i++)(elem=unmatched[i])&&(!filter||filter(elem,context,xml))&&(newUnmatched.push(elem),mapped&&map.push(i));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1},implicitRelative,!0),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));return checkContext=null,ret}];len>i;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if(matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches),matcher[expando]){for(j=++i;len>j&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,j>i&&matcherFromTokens(tokens.slice(i,j)),len>j&&matcherFromTokens(tokens=tokens.slice(j)),len>j&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context!==document&&context);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){for(var i=0,len=list.length;len>i;i++)if(list[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|"+".*"+")\\)|)",rwhitespace=RegExp(whitespace+"+","g"),rtrim=RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=RegExp(pseudos),ridentifier=RegExp("^"+identifier+"$"),matchExpr={ID:RegExp("^#("+characterEncoding+")"),CLASS:RegExp("^\\.("+characterEncoding+")"),TAG:RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:RegExp("^"+attributes),PSEUDO:RegExp("^"+pseudos),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:RegExp("^(?:"+booleans+")$","i"),needsContext:RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;
return high!==high||escapedWhitespace?escaped:0>high?String.fromCharCode(high+65536):String.fromCharCode(55296|high>>10,56320|1023&high)},unloadHandler=function(){setDocument()};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?"HTML"!==documentElement.nodeName:!1},setDocument=Sizzle.setDocument=function(node){var hasCompare,parent,doc=node?node.ownerDocument||node:preferredDoc;return doc!==document&&9===doc.nodeType&&doc.documentElement?(document=doc,docElem=doc.documentElement,parent=doc.defaultView,parent&&parent!==parent.top&&(parent.addEventListener?parent.addEventListener("unload",unloadHandler,!1):parent.attachEvent&&parent.attachEvent("onunload",unloadHandler)),documentIsHTML=!isXML(doc),support.attributes=assert(function(div){return div.className="i",!div.getAttribute("className")}),support.getElementsByTagName=assert(function(div){return div.appendChild(doc.createComment("")),!div.getElementsByTagName("*").length}),support.getElementsByClassName=rnative.test(doc.getElementsByClassName),support.getById=assert(function(div){return docElem.appendChild(div).id=expando,!doc.getElementsByName||!doc.getElementsByName(expando).length}),support.getById?(Expr.find.ID=function(id,context){if(context.getElementById!==void 0&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(delete Expr.find.ID,Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=elem.getAttributeNode!==void 0&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){return context.getElementsByTagName!==void 0?context.getElementsByTagName(tag):support.qsa?context.querySelectorAll(tag):void 0}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){return documentIsHTML?context.getElementsByClassName(className):void 0},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(doc.querySelectorAll))&&(assert(function(div){docElem.appendChild(div).innerHTML="<a id='"+expando+"'></a>"+"<select id='"+expando+"-\f]' msallowcapture=''>"+"<option selected=''></option></select>",div.querySelectorAll("[msallowcapture^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")"),div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")"),div.querySelectorAll("[id~="+expando+"-]").length||rbuggyQSA.push("~="),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked"),div.querySelectorAll("a#"+expando+"+*").length||rbuggyQSA.push(".#.+[+~]")}),assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden"),div.appendChild(input).setAttribute("name","D"),div.querySelectorAll("[name=d]").length&&rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?="),div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)}),rbuggyQSA=rbuggyQSA.length&&RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare?compare:(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&compare||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)?-1:b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),!(!support.matchesSelector||!documentIsHTML||rbuggyMatches&&rbuggyMatches.test(expr)||rbuggyQSA&&rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.error=function(msg){throw Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||elem.getAttribute!==void 0&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:operator?(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:"|="===operator?result===check||result.slice(0,check.length+1)===check+"-":!1):!0}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(outerCache=parent[expando]||(parent[expando]={}),cache=outerCache[type]||[],nodeIndex=cache[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return diff-=last,diff===first||0===diff%first&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)idx=indexOf(seed,matched[i]),seed[idx]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),input[0]=null,!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return text=text.replace(runescape,funescape),function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return elemLang=elemLang.toLowerCase(),elemLang===lang||0===elemLang.indexOf(lang+"-");while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===!1},disabled:function(elem){return elem.disabled===!0},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,elem.selected===!0},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(6>elem.nodeType)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[0>argument?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;length>++i;)matchIndexes.push(i);return matchIndexes})}},Expr.pseudos.nth=Expr.pseudos.eq;for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);return setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){(!matched||(match=rcomma.exec(soFar)))&&(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length));for(type in Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(match||(match=tokenize(selector)),i=match.length;i--;)cached=matcherFromTokens(match[i]),cached[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers)),cached.selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if(tokens=match[0]=match[0].slice(0),tokens.length>2&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0],!context)return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),selector=seed.length&&toSelector(tokens),!selector)return push.apply(results,seed),results;break}}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=assert(function(div1){return 1&div1.compareDocumentPosition(document.createElement("div"))}),assert(function(div){return div.innerHTML="<a href='#'></a>","#"===div.firstChild.getAttribute("href")})||addHandle("type|href|height|width",function(elem,name,isXML){return isXML?void 0:elem.getAttribute(name,"type"===name.toLowerCase()?1:2)}),support.attributes&&assert(function(div){return div.innerHTML="<input/>",div.firstChild.setAttribute("value",""),""===div.firstChild.getAttribute("value")})||addHandle("value",function(elem,name,isXML){return isXML||"input"!==elem.nodeName.toLowerCase()?void 0:elem.defaultValue}),assert(function(div){return null==div.getAttribute("disabled")})||addHandle(booleans,function(elem,name,isXML){var val;return isXML?void 0:elem[name]===!0?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}),Sizzle}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;jQuery.filter=function(expr,elems,not){var elem=elems[0];return not&&(expr=":not("+expr+")"),1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return 1===elem.nodeType}))},jQuery.fn.extend({find:function(selector){var i,len=this.length,ret=[],self=this;if("string"!=typeof selector)return this.pushStack(jQuery(selector).filter(function(){for(i=0;len>i;i++)if(jQuery.contains(self[i],this))return!0}));for(i=0;len>i;i++)jQuery.find(selector,self[i],ret);return ret=this.pushStack(len>1?jQuery.unique(ret):ret),ret.selector=this.selector?this.selector+" "+selector:selector,ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],!1))},not:function(selector){return this.pushStack(winnow(this,selector||[],!0))},is:function(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context){var match,elem;if(!selector)return this;if("string"==typeof selector){if(match="<"===selector[0]&&">"===selector[selector.length-1]&&selector.length>=3?[null,selector,null]:rquickExpr.exec(selector),!match||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}return elem=document.getElementById(match[2]),elem&&elem.parentNode&&(this.length=1,this[0]=elem),this.context=document,this.selector=selector,this}return selector.nodeType?(this.context=this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?rootjQuery.ready!==void 0?rootjQuery.ready(selector):selector(jQuery):(void 0!==selector.selector&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this))};init.prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.extend({dir:function(elem,dir,until){for(var matched=[],truncate=void 0!==until;(elem=elem[dir])&&9!==elem.nodeType;)if(1===elem.nodeType){if(truncate&&jQuery(elem).is(until))break;matched.push(elem)}return matched},sibling:function(n,elem){for(var matched=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&matched.push(n);return matched}}),jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){for(var i=0;l>i;i++)if(jQuery.contains(this,targets[i]))return!0})},closest:function(selectors,context){for(var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;l>i;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(11>cur.nodeType&&(pos?pos.index(cur)>-1:1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}return this.pushStack(matched.length>1?jQuery.unique(matched):matched)},index:function(elem){return elem?"string"==typeof elem?indexOf.call(jQuery(elem),this[0]):indexOf.call(this,elem.jquery?elem[0]:elem):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);return"Until"!==name.slice(-5)&&(selector=until),selector&&"string"==typeof selector&&(matched=jQuery.filter(selector,matched)),this.length>1&&(guaranteedUnique[name]||jQuery.unique(matched),rparentsprev.test(name)&&matched.reverse()),this.pushStack(matched)}});var rnotwhite=/\S+/g,optionsCache={};jQuery.Callbacks=function(options){options="string"==typeof options?optionsCache[options]||createOptions(options):jQuery.extend({},options);var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){for(memory=options.memory&&data,fired=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length,firing=!0;list&&firingLength>firingIndex;firingIndex++)if(list[firingIndex].apply(data[0],data[1])===!1&&options.stopOnFalse){memory=!1;break}firing=!1,list&&(stack?stack.length&&fire(stack.shift()):memory?list=[]:self.disable())},self={add:function(){if(list){var start=list.length;(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);"function"===type?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==type&&add(arg)})})(arguments),firing?firingLength=list.length:memory&&(firingStart=start,fire(memory))}return this},remove:function(){return list&&jQuery.each(arguments,function(_,arg){for(var index;(index=jQuery.inArray(arg,list,index))>-1;)list.splice(index,1),firing&&(firingLength>=index&&firingLength--,firingIndex>=index&&firingIndex--)}),this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!(!list||!list.length)},empty:function(){return list=[],firingLength=0,this},disable:function(){return list=stack=memory=void 0,this},disabled:function(){return!list},lock:function(){return stack=void 0,memory||self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return!list||fired&&!stack||(args=args||[],args=[context,args.slice?args.slice():args],firing?stack.push(args):fire(args)),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})}),fns=null}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return promise.pipe=promise.then,jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add,stateString&&list.add(function(){state=stateString},tuples[1^i][2].disable,tuples[2][2].lock),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(subordinate){var i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this,values[i]=arguments.length>1?slice.call(arguments):value,values===progressValues?deferred.notifyWith(contexts,values):--remaining||deferred.resolveWith(contexts,values)}},progressValues,progressContexts,resolveContexts;if(length>1)for(progressValues=Array(length),progressContexts=Array(length),resolveContexts=Array(length);length>i;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues)):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){return jQuery.ready.promise().done(fn),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){(wait===!0?--jQuery.readyWait:jQuery.isReady)||(jQuery.isReady=!0,wait!==!0&&--jQuery.readyWait>0||(readyList.resolveWith(document,[jQuery]),jQuery.fn.triggerHandler&&(jQuery(document).triggerHandler("ready"),jQuery(document).off("ready"))))}}),jQuery.ready.promise=function(obj){return readyList||(readyList=jQuery.Deferred(),"complete"===document.readyState?setTimeout(jQuery.ready):(document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1))),readyList.promise(obj)},jQuery.ready.promise();var access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=null==key;if("object"===jQuery.type(key)){chainable=!0;for(i in key)jQuery.access(elems,fn,i,key[i],!0,emptyGet,raw)}else if(void 0!==value&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(raw?(fn.call(elems,value),fn=null):(bulk=fn,fn=function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;len>i;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet};jQuery.acceptData=function(owner){return 1===owner.nodeType||9===owner.nodeType||!+owner.nodeType},Data.uid=1,Data.accepts=jQuery.acceptData,Data.prototype={key:function(owner){if(!Data.accepts(owner))return 0;var descriptor={},unlock=owner[this.expando];if(!unlock){unlock=Data.uid++;try{descriptor[this.expando]={value:unlock},Object.defineProperties(owner,descriptor)}catch(e){descriptor[this.expando]=unlock,jQuery.extend(owner,descriptor)}}return this.cache[unlock]||(this.cache[unlock]={}),unlock},set:function(owner,data,value){var prop,unlock=this.key(owner),cache=this.cache[unlock];if("string"==typeof data)cache[data]=value;else if(jQuery.isEmptyObject(cache))jQuery.extend(this.cache[unlock],data);else for(prop in data)cache[prop]=data[prop];return cache},get:function(owner,key){var cache=this.cache[this.key(owner)];return void 0===key?cache:cache[key]},access:function(owner,key,value){var stored;return void 0===key||key&&"string"==typeof key&&void 0===value?(stored=this.get(owner,key),void 0!==stored?stored:this.get(owner,jQuery.camelCase(key))):(this.set(owner,key,value),void 0!==value?value:key)},remove:function(owner,key){var i,name,camel,unlock=this.key(owner),cache=this.cache[unlock];if(void 0===key)this.cache[unlock]={};else{jQuery.isArray(key)?name=key.concat(key.map(jQuery.camelCase)):(camel=jQuery.camelCase(key),key in cache?name=[key,camel]:(name=camel,name=name in cache?[name]:name.match(rnotwhite)||[])),i=name.length;for(;i--;)delete cache[name[i]]}},hasData:function(owner){return!jQuery.isEmptyObject(this.cache[owner[this.expando]]||{})},discard:function(owner){owner[this.expando]&&delete this.cache[owner[this.expando]]}};var data_priv=new Data,data_user=new Data,rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({hasData:function(elem){return data_user.hasData(elem)||data_priv.hasData(elem)},data:function(elem,name,data){return data_user.access(elem,name,data)},removeData:function(elem,name){data_user.remove(elem,name)},_data:function(elem,name,data){return data_priv.access(elem,name,data)},_removeData:function(elem,name){data_priv.remove(elem,name)}}),jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(void 0===key){if(this.length&&(data=data_user.get(elem),1===elem.nodeType&&!data_priv.get(elem,"hasDataAttrs"))){for(i=attrs.length;i--;)attrs[i]&&(name=attrs[i].name,0===name.indexOf("data-")&&(name=jQuery.camelCase(name.slice(5)),dataAttr(elem,name,data[name])));data_priv.set(elem,"hasDataAttrs",!0)}return data}return"object"==typeof key?this.each(function(){data_user.set(this,key)}):access(this,function(value){var data,camelKey=jQuery.camelCase(key);if(elem&&void 0===value){if(data=data_user.get(elem,key),void 0!==data)return data;if(data=data_user.get(elem,camelKey),void 0!==data)return data;
if(data=dataAttr(elem,camelKey,void 0),void 0!==data)return data}else this.each(function(){var data=data_user.get(this,camelKey);data_user.set(this,camelKey,value),-1!==key.indexOf("-")&&void 0!==data&&data_user.set(this,key,value)})},null,value,arguments.length>1,null,!0)},removeData:function(key){return this.each(function(){data_user.remove(this,key)})}}),jQuery.extend({queue:function(elem,type,data){var queue;return elem?(type=(type||"fx")+"queue",queue=data_priv.get(elem,type),data&&(!queue||jQuery.isArray(data)?queue=data_priv.access(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]):void 0},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};"inprogress"===fn&&(fn=queue.shift(),startLength--),fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,next,hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return data_priv.get(elem,key)||data_priv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(elem,[type+"queue",key])})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),setter>arguments.length?jQuery.queue(this[0],type):void 0===data?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};for("string"!=typeof type&&(obj=type,type=void 0),type=type||"fx";i--;)tmp=data_priv.get(elements[i],type+"queueHooks"),tmp&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cssExpand=["Top","Right","Bottom","Left"],isHidden=function(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)},rcheckableType=/^(?:checkbox|radio)$/i;(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio"),input.setAttribute("checked","checked"),input.setAttribute("name","t"),div.appendChild(input),support.checkClone=div.cloneNode(!0).cloneNode(!0).lastChild.checked,div.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!div.cloneNode(!0).lastChild.defaultValue})();var strundefined="undefined";support.focusinBubbles="onfocusin"in window;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.get(elem);if(elemData)for(handler.handler&&(handleObjIn=handler,handler=handleObjIn.handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||(eventHandle=elemData.handle=function(e){return typeof jQuery!==strundefined&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):void 0}),types=(types||"").match(rnotwhite)||[""],t=types.length;t--;)tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type&&(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||(handlers=events[type]=[],handlers.delegateCount=0,special.setup&&special.setup.call(elem,data,namespaces,eventHandle)!==!1||elem.addEventListener&&elem.addEventListener(type,eventHandle,!1)),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0)},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.hasData(elem)&&data_priv.get(elem);if(elemData&&(events=elemData.events)){for(types=(types||"").match(rnotwhite)||[""],t=types.length;t--;)if(tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,handlers=events[type]||[],tmp=tmp[2]&&RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&special.teardown.call(elem,namespaces,elemData.handle)!==!1||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(delete elemData.handle,data_priv.remove(elem,"events"))}},trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];if(cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(type.indexOf(".")>=0&&(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort()),ontype=0>type.indexOf(":")&&"on"+type,event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event),event.isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=void 0,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||special.trigger.apply(elem,data)!==!1)){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=i>1?bubbleType:special.bindType||type,handle=(data_priv.get(cur,"events")||{})[event.type]&&data_priv.get(cur,"handle"),handle&&handle.apply(cur,data),handle=ontype&&cur[ontype],handle&&handle.apply&&jQuery.acceptData(cur)&&(event.result=handle.apply(cur,data),event.result===!1&&event.preventDefault());return event.type=type,onlyHandlers||event.isDefaultPrevented()||special._default&&special._default.apply(eventPath.pop(),data)!==!1||!jQuery.acceptData(elem)||ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)&&(tmp=elem[ontype],tmp&&(elem[ontype]=null),jQuery.event.triggered=type,elem[type](),jQuery.event.triggered=void 0,tmp&&(elem[ontype]=tmp)),event.result}},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=slice.call(arguments),handlers=(data_priv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};if(args[0]=event,event.delegateTarget=this,!special.preDispatch||special.preDispatch.call(this,event)!==!1){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)(!event.namespace_re||event.namespace_re.test(handleObj.namespace))&&(event.handleObj=handleObj,event.data=handleObj.data,ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args),void 0!==ret&&(event.result=ret)===!1&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||"click"!==event.type))for(;cur!==this;cur=cur.parentNode||this)if(cur.disabled!==!0||"click"!==event.type){for(matches=[],i=0;delegateCount>i;i++)handleObj=handlers[i],sel=handleObj.selector+" ",void 0===matches[sel]&&(matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return handlers.length>delegateCount&&handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)}),handlerQueue},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button;return null==event.pageX&&null!=original.clientX&&(eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),event.which||void 0===button||(event.which=1&button?1:2&button?3:4&button?2:0),event}},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];for(fixHook||(this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}),copy=fixHook.props?this.props.concat(fixHook.props):this.props,event=new jQuery.Event(originalEvent),i=copy.length;i--;)prop=copy[i],event[prop]=originalEvent[prop];return event.target||(event.target=document),3===event.target.nodeType&&(event.target=event.target.parentNode),fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==safeActiveElement()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===safeActiveElement()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&jQuery.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){void 0!==event.result&&event.originalEvent&&(event.originalEvent.returnValue=event.result)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.removeEvent=function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)},jQuery.Event=function(src,props){return this instanceof jQuery.Event?(src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||void 0===src.defaultPrevented&&src.returnValue===!1?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0,void 0):new jQuery.Event(src,props)},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;return(!related||related!==target&&!jQuery.contains(target,related))&&(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix);attaches||doc.addEventListener(orig,handler,!0),data_priv.access(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix)-1;attaches?data_priv.access(doc,fix,attaches):(doc.removeEventListener(orig,handler,!0),data_priv.remove(doc,fix))}}}),jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if("object"==typeof types){"string"!=typeof selector&&(data=data||selector,selector=void 0);for(type in types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn?(fn=selector,data=selector=void 0):null==fn&&("string"==typeof selector?(fn=data,data=void 0):(fn=data,data=selector,selector=void 0)),fn===!1)fn=returnFalse;else if(!fn)return this;return 1===one&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"==typeof types){for(type in types)this.off(type,selector,types[type]);return this}return(selector===!1||"function"==typeof selector)&&(fn=selector,selector=void 0),fn===!1&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];return elem?jQuery.event.trigger(type,data,elem,!0):void 0}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(!0),inPage=jQuery.contains(elem.ownerDocument,elem);if(!(support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0,l=srcElements.length;l>i;i++)fixInput(srcElements[i],destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0,l=srcElements.length;l>i;i++)cloneCopyEvent(srcElements[i],destElements[i]);else cloneCopyEvent(elem,clone);return destElements=getAll(clone,"script"),destElements.length>0&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),clone},buildFragment:function(elems,context,scripts,selection){for(var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;l>i;i++)if(elem=elems[i],elem||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||fragment.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;jQuery.merge(nodes,tmp.childNodes),tmp=fragment.firstChild,tmp.textContent=""}else nodes.push(context.createTextNode(elem));for(fragment.textContent="",i=0;elem=nodes[i++];)if((!selection||-1===jQuery.inArray(elem,selection))&&(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(fragment.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts))for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return fragment},cleanData:function(elems){for(var data,elem,type,key,special=jQuery.event.special,i=0;void 0!==(elem=elems[i]);i++){if(jQuery.acceptData(elem)&&(key=elem[data_priv.expando],key&&(data=data_priv.cache[key]))){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);data_priv.cache[key]&&delete data_priv.cache[key]}delete data_user.cache[elem[data_user.expando]]}}}),jQuery.fn.extend({text:function(value){return access(this,function(value){return void 0===value?jQuery.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=value)})},null,value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},remove:function(selector,keepData){for(var elem,elems=selector?jQuery.filter(selector,this):this,i=0;null!=(elem=elems[i]);i++)keepData||1!==elem.nodeType||jQuery.cleanData(getAll(elem)),elem.parentNode&&(keepData&&jQuery.contains(elem.ownerDocument,elem)&&setGlobalEval(getAll(elem,"script")),elem.parentNode.removeChild(elem));return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++)1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.textContent="");return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null==dataAndEvents?!1:dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(void 0===value&&1===elem.nodeType)return elem.innerHTML;if("string"==typeof value&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;l>i;i++)elem=this[i]||{},1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(){var arg=arguments[0];return this.domManip(arguments,function(elem){arg=this.parentNode,jQuery.cleanData(getAll(this)),arg&&arg.replaceChild(elem,this)}),arg&&(arg.length||arg.nodeType)?this:this.remove()},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,callback){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&"string"==typeof value&&!support.checkClone&&rchecked.test(value))return this.each(function(index){var self=set.eq(index);isFunction&&(args[0]=value.call(this,index,self.html())),self.domManip(args,callback)});if(l&&(fragment=jQuery.buildFragment(args,this[0].ownerDocument,!1,this),first=fragment.firstChild,1===fragment.childNodes.length&&(fragment=first),first)){for(scripts=jQuery.map(getAll(fragment,"script"),disableScript),hasScripts=scripts.length;l>i;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(this[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;hasScripts>i;i++)node=scripts[i],rscriptType.test(node.type||"")&&!data_priv.access(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery._evalUrl&&jQuery._evalUrl(node.src):jQuery.globalEval(node.textContent.replace(rcleanScript,"")))}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;last>=i;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),push.apply(ret,elems.get());return this.pushStack(ret)}});var iframe,elemdisplay={},rmargin=/^margin/,rnumnonpx=RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),getStyles=function(elem){return elem.ownerDocument.defaultView.opener?elem.ownerDocument.defaultView.getComputedStyle(elem,null):window.getComputedStyle(elem,null)};(function(){function computePixelPositionAndBoxSizingReliable(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",div.innerHTML="",docElem.appendChild(container);var divStyle=window.getComputedStyle(div,null);pixelPositionVal="1%"!==divStyle.top,boxSizingReliableVal="4px"===divStyle.width,docElem.removeChild(container)}var pixelPositionVal,boxSizingReliableVal,docElem=document.documentElement,container=document.createElement("div"),div=document.createElement("div");div.style&&(div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,container.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",container.appendChild(div),window.getComputedStyle&&jQuery.extend(support,{pixelPosition:function(){return computePixelPositionAndBoxSizingReliable(),pixelPositionVal},boxSizingReliable:function(){return null==boxSizingReliableVal&&computePixelPositionAndBoxSizingReliable(),boxSizingReliableVal},reliableMarginRight:function(){var ret,marginDiv=div.appendChild(document.createElement("div"));return marginDiv.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",marginDiv.style.marginRight=marginDiv.style.width="0",div.style.width="1px",docElem.appendChild(container),ret=!parseFloat(window.getComputedStyle(marginDiv,null).marginRight),docElem.removeChild(container),div.removeChild(marginDiv),ret}}))})(),jQuery.swap=function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret};var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=RegExp("^("+pnum+")(.*)$","i"),rrelNum=RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],void 0===value?hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,!1,extra))?ret:style[name]:(type=typeof value,"string"===type&&(ret=rrelNum.exec(value))&&(value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),null!=value&&value===value&&("number"!==type||jQuery.cssNumber[origName]||(value+="px"),support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),hooks&&"set"in hooks&&void 0===(value=hooks.set(elem,value,extra))||(style[name]=value)),void 0)}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],hooks&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),void 0===val&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),extra===!0||jQuery.isNumeric(num)?num||0:val):val}}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){return computed?rdisplayswap.test(jQuery.css(elem,"display"))&&0===elem.offsetWidth?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra):void 0},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){return computed?jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"]):void 0}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];4>i;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)}),jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;len>i;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return void 0!==value?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){return"boolean"==typeof state?state?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||"swing",this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.pos=eased=this.options.duration?jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(tween){var result;return null==tween.elem[tween.prop]||tween.elem.style&&null!=tween.elem.style[tween.prop]?(result=jQuery.css(tween.elem,tween.prop,""),result&&"auto"!==result?result:0):tween.elem[tween.prop]},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):tween.elem.style&&(null!=tween.elem.style[jQuery.cssProps[tween.prop]]||jQuery.cssHooks[tween.prop])?jQuery.style(tween.elem,tween.prop,tween.now+tween.unit):tween.elem[tween.prop]=tween.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||"px"!==unit&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit){unit=unit||start[3],parts=parts||[],start=+target||1;do scale=scale||".5",start/=scale,jQuery.style(tween.elem,prop,start+unit);while(scale!==(scale=tween.cur()/target)&&1!==scale&&--maxIterations)}return parts&&(start=tween.start=+start||+target||0,tween.unit=unit,tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]),tween}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){jQuery.isFunction(props)?(callback=props,props=["*"]):props=props.split(" ");for(var prop,index=0,length=props.length;length>index;index++)prop=props[index],tweeners[prop]=tweeners[prop]||[],tweeners[prop].unshift(callback)},prefilter:function(callback,prepend){prepend?animationPrefilters.unshift(callback):animationPrefilters.push(callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,(null==opt.queue||opt.queue===!0)&&(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)
},opt},jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);(empty||data_priv.get(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||optall.queue===!1?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=void 0),clearQueue&&type!==!1&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=data_priv.get(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));(dequeue||!gotoEnd)&&jQuery.dequeue(this,type)})},finish:function(type){return type!==!1&&(type=type||"fx"),this.each(function(){var index,data=data_priv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop&&hooks.stop.call(this,!0),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;length>index;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}}),jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.timers=[],jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;for(fxNow=jQuery.now();timers.length>i;i++)timer=timers[i],timer()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=void 0},jQuery.fx.timer=function(timer){jQuery.timers.push(timer),timer()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox",support.checkOn=""!==input.value,support.optSelected=opt.selected,select.disabled=!0,support.optDisabled=!opt.disabled,input=document.createElement("input"),input.value="t",input.type="radio",support.radioValue="t"===input.value}();var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}}),jQuery.extend({attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return typeof elem.getAttribute===strundefined?jQuery.prop(elem,name,value):(1===nType&&jQuery.isXMLDoc(elem)||(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)),void 0===value?hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:(ret=jQuery.find.attr(elem,name),null==ret?void 0:ret):null!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:(elem.setAttribute(name,value+""),value):(jQuery.removeAttr(elem,name),void 0))},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)propName=jQuery.propFix[name]||name,jQuery.expr.match.bool.test(name)&&(elem[propName]=!1),elem.removeAttribute(name)},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}}}),boolHook={set:function(elem,value,name){return value===!1?jQuery.removeAttr(elem,name):elem.setAttribute(name,name),name}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle;return isXML||(handle=attrHandle[name],attrHandle[name]=ret,ret=null!=getter(elem,name,isXML)?name.toLowerCase():null,attrHandle[name]=handle),ret}});var rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}}),jQuery.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return notxml=1!==nType||!jQuery.isXMLDoc(elem),notxml&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),void 0!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){return elem.hasAttribute("tabindex")||rfocusable.test(elem.nodeName)||elem.href?elem.tabIndex:-1}}}}),support.optSelected||(jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;return parent&&parent.parentNode&&parent.parentNode.selectedIndex,null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(value){var classes,elem,cur,clazz,j,finalValue,proceed="string"==typeof value&&value,i=0,len=this.length;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(rnotwhite)||[];len>i;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ")){for(j=0;clazz=classes[j++];)0>cur.indexOf(" "+clazz+" ")&&(cur+=clazz+" ");finalValue=jQuery.trim(cur),elem.className!==finalValue&&(elem.className=finalValue)}return this},removeClass:function(value){var classes,elem,cur,clazz,j,finalValue,proceed=0===arguments.length||"string"==typeof value&&value,i=0,len=this.length;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(rnotwhite)||[];len>i;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"")){for(j=0;clazz=classes[j++];)for(;cur.indexOf(" "+clazz+" ")>=0;)cur=cur.replace(" "+clazz+" "," ");finalValue=value?jQuery.trim(cur):"",elem.className!==finalValue&&(elem.className=finalValue)}return this},toggleClass:function(value,stateVal){var type=typeof value;return"boolean"==typeof stateVal&&"string"===type?stateVal?this.addClass(value):this.removeClass(value):jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}):this.each(function(){if("string"===type)for(var className,i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];className=classNames[i++];)self.hasClass(className)?self.removeClass(className):self.addClass(className);else(type===strundefined||"boolean"===type)&&(this.className&&data_priv.set(this,"__className__",this.className),this.className=this.className||value===!1?"":data_priv.get(this,"__className__")||"")})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;l>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0)return!0;return!1}});var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];{if(arguments.length)return isFunction=jQuery.isFunction(value),this.each(function(i){var val;1===this.nodeType&&(val=isFunction?value.call(this,i,jQuery(this).val()):value,null==val?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()],hooks&&"set"in hooks&&void 0!==hooks.set(this,val,"value")||(this.value=val))});if(elem)return hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()],hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,"value"))?ret:(ret=elem.value,"string"==typeof ret?ret.replace(rreturn,""):null==ret?"":ret)}}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return null!=val?val:jQuery.trim(jQuery.text(elem))}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||0>index,values=one?null:[],max=one?index+1:options.length,i=0>index?max:one?index:0;max>i;i++)if(option=options[i],!(!option.selected&&i!==index||(support.optDisabled?option.disabled:null!==option.getAttribute("disabled"))||option.parentNode.disabled&&jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){for(var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;i--;)option=options[i],(option.selected=jQuery.inArray(option.value,values)>=0)&&(optionSet=!0);return optionSet||(elem.selectedIndex=-1),values}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){return jQuery.isArray(value)?elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0:void 0}},support.checkOn||(jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value})}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}}),jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var nonce=jQuery.now(),rquery=/\?/;jQuery.parseJSON=function(data){return JSON.parse(data+"")},jQuery.parseXML=function(data){var xml,tmp;if(!data||"string"!=typeof data)return null;try{tmp=new DOMParser,xml=tmp.parseFromString(data,"text/xml")}catch(e){xml=void 0}return(!xml||xml.getElementsByTagName("parsererror").length)&&jQuery.error("Invalid XML: "+data),xml};var rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*"),ajaxLocation=window.location.href,ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;2!==state&&(state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=void 0,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0,isSuccess=status>=200&&300>status||304===status,responses&&(response=ajaxHandleResponses(s,jqXHR,responses)),response=ajaxConvert(s,response,jqXHR,isSuccess),isSuccess?(s.ifModified&&(modified=jqXHR.getResponseHeader("Last-Modified"),modified&&(jQuery.lastModified[cacheURL]=modified),modified=jqXHR.getResponseHeader("etag"),modified&&(jQuery.etag[cacheURL]=modified)),204===status||"HEAD"===s.type?statusText="nocontent":304===status?statusText="notmodified":(statusText=response.state,success=response.data,error=response.error,isSuccess=!error)):(error=statusText,(status||!statusText)&&(statusText="error",0>status&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=void 0,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}"object"==typeof url&&(options=url,url=void 0),options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();return state||(name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return state||(s.mimeType=type),this},statusCode:function(map){var code;if(map)if(2>state)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR).complete=completeDeferred.add,jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""],null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?"80":"443"))===(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?"80":"443")))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return jqXHR;fireGlobals=jQuery.event&&s.global,fireGlobals&&0===jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,s.hasContent||(s.data&&(cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),s.cache===!1&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++)),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&s.contentType!==!1||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===!1||2===state))return jqXHR.abort();strAbort="abort";for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&s.timeout>0&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(2>state))throw e;done(-1,e)}}else done(-1,"No Transport");return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,void 0,callback,"script")}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=void 0),jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}}),jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},jQuery.fn.extend({wrapAll:function(html){var wrap;return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapAll(html.call(this,i))}):(this[0]&&(wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstElementChild;)elem=elem.firstElementChild;return elem}).append(this)),this)},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}}),jQuery.expr.filters.hidden=function(elem){return 0>=elem.offsetWidth&&0>=elem.offsetHeight},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(void 0===traditional&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var xhrId=0,xhrCallbacks={},xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();window.attachEvent&&window.attachEvent("onunload",function(){for(var key in xhrCallbacks)xhrCallbacks[key]()}),support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,support.ajax=xhrSupported=!!xhrSupported,jQuery.ajaxTransport(function(options){var callback;return support.cors||xhrSupported&&!options.crossDomain?{send:function(headers,complete){var i,xhr=options.xhr(),id=++xhrId;if(xhr.open(options.type,options.url,options.async,options.username,options.password),options.xhrFields)for(i in options.xhrFields)xhr[i]=options.xhrFields[i];options.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(options.mimeType),options.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest");for(i in headers)xhr.setRequestHeader(i,headers[i]);callback=function(type){return function(){callback&&(delete xhrCallbacks[id],callback=xhr.onload=xhr.onerror=null,"abort"===type?xhr.abort():"error"===type?complete(xhr.status,xhr.statusText):complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,"string"==typeof xhr.responseText?{text:xhr.responseText}:void 0,xhr.getAllResponseHeaders()))}},xhr.onload=callback(),xhr.onerror=callback("error"),callback=xhrCallbacks[id]=callback("abort");try{xhr.send(options.hasContent&&options.data||null)}catch(e){if(callback)throw e}},abort:function(){callback&&callback()}}:void 0}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){void 0===s.cache&&(s.cache=!1),s.crossDomain&&(s.type="GET")}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({async:!0,charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove(),callback=null,evt&&complete("error"===evt.type?404:200,evt.type)}),document.head.appendChild(script[0])},abort:function(){callback&&callback()}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==!1&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");return jsonProp||"jsonp"===s.dataTypes[0]?(callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):s.jsonp!==!1&&(s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=void 0}),"script"):void 0}),jQuery.parseHTML=function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;"boolean"==typeof context&&(keepScripts=context,context=!1),context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];return parsed?[context.createElement(parsed[1])]:(parsed=jQuery.buildFragment([data],context,scripts),scripts&&scripts.length&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,type,response,self=this,off=url.indexOf(" ");return off>=0&&(selector=jQuery.trim(url.slice(off)),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=void 0):params&&"object"==typeof params&&(type="POST"),self.length>0&&jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};var docElem=window.document.documentElement;jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};"static"===position&&(elem.style.position="relative"),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&(curCSSTop+curCSSLeft).indexOf("auto")>-1,calculatePosition?(curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({offset:function(options){if(arguments.length)return void 0===options?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(doc)return docElem=doc.documentElement,jQuery.contains(docElem,elem)?(typeof elem.getBoundingClientRect!==strundefined&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft}):box},position:function(){if(this[0]){var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||docElem;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);return void 0===val?win?win[prop]:elem[method]:(win?win.scrollTo(top?window.pageXOffset:val,top?val:window.pageYOffset):elem[method]=val,void 0)},method,val,arguments.length,null)}}),jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){return computed?(computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed):void 0})}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(margin===!0||value===!0?"margin":"border");return access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):void 0===value?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:void 0,chainable,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},typeof noGlobal===strundefined&&(window.jQuery=window.$=jQuery),jQuery});
                (function(definition){if("function"==typeof bootstrap)bootstrap("promise",definition);else if("object"==typeof exports)module.exports=definition();else if("function"==typeof define&&define.amd)define(definition);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=definition}else Q=definition()})(function(){"use strict";function uncurryThis(f){return function(){return call.apply(f,arguments)}}function isObject(value){return value===Object(value)}function isStopIteration(exception){return"[object StopIteration]"===object_toString(exception)||exception instanceof QReturnValue}function makeStackTraceLong(error,promise){if(hasStacks&&promise.stack&&"object"==typeof error&&null!==error&&error.stack&&-1===error.stack.indexOf(STACK_JUMP_SEPARATOR)){for(var stacks=[],p=promise;p;p=p.source)p.stack&&stacks.unshift(p.stack);stacks.unshift(error.stack);var concatedStacks=stacks.join("\n"+STACK_JUMP_SEPARATOR+"\n");error.stack=filterStackString(concatedStacks)}}function filterStackString(stackString){for(var lines=stackString.split("\n"),desiredLines=[],i=0;lines.length>i;++i){var line=lines[i];isInternalFrame(line)||isNodeFrame(line)||!line||desiredLines.push(line)}return desiredLines.join("\n")}function isNodeFrame(stackLine){return-1!==stackLine.indexOf("(module.js:")||-1!==stackLine.indexOf("(node.js:")}function getFileNameAndLineNumber(stackLine){var attempt1=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(stackLine);if(attempt1)return[attempt1[1],Number(attempt1[2])];var attempt2=/at ([^ ]+):(\d+):(?:\d+)$/.exec(stackLine);if(attempt2)return[attempt2[1],Number(attempt2[2])];var attempt3=/.*@(.+):(\d+)$/.exec(stackLine);return attempt3?[attempt3[1],Number(attempt3[2])]:void 0}function isInternalFrame(stackLine){var fileNameAndLineNumber=getFileNameAndLineNumber(stackLine);if(!fileNameAndLineNumber)return!1;var fileName=fileNameAndLineNumber[0],lineNumber=fileNameAndLineNumber[1];return fileName===qFileName&&lineNumber>=qStartingLine&&qEndingLine>=lineNumber}function captureLine(){if(hasStacks)try{throw Error()}catch(e){var lines=e.stack.split("\n"),firstLine=lines[0].indexOf("@")>0?lines[1]:lines[2],fileNameAndLineNumber=getFileNameAndLineNumber(firstLine);if(!fileNameAndLineNumber)return;return qFileName=fileNameAndLineNumber[0],fileNameAndLineNumber[1]}}function deprecate(callback,name,alternative){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(name+" is deprecated, use "+alternative+" instead.",Error("").stack),callback.apply(callback,arguments)}}function Q(value){return isPromise(value)?value:isPromiseAlike(value)?coerce(value):fulfill(value)}function defer(){function become(newPromise){resolvedPromise=newPromise,promise.source=newPromise,array_reduce(messages,function(undefined,message){nextTick(function(){newPromise.promiseDispatch.apply(newPromise,message)})},void 0),messages=void 0,progressListeners=void 0}var messages=[],progressListeners=[],resolvedPromise,deferred=object_create(defer.prototype),promise=object_create(Promise.prototype);if(promise.promiseDispatch=function(resolve,op,operands){var args=array_slice(arguments);messages?(messages.push(args),"when"===op&&operands[1]&&progressListeners.push(operands[1])):nextTick(function(){resolvedPromise.promiseDispatch.apply(resolvedPromise,args)})},promise.valueOf=function(){if(messages)return promise;var nearerValue=nearer(resolvedPromise);return isPromise(nearerValue)&&(resolvedPromise=nearerValue),nearerValue},promise.inspect=function(){return resolvedPromise?resolvedPromise.inspect():{state:"pending"}},Q.longStackSupport&&hasStacks)try{throw Error()}catch(e){promise.stack=e.stack.substring(e.stack.indexOf("\n")+1)}return deferred.promise=promise,deferred.resolve=function(value){resolvedPromise||become(Q(value))},deferred.fulfill=function(value){resolvedPromise||become(fulfill(value))},deferred.reject=function(reason){resolvedPromise||become(reject(reason))},deferred.notify=function(progress){resolvedPromise||array_reduce(progressListeners,function(undefined,progressListener){nextTick(function(){progressListener(progress)})},void 0)},deferred}function promise(resolver){if("function"!=typeof resolver)throw new TypeError("resolver must be a function.");var deferred=defer();try{resolver(deferred.resolve,deferred.reject,deferred.notify)}catch(reason){deferred.reject(reason)}return deferred.promise}function race(answerPs){return promise(function(resolve,reject){for(var i=0,len=answerPs.length;len>i;i++)Q(answerPs[i]).then(resolve,reject)})}function Promise(descriptor,fallback,inspect){void 0===fallback&&(fallback=function(op){return reject(Error("Promise does not support operation: "+op))}),void 0===inspect&&(inspect=function(){return{state:"unknown"}});var promise=object_create(Promise.prototype);if(promise.promiseDispatch=function(resolve,op,args){var result;try{result=descriptor[op]?descriptor[op].apply(promise,args):fallback.call(promise,op,args)}catch(exception){result=reject(exception)}resolve&&resolve(result)},promise.inspect=inspect,inspect){var inspected=inspect();"rejected"===inspected.state&&(promise.exception=inspected.reason),promise.valueOf=function(){var inspected=inspect();return"pending"===inspected.state||"rejected"===inspected.state?promise:inspected.value}}return promise}function when(value,fulfilled,rejected,progressed){return Q(value).then(fulfilled,rejected,progressed)}function nearer(value){if(isPromise(value)){var inspected=value.inspect();if("fulfilled"===inspected.state)return inspected.value}return value}function isPromise(object){return isObject(object)&&"function"==typeof object.promiseDispatch&&"function"==typeof object.inspect}function isPromiseAlike(object){return isObject(object)&&"function"==typeof object.then}function isPending(object){return isPromise(object)&&"pending"===object.inspect().state}function isFulfilled(object){return!isPromise(object)||"fulfilled"===object.inspect().state}function isRejected(object){return isPromise(object)&&"rejected"===object.inspect().state}function resetUnhandledRejections(){unhandledReasons.length=0,unhandledRejections.length=0,trackUnhandledRejections||(trackUnhandledRejections=!0)}function trackRejection(promise,reason){trackUnhandledRejections&&(unhandledRejections.push(promise),reason&&reason.stack!==void 0?unhandledReasons.push(reason.stack):unhandledReasons.push("(no stack) "+reason))}function untrackRejection(promise){if(trackUnhandledRejections){var at=array_indexOf(unhandledRejections,promise);-1!==at&&(unhandledRejections.splice(at,1),unhandledReasons.splice(at,1))}}function reject(reason){var rejection=Promise({when:function(rejected){return rejected&&untrackRejection(this),rejected?rejected(reason):this}},function fallback(){return this},function inspect(){return{state:"rejected",reason:reason}});return trackRejection(rejection,reason),rejection}function fulfill(value){return Promise({when:function(){return value},get:function(name){return value[name]},set:function(name,rhs){value[name]=rhs},"delete":function(name){delete value[name]},post:function(name,args){return null===name||void 0===name?value.apply(void 0,args):value[name].apply(value,args)},apply:function(thisp,args){return value.apply(thisp,args)},keys:function(){return object_keys(value)}},void 0,function inspect(){return{state:"fulfilled",value:value}})}function coerce(promise){var deferred=defer();return nextTick(function(){try{promise.then(deferred.resolve,deferred.reject,deferred.notify)}catch(exception){deferred.reject(exception)}}),deferred.promise}function master(object){return Promise({isDef:function(){}},function fallback(op,args){return dispatch(object,op,args)},function(){return Q(object).inspect()})}function spread(value,fulfilled,rejected){return Q(value).spread(fulfilled,rejected)}function async(makeGenerator){return function(){function continuer(verb,arg){var result;if("undefined"==typeof StopIteration){try{result=generator[verb](arg)}catch(exception){return reject(exception)}return result.done?result.value:when(result.value,callback,errback)}try{result=generator[verb](arg)}catch(exception){return isStopIteration(exception)?exception.value:reject(exception)}return when(result,callback,errback)}var generator=makeGenerator.apply(this,arguments),callback=continuer.bind(continuer,"next"),errback=continuer.bind(continuer,"throw");return callback()}}function spawn(makeGenerator){Q.done(Q.async(makeGenerator)())}function _return(value){throw new QReturnValue(value)}function promised(callback){return function(){return spread([this,all(arguments)],function(self,args){return callback.apply(self,args)})}}function dispatch(object,op,args){return Q(object).dispatch(op,args)}function all(promises){return when(promises,function(promises){var countDown=0,deferred=defer();return array_reduce(promises,function(undefined,promise,index){var snapshot;isPromise(promise)&&"fulfilled"===(snapshot=promise.inspect()).state?promises[index]=snapshot.value:(++countDown,when(promise,function(value){promises[index]=value,0===--countDown&&deferred.resolve(promises)},deferred.reject,function(progress){deferred.notify({index:index,value:progress})}))},void 0),0===countDown&&deferred.resolve(promises),deferred.promise})}function allResolved(promises){return when(promises,function(promises){return promises=array_map(promises,Q),when(all(array_map(promises,function(promise){return when(promise,noop,noop)})),function(){return promises})})}function allSettled(promises){return Q(promises).allSettled()}function progress(object,progressed){return Q(object).then(void 0,void 0,progressed)}function nodeify(object,nodeback){return Q(object).nodeify(nodeback)}var hasStacks=!1;try{throw Error()}catch(e){hasStacks=!!e.stack}var qStartingLine=captureLine(),qFileName,noop=function(){},nextTick=function(){function flush(){for(;head.next;){head=head.next;var task=head.task;head.task=void 0;var domain=head.domain;domain&&(head.domain=void 0,domain.enter());try{task()}catch(e){if(isNodeJS)throw domain&&domain.exit(),setTimeout(flush,0),domain&&domain.enter(),e;setTimeout(function(){throw e},0)}domain&&domain.exit()}flushing=!1}var head={task:void 0,next:null},tail=head,flushing=!1,requestTick=void 0,isNodeJS=!1;if(nextTick=function(task){tail=tail.next={task:task,domain:isNodeJS&&process.domain,next:null},flushing||(flushing=!0,requestTick())},"undefined"!=typeof process&&process.nextTick)isNodeJS=!0,requestTick=function(){process.nextTick(flush)};else if("function"==typeof setImmediate)requestTick="undefined"!=typeof window?setImmediate.bind(window,flush):function(){setImmediate(flush)};else if("undefined"!=typeof MessageChannel){var channel=new MessageChannel;channel.port1.onmessage=function(){requestTick=requestPortTick,channel.port1.onmessage=flush,flush()};var requestPortTick=function(){channel.port2.postMessage(0)};requestTick=function(){setTimeout(flush,0),requestPortTick()}}else requestTick=function(){setTimeout(flush,0)};return nextTick}(),call=Function.call,array_slice=uncurryThis(Array.prototype.slice),array_reduce=uncurryThis(Array.prototype.reduce||function(callback,basis){var index=0,length=this.length;if(1===arguments.length)for(;;){if(index in this){basis=this[index++];break}if(++index>=length)throw new TypeError}for(;length>index;index++)index in this&&(basis=callback(basis,this[index],index));return basis}),array_indexOf=uncurryThis(Array.prototype.indexOf||function(value){for(var i=0;this.length>i;i++)if(this[i]===value)return i;return-1}),array_map=uncurryThis(Array.prototype.map||function(callback,thisp){var self=this,collect=[];return array_reduce(self,function(undefined,value,index){collect.push(callback.call(thisp,value,index,self))},void 0),collect}),object_create=Object.create||function(prototype){function Type(){}return Type.prototype=prototype,new Type},object_hasOwnProperty=uncurryThis(Object.prototype.hasOwnProperty),object_keys=Object.keys||function(object){var keys=[];for(var key in object)object_hasOwnProperty(object,key)&&keys.push(key);return keys},object_toString=uncurryThis(Object.prototype.toString),QReturnValue;QReturnValue="undefined"!=typeof ReturnValue?ReturnValue:function(value){this.value=value};var STACK_JUMP_SEPARATOR="From previous event:";Q.resolve=Q,Q.nextTick=nextTick,Q.longStackSupport=!1,Q.defer=defer,defer.prototype.makeNodeResolver=function(){var self=this;return function(error,value){error?self.reject(error):arguments.length>2?self.resolve(array_slice(arguments,1)):self.resolve(value)}},Q.Promise=promise,Q.promise=promise,promise.race=race,promise.all=all,promise.reject=reject,promise.resolve=Q,Q.passByCopy=function(object){return object},Promise.prototype.passByCopy=function(){return this},Q.join=function(x,y){return Q(x).join(y)},Promise.prototype.join=function(that){return Q([this,that]).spread(function(x,y){if(x===y)return x;throw Error("Can't join: not the same: "+x+" "+y)})},Q.race=race,Promise.prototype.race=function(){return this.then(Q.race)},Q.makePromise=Promise,Promise.prototype.toString=function(){return"[object Promise]"},Promise.prototype.then=function(fulfilled,rejected,progressed){function _fulfilled(value){try{return"function"==typeof fulfilled?fulfilled(value):value}catch(exception){return reject(exception)}}function _rejected(exception){if("function"==typeof rejected){makeStackTraceLong(exception,self);try{return rejected(exception)}catch(newException){return reject(newException)}}return reject(exception)}function _progressed(value){return"function"==typeof progressed?progressed(value):value}var self=this,deferred=defer(),done=!1;return nextTick(function(){self.promiseDispatch(function(value){done||(done=!0,deferred.resolve(_fulfilled(value)))},"when",[function(exception){done||(done=!0,deferred.resolve(_rejected(exception)))}])}),self.promiseDispatch(void 0,"when",[void 0,function(value){var newValue,threw=!1;try{newValue=_progressed(value)}catch(e){if(threw=!0,!Q.onerror)throw e;Q.onerror(e)}threw||deferred.notify(newValue)}]),deferred.promise},Q.when=when,Promise.prototype.thenResolve=function(value){return this.then(function(){return value})},Q.thenResolve=function(promise,value){return Q(promise).thenResolve(value)},Promise.prototype.thenReject=function(reason){return this.then(function(){throw reason})},Q.thenReject=function(promise,reason){return Q(promise).thenReject(reason)},Q.nearer=nearer,Q.isPromise=isPromise,Q.isPromiseAlike=isPromiseAlike,Q.isPending=isPending,Promise.prototype.isPending=function(){return"pending"===this.inspect().state},Q.isFulfilled=isFulfilled,Promise.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},Q.isRejected=isRejected,Promise.prototype.isRejected=function(){return"rejected"===this.inspect().state};var unhandledReasons=[],unhandledRejections=[],trackUnhandledRejections=!0;Q.resetUnhandledRejections=resetUnhandledRejections,Q.getUnhandledReasons=function(){return unhandledReasons.slice()},Q.stopUnhandledRejectionTracking=function(){resetUnhandledRejections(),trackUnhandledRejections=!1},resetUnhandledRejections(),Q.reject=reject,Q.fulfill=fulfill,Q.master=master,Q.spread=spread,Promise.prototype.spread=function(fulfilled,rejected){return this.all().then(function(array){return fulfilled.apply(void 0,array)},rejected)},Q.async=async,Q.spawn=spawn,Q["return"]=_return,Q.promised=promised,Q.dispatch=dispatch,Promise.prototype.dispatch=function(op,args){var self=this,deferred=defer();return nextTick(function(){self.promiseDispatch(deferred.resolve,op,args)}),deferred.promise},Q.get=function(object,key){return Q(object).dispatch("get",[key])},Promise.prototype.get=function(key){return this.dispatch("get",[key])},Q.set=function(object,key,value){return Q(object).dispatch("set",[key,value])},Promise.prototype.set=function(key,value){return this.dispatch("set",[key,value])},Q.del=Q["delete"]=function(object,key){return Q(object).dispatch("delete",[key])},Promise.prototype.del=Promise.prototype["delete"]=function(key){return this.dispatch("delete",[key])},Q.mapply=Q.post=function(object,name,args){return Q(object).dispatch("post",[name,args])},Promise.prototype.mapply=Promise.prototype.post=function(name,args){return this.dispatch("post",[name,args])},Q.send=Q.mcall=Q.invoke=function(object,name){return Q(object).dispatch("post",[name,array_slice(arguments,2)])},Promise.prototype.send=Promise.prototype.mcall=Promise.prototype.invoke=function(name){return this.dispatch("post",[name,array_slice(arguments,1)])},Q.fapply=function(object,args){return Q(object).dispatch("apply",[void 0,args])},Promise.prototype.fapply=function(args){return this.dispatch("apply",[void 0,args])},Q["try"]=Q.fcall=function(object){return Q(object).dispatch("apply",[void 0,array_slice(arguments,1)])},Promise.prototype.fcall=function(){return this.dispatch("apply",[void 0,array_slice(arguments)])},Q.fbind=function(object){var promise=Q(object),args=array_slice(arguments,1);return function fbound(){return promise.dispatch("apply",[this,args.concat(array_slice(arguments))])}},Promise.prototype.fbind=function(){var promise=this,args=array_slice(arguments);return function fbound(){return promise.dispatch("apply",[this,args.concat(array_slice(arguments))])}},Q.keys=function(object){return Q(object).dispatch("keys",[])},Promise.prototype.keys=function(){return this.dispatch("keys",[])},Q.all=all,Promise.prototype.all=function(){return all(this)},Q.allResolved=deprecate(allResolved,"allResolved","allSettled"),Promise.prototype.allResolved=function(){return allResolved(this)},Q.allSettled=allSettled,Promise.prototype.allSettled=function(){return this.then(function(promises){return all(array_map(promises,function(promise){function regardless(){return promise.inspect()}return promise=Q(promise),promise.then(regardless,regardless)}))})},Q.fail=Q["catch"]=function(object,rejected){return Q(object).then(void 0,rejected)},Promise.prototype.fail=Promise.prototype["catch"]=function(rejected){return this.then(void 0,rejected)},Q.progress=progress,Promise.prototype.progress=function(progressed){return this.then(void 0,void 0,progressed)},Q.fin=Q["finally"]=function(object,callback){return Q(object)["finally"](callback)},Promise.prototype.fin=Promise.prototype["finally"]=function(callback){return callback=Q(callback),this.then(function(value){return callback.fcall().then(function(){return value})},function(reason){return callback.fcall().then(function(){throw reason})})},Q.done=function(object,fulfilled,rejected,progress){return Q(object).done(fulfilled,rejected,progress)},Promise.prototype.done=function(fulfilled,rejected,progress){var onUnhandledError=function(error){nextTick(function(){if(makeStackTraceLong(error,promise),!Q.onerror)throw error;Q.onerror(error)})},promise=fulfilled||rejected||progress?this.then(fulfilled,rejected,progress):this;"object"==typeof process&&process&&process.domain&&(onUnhandledError=process.domain.bind(onUnhandledError)),promise.then(void 0,onUnhandledError)},Q.timeout=function(object,ms,message){return Q(object).timeout(ms,message)},Promise.prototype.timeout=function(ms,message){var deferred=defer(),timeoutId=setTimeout(function(){deferred.reject(Error(message||"Timed out after "+ms+" ms"))},ms);return this.then(function(value){clearTimeout(timeoutId),deferred.resolve(value)},function(exception){clearTimeout(timeoutId),deferred.reject(exception)},deferred.notify),deferred.promise},Q.delay=function(object,timeout){return void 0===timeout&&(timeout=object,object=void 0),Q(object).delay(timeout)},Promise.prototype.delay=function(timeout){return this.then(function(value){var deferred=defer();return setTimeout(function(){deferred.resolve(value)},timeout),deferred.promise})},Q.nfapply=function(callback,args){return Q(callback).nfapply(args)},Promise.prototype.nfapply=function(args){var deferred=defer(),nodeArgs=array_slice(args);return nodeArgs.push(deferred.makeNodeResolver()),this.fapply(nodeArgs).fail(deferred.reject),deferred.promise},Q.nfcall=function(callback){var args=array_slice(arguments,1);return Q(callback).nfapply(args)},Promise.prototype.nfcall=function(){var nodeArgs=array_slice(arguments),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),this.fapply(nodeArgs).fail(deferred.reject),deferred.promise},Q.nfbind=Q.denodeify=function(callback){var baseArgs=array_slice(arguments,1);return function(){var nodeArgs=baseArgs.concat(array_slice(arguments)),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),Q(callback).fapply(nodeArgs).fail(deferred.reject),deferred.promise}},Promise.prototype.nfbind=Promise.prototype.denodeify=function(){var args=array_slice(arguments);return args.unshift(this),Q.denodeify.apply(void 0,args)},Q.nbind=function(callback,thisp){var baseArgs=array_slice(arguments,2);return function(){function bound(){return callback.apply(thisp,arguments)}var nodeArgs=baseArgs.concat(array_slice(arguments)),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),Q(bound).fapply(nodeArgs).fail(deferred.reject),deferred.promise}},Promise.prototype.nbind=function(){var args=array_slice(arguments,0);return args.unshift(this),Q.nbind.apply(void 0,args)},Q.nmapply=Q.npost=function(object,name,args){return Q(object).npost(name,args)},Promise.prototype.nmapply=Promise.prototype.npost=function(name,args){var nodeArgs=array_slice(args||[]),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),this.dispatch("post",[name,nodeArgs]).fail(deferred.reject),deferred.promise},Q.nsend=Q.nmcall=Q.ninvoke=function(object,name){var nodeArgs=array_slice(arguments,2),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),Q(object).dispatch("post",[name,nodeArgs]).fail(deferred.reject),deferred.promise},Promise.prototype.nsend=Promise.prototype.nmcall=Promise.prototype.ninvoke=function(name){var nodeArgs=array_slice(arguments,1),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),this.dispatch("post",[name,nodeArgs]).fail(deferred.reject),deferred.promise},Q.nodeify=nodeify,Promise.prototype.nodeify=function(nodeback){return nodeback?(this.then(function(value){nextTick(function(){nodeback(null,value)})},function(error){nextTick(function(){nodeback(error)})}),void 0):this};var qEndingLine=captureLine();return Q});
                (function(){function baseCompareAscending(value,other){if(value!==other){var valIsReflexive=value===value,othIsReflexive=other===other;if(value>other||!valIsReflexive||value===undefined&&othIsReflexive)return 1;if(other>value||!othIsReflexive||other===undefined&&valIsReflexive)return-1}return 0}function baseFindIndex(array,predicate,fromRight){for(var length=array.length,index=fromRight?length:-1;fromRight?index--:length>++index;)if(predicate(array[index],index,array))return index;return-1}function baseIndexOf(array,value,fromIndex){if(value!==value)return indexOfNaN(array,fromIndex);for(var index=fromIndex-1,length=array.length;length>++index;)if(array[index]===value)return index;return-1}function baseIsFunction(value){return"function"==typeof value||!1}function baseToString(value){return"string"==typeof value?value:null==value?"":value+""}function charAtCallback(string){return string.charCodeAt(0)}function charsLeftIndex(string,chars){for(var index=-1,length=string.length;length>++index&&chars.indexOf(string.charAt(index))>-1;);return index}function charsRightIndex(string,chars){for(var index=string.length;index--&&chars.indexOf(string.charAt(index))>-1;);return index}function compareAscending(object,other){return baseCompareAscending(object.criteria,other.criteria)||object.index-other.index}function compareMultiple(object,other,orders){for(var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;length>++index;){var result=baseCompareAscending(objCriteria[index],othCriteria[index]);if(result)return index>=ordersLength?result:result*(orders[index]?1:-1)}return object.index-other.index}function deburrLetter(letter){return deburredLetters[letter]}function escapeHtmlChar(chr){return htmlEscapes[chr]}function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function indexOfNaN(array,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?0:-1);fromRight?index--:length>++index;){var other=array[index];if(other!==other)return index}return-1}function isObjectLike(value){return!!value&&"object"==typeof value}function isSpace(charCode){return 160>=charCode&&charCode>=9&&13>=charCode||32==charCode||160==charCode||5760==charCode||6158==charCode||charCode>=8192&&(8202>=charCode||8232==charCode||8233==charCode||8239==charCode||8287==charCode||12288==charCode||65279==charCode)}function replaceHolders(array,placeholder){for(var index=-1,length=array.length,resIndex=-1,result=[];length>++index;)array[index]===placeholder&&(array[index]=PLACEHOLDER,result[++resIndex]=index);return result}function sortedUniq(array,iteratee){for(var seen,index=-1,length=array.length,resIndex=-1,result=[];length>++index;){var value=array[index],computed=iteratee?iteratee(value,index,array):value;index&&seen===computed||(seen=computed,result[++resIndex]=value)}return result}function trimmedLeftIndex(string){for(var index=-1,length=string.length;length>++index&&isSpace(string.charCodeAt(index)););return index}function trimmedRightIndex(string){for(var index=string.length;index--&&isSpace(string.charCodeAt(index)););return index}function unescapeHtmlChar(chr){return htmlUnescapes[chr]}function runInContext(context){function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper)return value;if(hasOwnProperty.call(value,"__chain__")&&hasOwnProperty.call(value,"__wrapped__"))return wrapperClone(value)}return new LodashWrapper(value)}function baseLodash(){}function LodashWrapper(value,chainAll,actions){this.__wrapped__=value,this.__actions__=actions||[],this.__chain__=!!chainAll}function LazyWrapper(value){this.__wrapped__=value,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=POSITIVE_INFINITY,this.__views__=null}function lazyClone(){var actions=this.__actions__,iteratees=this.__iteratees__,views=this.__views__,result=new LazyWrapper(this.__wrapped__);return result.__actions__=actions?arrayCopy(actions):null,result.__dir__=this.__dir__,result.__filtered__=this.__filtered__,result.__iteratees__=iteratees?arrayCopy(iteratees):null,result.__takeCount__=this.__takeCount__,result.__views__=views?arrayCopy(views):null,result}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1,result.__filtered__=!0}else result=this.clone(),result.__dir__*=-1;return result}function lazyValue(){var array=this.__wrapped__.value();if(!isArray(array))return baseWrapperValue(array,this.__actions__);var dir=this.__dir__,isRight=0>dir,view=getView(0,array.length,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,takeCount=nativeMin(length,this.__takeCount__),iteratees=this.__iteratees__,iterLength=iteratees?iteratees.length:0,resIndex=0,result=[];outer:for(;length--&&takeCount>resIndex;){index+=dir;for(var iterIndex=-1,value=array[index];iterLength>++iterIndex;){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type;if(type==LAZY_DROP_WHILE_FLAG){if(data.done&&(isRight?index>data.index:data.index>index)&&(data.count=0,data.done=!1),data.index=index,!data.done){var limit=data.limit;if(!(data.done=limit>-1?data.count++>=limit:!iteratee(value)))continue outer}}else{var computed=iteratee(value);if(type==LAZY_MAP_FLAG)value=computed;else if(!computed){if(type==LAZY_FILTER_FLAG)continue outer;break outer}}}result[resIndex++]=value}return result}function MapCache(){this.__data__={}}function mapDelete(key){return this.has(key)&&delete this.__data__[key]}function mapGet(key){return"__proto__"==key?undefined:this.__data__[key]}function mapHas(key){return"__proto__"!=key&&hasOwnProperty.call(this.__data__,key)}function mapSet(key,value){return"__proto__"!=key&&(this.__data__[key]=value),this}function SetCache(values){var length=values?values.length:0;for(this.data={hash:nativeCreate(null),set:new Set};length--;)this.push(values[length])}function cacheIndexOf(cache,value){var data=cache.data,result="string"==typeof value||isObject(value)?data.set.has(value):data.hash[value];return result?0:-1}function cachePush(value){var data=this.data;"string"==typeof value||isObject(value)?data.set.add(value):data.hash[value]=!0}function arrayCopy(source,array){var index=-1,length=source.length;for(array||(array=Array(length));length>++index;)array[index]=source[index];return array}function arrayEach(array,iteratee){for(var index=-1,length=array.length;length>++index&&iteratee(array[index],index,array)!==!1;);return array}function arrayEachRight(array,iteratee){for(var length=array.length;length--&&iteratee(array[length],length,array)!==!1;);return array}function arrayEvery(array,predicate){for(var index=-1,length=array.length;length>++index;)if(!predicate(array[index],index,array))return!1;return!0}function arrayFilter(array,predicate){for(var index=-1,length=array.length,resIndex=-1,result=[];length>++index;){var value=array[index];predicate(value,index,array)&&(result[++resIndex]=value)}return result}function arrayMap(array,iteratee){for(var index=-1,length=array.length,result=Array(length);length>++index;)result[index]=iteratee(array[index],index,array);return result}function arrayMax(array){for(var index=-1,length=array.length,result=NEGATIVE_INFINITY;length>++index;){var value=array[index];value>result&&(result=value)}return result}function arrayMin(array){for(var index=-1,length=array.length,result=POSITIVE_INFINITY;length>++index;){var value=array[index];result>value&&(result=value)}return result}function arrayReduce(array,iteratee,accumulator,initFromArray){var index=-1,length=array.length;for(initFromArray&&length&&(accumulator=array[++index]);length>++index;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function arrayReduceRight(array,iteratee,accumulator,initFromArray){var length=array.length;for(initFromArray&&length&&(accumulator=array[--length]);length--;)accumulator=iteratee(accumulator,array[length],length,array);return accumulator}function arraySome(array,predicate){for(var index=-1,length=array.length;length>++index;)if(predicate(array[index],index,array))return!0;return!1}function arraySum(array){for(var length=array.length,result=0;length--;)result+=+array[length]||0;return result}function assignDefaults(objectValue,sourceValue){return objectValue===undefined?sourceValue:objectValue}function assignOwnDefaults(objectValue,sourceValue,key,object){return objectValue!==undefined&&hasOwnProperty.call(object,key)?objectValue:sourceValue}function baseAssign(object,source,customizer){var props=keys(source);if(!customizer)return baseCopy(source,object,props);for(var index=-1,length=props.length;length>++index;){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);(result===result?result===value:value!==value)&&(value!==undefined||key in object)||(object[key]=result)}return object}function baseAt(collection,props){for(var index=-1,length=collection.length,isArr=isLength(length),propsLength=props.length,result=Array(propsLength);propsLength>++index;){var key=props[index];isArr?(key=parseFloat(key),result[index]=isIndex(key,length)?collection[key]:undefined):result[index]=collection[key]}return result}function baseCopy(source,object,props){props||(props=object,object={});for(var index=-1,length=props.length;length>++index;){var key=props[index];object[key]=source[key]}return object}function baseCallback(func,thisArg,argCount){var type=typeof func;return"function"==type?thisArg===undefined?func:bindCallback(func,thisArg,argCount):null==func?identity:"object"==type?baseMatches(func):thisArg===undefined?baseProperty(func+""):baseMatchesProperty(func+"",thisArg)}function baseClone(value,isDeep,customizer,key,object,stackA,stackB){var result;if(customizer&&(result=object?customizer(value,key,object):customizer(value)),result!==undefined)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=initCloneArray(value),!isDeep)return arrayCopy(value,result)}else{var tag=objToString.call(value),isFunc=tag==funcTag;if(tag!=objectTag&&tag!=argsTag&&(!isFunc||object))return cloneableTags[tag]?initCloneByTag(value,tag,isDeep):object?value:{};if(result=initCloneObject(isFunc?{}:value),!isDeep)return baseCopy(value,result,keys(value))}stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]==value)return stackB[length];return stackA.push(value),stackB.push(result),(isArr?arrayEach:baseForOwn)(value,function(subValue,key){result[key]=baseClone(subValue,isDeep,customizer,key,value,stackA,stackB)}),result}function baseDelay(func,wait,args){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values){var length=array?array.length:0,result=[];if(!length)return result;var index=-1,indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,cache=isCommon&&values.length>=200?createCache(values):null,valuesLength=values.length;cache&&(indexOf=cacheIndexOf,isCommon=!1,values=cache);outer:for(;length>++index;){var value=array[index];if(isCommon&&value===value){for(var valuesIndex=valuesLength;valuesIndex--;)if(values[valuesIndex]===value)continue outer;result.push(value)}else 0>indexOf(values,value,0)&&result.push(value)}return result}function baseEvery(collection,predicate){var result=!0;return baseEach(collection,function(value,index,collection){return result=!!predicate(value,index,collection)}),result}function baseFill(array,value,start,end){var length=array.length;for(start=null==start?0:+start||0,0>start&&(start=-start>length?0:length+start),end=end===undefined||end>length?length:+end||0,0>end&&(end+=length),length=start>end?0:end>>>0,start>>>=0;length>start;)array[start++]=value;return array}function baseFilter(collection,predicate){var result=[];return baseEach(collection,function(value,index,collection){predicate(value,index,collection)&&result.push(value)}),result}function baseFind(collection,predicate,eachFunc,retKey){var result;return eachFunc(collection,function(value,key,collection){return predicate(value,key,collection)?(result=retKey?key:value,!1):undefined}),result}function baseFlatten(array,isDeep,isStrict){for(var index=-1,length=array.length,resIndex=-1,result=[];length>++index;){var value=array[index];if(isObjectLike(value)&&isLength(value.length)&&(isArray(value)||isArguments(value))){isDeep&&(value=baseFlatten(value,isDeep,isStrict));var valIndex=-1,valLength=value.length;for(result.length+=valLength;valLength>++valIndex;)result[++resIndex]=value[valIndex]}else isStrict||(result[++resIndex]=value)}return result}function baseForIn(object,iteratee){return baseFor(object,iteratee,keysIn)}function baseForOwn(object,iteratee){return baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return baseForRight(object,iteratee,keys)}function baseFunctions(object,props){for(var index=-1,length=props.length,resIndex=-1,result=[];length>++index;){var key=props[index];isFunction(object[key])&&(result[++resIndex]=key)}return result}function baseIsEqual(value,other,customizer,isLoose,stackA,stackB){if(value===other)return 0!==value||1/value==1/other;var valType=typeof value,othType=typeof other;return"function"!=valType&&"object"!=valType&&"function"!=othType&&"object"!=othType||null==value||null==other?value!==value&&other!==other:baseIsEqualDeep(value,other,baseIsEqual,customizer,isLoose,stackA,stackB)}function baseIsEqualDeep(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;objIsArr||(objTag=objToString.call(object),objTag==argsTag?objTag=objectTag:objTag!=objectTag&&(objIsArr=isTypedArray(object))),othIsArr||(othTag=objToString.call(other),othTag==argsTag?othTag=objectTag:othTag!=objectTag&&(othIsArr=isTypedArray(other)));var objIsObj=objTag==objectTag||isLoose&&objTag==funcTag,othIsObj=othTag==objectTag||isLoose&&othTag==funcTag,isSameTag=objTag==othTag;if(isSameTag&&!objIsArr&&!objIsObj)return equalByTag(object,other,objTag);if(isLoose){if(!(isSameTag||objIsObj&&othIsObj))return!1}else{var valWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(valWrapped||othWrapped)return equalFunc(valWrapped?object.value():object,othWrapped?other.value():other,customizer,isLoose,stackA,stackB);if(!isSameTag)return!1}stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]==object)return stackB[length]==other;stackA.push(object),stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,isLoose,stackA,stackB);return stackA.pop(),stackB.pop(),result}function baseIsMatch(object,props,values,strictCompareFlags,customizer){for(var index=-1,length=props.length,noCustomizer=!customizer;length>++index;)if(noCustomizer&&strictCompareFlags[index]?values[index]!==object[props[index]]:!(props[index]in object))return!1;for(index=-1;length>++index;){var key=props[index],objValue=object[key],srcValue=values[index];if(noCustomizer&&strictCompareFlags[index])var result=objValue!==undefined||key in object;else result=customizer?customizer(objValue,srcValue,key):undefined,result===undefined&&(result=baseIsEqual(srcValue,objValue,customizer,!0));if(!result)return!1}return!0}function baseMap(collection,iteratee){var result=[];return baseEach(collection,function(value,key,collection){result.push(iteratee(value,key,collection))}),result}function baseMatches(source){var props=keys(source),length=props.length;if(!length)return constant(!0);if(1==length){var key=props[0],value=source[key];if(isStrictComparable(value))return function(object){return null!=object&&object[key]===value&&(value!==undefined||key in toObject(object))}}for(var values=Array(length),strictCompareFlags=Array(length);length--;)value=source[props[length]],values[length]=value,strictCompareFlags[length]=isStrictComparable(value);return function(object){return null!=object&&baseIsMatch(toObject(object),props,values,strictCompareFlags)}}function baseMatchesProperty(key,value){return isStrictComparable(value)?function(object){return null!=object&&object[key]===value&&(value!==undefined||key in toObject(object))}:function(object){return null!=object&&baseIsEqual(value,object[key],null,!0)}}function baseMerge(object,source,customizer,stackA,stackB){if(!isObject(object))return object;var isSrcArr=isLength(source.length)&&(isArray(source)||isTypedArray(source));return(isSrcArr?arrayEach:baseForOwn)(source,function(srcValue,key,source){if(isObjectLike(srcValue))return stackA||(stackA=[]),stackB||(stackB=[]),baseMergeDeep(object,source,key,baseMerge,customizer,stackA,stackB);var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;isCommon&&(result=srcValue),!isSrcArr&&result===undefined||!isCommon&&(result===result?result===value:value!==value)||(object[key]=result)}),object}function baseMergeDeep(object,source,key,mergeFunc,customizer,stackA,stackB){for(var length=stackA.length,srcValue=source[key];length--;)if(stackA[length]==srcValue)return object[key]=stackB[length],undefined;var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;isCommon&&(result=srcValue,isLength(srcValue.length)&&(isArray(srcValue)||isTypedArray(srcValue))?result=isArray(value)?value:value&&value.length?arrayCopy(value):[]:isPlainObject(srcValue)||isArguments(srcValue)?result=isArguments(value)?toPlainObject(value):isPlainObject(value)?value:{}:isCommon=!1),stackA.push(srcValue),stackB.push(result),isCommon?object[key]=mergeFunc(result,srcValue,customizer,stackA,stackB):(result===result?result!==value:value===value)&&(object[key]=result)}function baseProperty(key){return function(object){return null==object?undefined:object[key]}}function baseRandom(min,max){return min+floor(nativeRandom()*(max-min+1))}function baseReduce(collection,iteratee,accumulator,initFromCollection,eachFunc){return eachFunc(collection,function(value,index,collection){accumulator=initFromCollection?(initFromCollection=!1,value):iteratee(accumulator,value,index,collection)}),accumulator}function baseSlice(array,start,end){var index=-1,length=array.length;start=null==start?0:+start||0,0>start&&(start=-start>length?0:length+start),end=end===undefined||end>length?length:+end||0,0>end&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);length>++index;)result[index]=array[index+start];return result}function baseSome(collection,predicate){var result;return baseEach(collection,function(value,index,collection){return result=predicate(value,index,collection),!result}),!!result}function baseSortBy(array,comparer){var length=array.length;for(array.sort(comparer);length--;)array[length]=array[length].value;return array}function baseSortByOrder(collection,props,orders){var index=-1,length=collection.length,result=isLength(length)?Array(length):[];return baseEach(collection,function(value){for(var length=props.length,criteria=Array(length);length--;)criteria[length]=null==value?undefined:value[props[length]];result[++index]={criteria:criteria,index:index,value:value}}),baseSortBy(result,function(object,other){return compareMultiple(object,other,orders)})}function baseSum(collection,iteratee){var result=0;return baseEach(collection,function(value,index,collection){result+=+iteratee(value,index,collection)||0}),result}function baseUniq(array,iteratee){var index=-1,indexOf=getIndexOf(),length=array.length,isCommon=indexOf==baseIndexOf,isLarge=isCommon&&length>=200,seen=isLarge?createCache():null,result=[];seen?(indexOf=cacheIndexOf,isCommon=!1):(isLarge=!1,seen=iteratee?[]:result);outer:for(;length>++index;){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(isCommon&&value===value){for(var seenIndex=seen.length;seenIndex--;)if(seen[seenIndex]===computed)continue outer;iteratee&&seen.push(computed),result.push(value)}else 0>indexOf(seen,computed,0)&&((iteratee||isLarge)&&seen.push(computed),result.push(value))}return result}function baseValues(object,props){for(var index=-1,length=props.length,result=Array(length);length>++index;)result[index]=object[props[index]];return result}function baseWhile(array,predicate,isDrop,fromRight){for(var length=array.length,index=fromRight?length:-1;(fromRight?index--:length>++index)&&predicate(array[index],index,array););return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;result instanceof LazyWrapper&&(result=result.value());for(var index=-1,length=actions.length;length>++index;){var args=[result],action=actions[index];push.apply(args,action.args),result=action.func.apply(action.thisArg,args)}return result}function binaryIndex(array,value,retHighest){var low=0,high=array?array.length:low;if("number"==typeof value&&value===value&&HALF_MAX_ARRAY_LENGTH>=high){for(;high>low;){var mid=low+high>>>1,computed=array[mid];(retHighest?value>=computed:value>computed)?low=mid+1:high=mid}return high}return binaryIndexBy(array,value,identity,retHighest)}function binaryIndexBy(array,value,iteratee,retHighest){value=iteratee(value);for(var low=0,high=array?array.length:0,valIsNaN=value!==value,valIsUndef=value===undefined;high>low;){var mid=floor((low+high)/2),computed=iteratee(array[mid]),isReflexive=computed===computed;if(valIsNaN)var setLow=isReflexive||retHighest;else setLow=valIsUndef?isReflexive&&(retHighest||computed!==undefined):retHighest?value>=computed:value>computed;setLow?low=mid+1:high=mid}return nativeMin(high,MAX_ARRAY_INDEX)}function bindCallback(func,thisArg,argCount){if("function"!=typeof func)return identity;if(thisArg===undefined)return func;switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}function bufferClone(buffer){return bufferSlice.call(buffer,0)}function composeArgs(args,partials,holders){for(var holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),leftIndex=-1,leftLength=partials.length,result=Array(argsLength+leftLength);leftLength>++leftIndex;)result[leftIndex]=partials[leftIndex];for(;holdersLength>++argsIndex;)result[holders[argsIndex]]=args[argsIndex];for(;argsLength--;)result[leftIndex++]=args[argsIndex++];return result}function composeArgsRight(args,partials,holders){for(var holdersIndex=-1,holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),rightIndex=-1,rightLength=partials.length,result=Array(argsLength+rightLength);argsLength>++argsIndex;)result[argsIndex]=args[argsIndex];for(var pad=argsIndex;rightLength>++rightIndex;)result[pad+rightIndex]=partials[rightIndex];for(;holdersLength>++holdersIndex;)result[pad+holders[holdersIndex]]=args[argsIndex++];return result}function createAggregator(setter,initializer){return function(collection,iteratee,thisArg){var result=initializer?initializer():{};if(iteratee=getCallback(iteratee,thisArg,3),isArray(collection))for(var index=-1,length=collection.length;length>++index;){var value=collection[index];setter(result,value,iteratee(value,index,collection),collection)}else baseEach(collection,function(value,key,collection){setter(result,value,iteratee(value,key,collection),collection)});return result}}function createAssigner(assigner){return function(){var args=arguments,length=args.length,object=args[0];if(2>length||null==object)return object;var customizer=args[length-2],thisArg=args[length-1],guard=args[3];length>3&&"function"==typeof customizer?(customizer=bindCallback(customizer,thisArg,5),length-=2):(customizer=length>2&&"function"==typeof thisArg?thisArg:null,length-=customizer?1:0),guard&&isIterateeCall(args[1],args[2],guard)&&(customizer=3==length?null:customizer,length=2);for(var index=0;length>++index;){var source=args[index];source&&assigner(object,source,customizer)}return object}}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){var length=collection?collection.length:0;if(!isLength(length))return eachFunc(collection,iteratee);for(var index=fromRight?length:-1,iterable=toObject(collection);(fromRight?index--:length>++index)&&iteratee(iterable[index],index,iterable)!==!1;);return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;fromRight?index--:length>++index;){var key=props[index];if(iteratee(iterable[key],key,iterable)===!1)break}return object}}function createBindWrapper(func,thisArg){function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(thisArg,arguments)}var Ctor=createCtorWrapper(func);return wrapper}function createCompounder(callback){return function(string){for(var index=-1,array=words(deburr(string)),length=array.length,result="";length>++index;)result=callback(result,array[index],index);return result}}function createCtorWrapper(Ctor){return function(){var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,arguments);return isObject(result)?result:thisBinding}}function createCurry(flag){function curryFunc(func,arity,guard){guard&&isIterateeCall(func,arity,guard)&&(arity=null);var result=createWrapper(func,flag,null,null,null,null,null,arity);return result.placeholder=curryFunc.placeholder,result}return curryFunc}function createExtremum(arrayFunc,isMin){return function(collection,iteratee,thisArg){thisArg&&isIterateeCall(collection,iteratee,thisArg)&&(iteratee=null);var func=getCallback(),noIteratee=null==iteratee;if(func===baseCallback&&noIteratee||(noIteratee=!1,iteratee=func(iteratee,thisArg,3)),noIteratee){var isArr=isArray(collection);if(isArr||!isString(collection))return arrayFunc(isArr?collection:toIterable(collection));iteratee=charAtCallback}return extremumBy(collection,iteratee,isMin)}}function createFind(eachFunc,fromRight){return function(collection,predicate,thisArg){if(predicate=getCallback(predicate,thisArg,3),isArray(collection)){var index=baseFindIndex(collection,predicate,fromRight);return index>-1?collection[index]:undefined}return baseFind(collection,predicate,eachFunc)}}function createFindIndex(fromRight){return function(array,predicate,thisArg){return array&&array.length?(predicate=getCallback(predicate,thisArg,3),baseFindIndex(array,predicate,fromRight)):-1}}function createFindKey(objectFunc){return function(object,predicate,thisArg){return predicate=getCallback(predicate,thisArg,3),baseFind(object,predicate,objectFunc,!0)}}function createFlow(fromRight){return function(){var length=arguments.length;if(!length)return function(){return arguments[0]};for(var wrapper,index=fromRight?length:-1,leftIndex=0,funcs=Array(length);fromRight?index--:length>++index;){var func=funcs[leftIndex++]=arguments[index];if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);var funcName=wrapper?"":getFuncName(func);wrapper="wrapper"==funcName?new LodashWrapper([]):wrapper}for(index=wrapper?-1:length;length>++index;){func=funcs[index],funcName=getFuncName(func);var data="wrapper"==funcName?getData(func):null;wrapper=data&&isLaziable(data[0])?wrapper[getFuncName(data[0])].apply(wrapper,data[3]):1==func.length&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}return function(){var args=arguments;if(wrapper&&1==args.length&&isArray(args[0]))return wrapper.plant(args[0]).value();for(var index=0,result=funcs[index].apply(this,args);length>++index;)result=funcs[index].call(this,result);return result}}}function createForEach(arrayFunc,eachFunc){return function(collection,iteratee,thisArg){return"function"==typeof iteratee&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee):eachFunc(collection,bindCallback(iteratee,thisArg,3))}}function createForIn(objectFunc){return function(object,iteratee,thisArg){return("function"!=typeof iteratee||thisArg!==undefined)&&(iteratee=bindCallback(iteratee,thisArg,3)),objectFunc(object,iteratee,keysIn)}}function createForOwn(objectFunc){return function(object,iteratee,thisArg){return("function"!=typeof iteratee||thisArg!==undefined)&&(iteratee=bindCallback(iteratee,thisArg,3)),objectFunc(object,iteratee)}}function createPadDir(fromRight){return function(string,length,chars){return string=baseToString(string),string&&(fromRight?string:"")+createPadding(string,length,chars)+(fromRight?"":string)}}function createPartial(flag){var partialFunc=restParam(function(func,partials){var holders=replaceHolders(partials,partialFunc.placeholder);return createWrapper(func,flag,null,partials,holders)});return partialFunc}function createReduce(arrayFunc,eachFunc){return function(collection,iteratee,accumulator,thisArg){var initFromArray=3>arguments.length;return"function"==typeof iteratee&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee,accumulator,initFromArray):baseReduce(collection,getCallback(iteratee,thisArg,4),accumulator,initFromArray,eachFunc)}}function createHybridWrapper(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){function wrapper(){for(var length=arguments.length,index=length,args=Array(length);index--;)args[index]=arguments[index];if(partials&&(args=composeArgs(args,partials,holders)),partialsRight&&(args=composeArgsRight(args,partialsRight,holdersRight)),isCurry||isCurryRight){var placeholder=wrapper.placeholder,argsHolders=replaceHolders(args,placeholder);if(length-=argsHolders.length,arity>length){var newArgPos=argPos?arrayCopy(argPos):null,newArity=nativeMax(arity-length,0),newsHolders=isCurry?argsHolders:null,newHoldersRight=isCurry?null:argsHolders,newPartials=isCurry?args:null,newPartialsRight=isCurry?null:args;bitmask|=isCurry?PARTIAL_FLAG:PARTIAL_RIGHT_FLAG,bitmask&=~(isCurry?PARTIAL_RIGHT_FLAG:PARTIAL_FLAG),isCurryBound||(bitmask&=~(BIND_FLAG|BIND_KEY_FLAG));var newData=[func,bitmask,thisArg,newPartials,newsHolders,newPartialsRight,newHoldersRight,newArgPos,ary,newArity],result=createHybridWrapper.apply(undefined,newData);return isLaziable(func)&&setData(result,newData),result.placeholder=placeholder,result}}var thisBinding=isBind?thisArg:this;isBindKey&&(func=thisBinding[key]),argPos&&(args=reorder(args,argPos)),isAry&&args.length>ary&&(args.length=ary);var fn=this&&this!==root&&this instanceof wrapper?Ctor||createCtorWrapper(func):func;return fn.apply(thisBinding,args)}var isAry=bitmask&ARY_FLAG,isBind=bitmask&BIND_FLAG,isBindKey=bitmask&BIND_KEY_FLAG,isCurry=bitmask&CURRY_FLAG,isCurryBound=bitmask&CURRY_BOUND_FLAG,isCurryRight=bitmask&CURRY_RIGHT_FLAG,Ctor=!isBindKey&&createCtorWrapper(func),key=func;return wrapper}function createPadding(string,length,chars){var strLength=string.length;if(length=+length,strLength>=length||!nativeIsFinite(length))return"";var padLength=length-strLength;return chars=null==chars?" ":chars+"",repeat(chars,ceil(padLength/chars.length)).slice(0,padLength)}function createPartialWrapper(func,bitmask,thisArg,partials){function wrapper(){for(var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(argsLength+leftLength);leftLength>++leftIndex;)args[leftIndex]=partials[leftIndex];for(;argsLength--;)args[leftIndex++]=arguments[++argsIndex];var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,args)}var isBind=bitmask&BIND_FLAG,Ctor=createCtorWrapper(func);
return wrapper}function createSortedIndex(retHighest){return function(array,value,iteratee,thisArg){var func=getCallback(iteratee);return func===baseCallback&&null==iteratee?binaryIndex(array,value,retHighest):binaryIndexBy(array,value,func(iteratee,thisArg,1),retHighest)}}function createWrapper(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&BIND_KEY_FLAG;if(!isBindKey&&"function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);var length=partials?partials.length:0;if(length||(bitmask&=~(PARTIAL_FLAG|PARTIAL_RIGHT_FLAG),partials=holders=null),length-=holders?holders.length:0,bitmask&PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=null}var data=isBindKey?null:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data&&(mergeData(newData,data),bitmask=newData[1],arity=newData[9]),newData[9]=null==arity?isBindKey?0:func.length:nativeMax(arity-length,0)||0,bitmask==BIND_FLAG)var result=createBindWrapper(newData[0],newData[2]);else result=bitmask!=PARTIAL_FLAG&&bitmask!=(BIND_FLAG|PARTIAL_FLAG)||newData[4].length?createHybridWrapper.apply(undefined,newData):createPartialWrapper.apply(undefined,newData);var setter=data?baseSetData:setData;return setter(result,newData)}function equalArrays(array,other,equalFunc,customizer,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length,result=!0;if(arrLength!=othLength&&!(isLoose&&othLength>arrLength))return!1;for(;result&&arrLength>++index;){var arrValue=array[index],othValue=other[index];if(result=undefined,customizer&&(result=isLoose?customizer(othValue,arrValue,index):customizer(arrValue,othValue,index)),result===undefined)if(isLoose)for(var othIndex=othLength;othIndex--&&(othValue=other[othIndex],!(result=arrValue&&arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB))););else result=arrValue&&arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB)}return!!result}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return object!=+object?other!=+other:0==object?1/object==1/other:object==+other;case regexpTag:case stringTag:return object==other+""}return!1}function equalObjects(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isLoose)return!1;for(var skipCtor=isLoose,index=-1;objLength>++index;){var key=objProps[index],result=isLoose?key in other:hasOwnProperty.call(other,key);if(result){var objValue=object[key],othValue=other[key];result=undefined,customizer&&(result=isLoose?customizer(othValue,objValue,key):customizer(objValue,othValue,key)),result===undefined&&(result=objValue&&objValue===othValue||equalFunc(objValue,othValue,customizer,isLoose,stackA,stackB))}if(!result)return!1;skipCtor||(skipCtor="constructor"==key)}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor))return!1}return!0}function extremumBy(collection,iteratee,isMin){var exValue=isMin?POSITIVE_INFINITY:NEGATIVE_INFINITY,computed=exValue,result=computed;return baseEach(collection,function(value,index,collection){var current=iteratee(value,index,collection);((isMin?computed>current:current>computed)||current===exValue&&current===result)&&(computed=current,result=value)}),result}function getCallback(func,thisArg,argCount){var result=lodash.callback||callback;return result=result===callback?baseCallback:result,argCount?result(func,thisArg,argCount):result}function getIndexOf(collection,target,fromIndex){var result=lodash.indexOf||indexOf;return result=result===indexOf?baseIndexOf:result,collection?result(collection,target,fromIndex):result}function getView(start,end,transforms){for(var index=-1,length=transforms?transforms.length:0;length>++index;){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size)}}return{start:start,end:end}}function initCloneArray(array){var length=array.length,result=new array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result}function initCloneObject(object){var Ctor=object.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor||(Ctor=Object),new Ctor}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return bufferClone(object);case boolTag:case dateTag:return new Ctor(+object);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:var buffer=object.buffer;return new Ctor(isDeep?bufferClone(buffer):buffer,object.byteOffset,object.length);case numberTag:case stringTag:return new Ctor(object);case regexpTag:var result=new Ctor(object.source,reFlags.exec(object));result.lastIndex=object.lastIndex}return result}function isIndex(value,length){return value=+value,length=null==length?MAX_SAFE_INTEGER:length,value>-1&&0==value%1&&length>value}function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;if("number"==type)var length=object.length,prereq=isLength(length)&&isIndex(index,length);else prereq="string"==type&&index in object;if(prereq){var other=object[index];return value===value?value===other:other!==other}return!1}function isLaziable(func){var funcName=getFuncName(func);return!!funcName&&func===lodash[funcName]&&funcName in LazyWrapper.prototype}function isLength(value){return"number"==typeof value&&value>-1&&0==value%1&&MAX_SAFE_INTEGER>=value}function isStrictComparable(value){return value===value&&(0===value?1/value>0:!isObject(value))}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=ARY_FLAG>newBitmask,isCombo=srcBitmask==ARY_FLAG&&bitmask==CURRY_FLAG||srcBitmask==ARY_FLAG&&bitmask==REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(ARY_FLAG|REARG_FLAG)&&bitmask==CURRY_FLAG;if(!isCommon&&!isCombo)return data;srcBitmask&BIND_FLAG&&(data[2]=source[2],newBitmask|=bitmask&BIND_FLAG?0:CURRY_BOUND_FLAG);var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):arrayCopy(value),data[4]=partials?replaceHolders(data[3],PLACEHOLDER):arrayCopy(source[4])}return value=source[5],value&&(partials=data[5],data[5]=partials?composeArgsRight(partials,value,source[6]):arrayCopy(value),data[6]=partials?replaceHolders(data[5],PLACEHOLDER):arrayCopy(source[6])),value=source[7],value&&(data[7]=arrayCopy(value)),srcBitmask&ARY_FLAG&&(data[8]=null==data[8]?source[8]:nativeMin(data[8],source[8])),null==data[9]&&(data[9]=source[9]),data[0]=source[0],data[1]=newBitmask,data}function pickByArray(object,props){object=toObject(object);for(var index=-1,length=props.length,result={};length>++index;){var key=props[index];key in object&&(result[key]=object[key])}return result}function pickByCallback(object,predicate){var result={};return baseForIn(object,function(value,key,object){predicate(value,key,object)&&(result[key]=value)}),result}function reorder(array,indexes){for(var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=arrayCopy(array);length--;){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}function shimIsPlainObject(value){var Ctor,support=lodash.support;if(!isObjectLike(value)||objToString.call(value)!=objectTag||!hasOwnProperty.call(value,"constructor")&&(Ctor=value.constructor,"function"==typeof Ctor&&!(Ctor instanceof Ctor)))return!1;var result;return baseForIn(value,function(subValue,key){result=key}),result===undefined||hasOwnProperty.call(value,result)}function shimKeys(object){for(var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length,support=lodash.support,allowIndexes=length&&isLength(length)&&(isArray(object)||support.nonEnumArgs&&isArguments(object)),index=-1,result=[];propsLength>++index;){var key=props[index];(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key))&&result.push(key)}return result}function toIterable(value){return null==value?[]:isLength(value.length)?isObject(value)?value:Object(value):values(value)}function toObject(value){return isObject(value)?value:Object(value)}function wrapperClone(wrapper){return wrapper instanceof LazyWrapper?wrapper.clone():new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__,arrayCopy(wrapper.__actions__))}function chunk(array,size,guard){size=(guard?isIterateeCall(array,size,guard):null==size)?1:nativeMax(+size||1,1);for(var index=0,length=array?array.length:0,resIndex=-1,result=Array(ceil(length/size));length>index;)result[++resIndex]=baseSlice(array,index,index+=size);return result}function compact(array){for(var index=-1,length=array?array.length:0,resIndex=-1,result=[];length>++index;){var value=array[index];value&&(result[++resIndex]=value)}return result}function drop(array,n,guard){var length=array?array.length:0;return length?((guard?isIterateeCall(array,n,guard):null==n)&&(n=1),baseSlice(array,0>n?0:n)):[]}function dropRight(array,n,guard){var length=array?array.length:0;return length?((guard?isIterateeCall(array,n,guard):null==n)&&(n=1),n=length-(+n||0),baseSlice(array,0,0>n?0:n)):[]}function dropRightWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),!0,!0):[]}function dropWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),!0):[]}function fill(array,value,start,end){var length=array?array.length:0;return length?(start&&"number"!=typeof start&&isIterateeCall(array,value,start)&&(start=0,end=length),baseFill(array,value,start,end)):[]}function first(array){return array?array[0]:undefined}function flatten(array,isDeep,guard){var length=array?array.length:0;return guard&&isIterateeCall(array,isDeep,guard)&&(isDeep=!1),length?baseFlatten(array,isDeep):[]}function flattenDeep(array){var length=array?array.length:0;return length?baseFlatten(array,!0):[]}function indexOf(array,value,fromIndex){var length=array?array.length:0;if(!length)return-1;if("number"==typeof fromIndex)fromIndex=0>fromIndex?nativeMax(length+fromIndex,0):fromIndex;else if(fromIndex){var index=binaryIndex(array,value),other=array[index];return(value===value?value===other:other!==other)?index:-1}return baseIndexOf(array,value,fromIndex||0)}function initial(array){return dropRight(array,1)}function intersection(){for(var args=[],argsIndex=-1,argsLength=arguments.length,caches=[],indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf;argsLength>++argsIndex;){var value=arguments[argsIndex];(isArray(value)||isArguments(value))&&(args.push(value),caches.push(isCommon&&value.length>=120?createCache(argsIndex&&value):null))}argsLength=args.length;var array=args[0],index=-1,length=array?array.length:0,result=[],seen=caches[0];outer:for(;length>++index;)if(value=array[index],0>(seen?cacheIndexOf(seen,value):indexOf(result,value,0))){for(argsIndex=argsLength;--argsIndex;){var cache=caches[argsIndex];if(0>(cache?cacheIndexOf(cache,value):indexOf(args[argsIndex],value,0)))continue outer}seen&&seen.push(value),result.push(value)}return result}function last(array){var length=array?array.length:0;return length?array[length-1]:undefined}function lastIndexOf(array,value,fromIndex){var length=array?array.length:0;if(!length)return-1;var index=length;if("number"==typeof fromIndex)index=(0>fromIndex?nativeMax(length+fromIndex,0):nativeMin(fromIndex||0,length-1))+1;else if(fromIndex){index=binaryIndex(array,value,!0)-1;var other=array[index];return(value===value?value===other:other!==other)?index:-1}if(value!==value)return indexOfNaN(array,index,!0);for(;index--;)if(array[index]===value)return index;return-1}function pull(){var args=arguments,array=args[0];if(!array||!array.length)return array;for(var index=0,indexOf=getIndexOf(),length=args.length;length>++index;)for(var fromIndex=0,value=args[index];(fromIndex=indexOf(array,value,fromIndex))>-1;)splice.call(array,fromIndex,1);return array}function remove(array,predicate,thisArg){var index=-1,length=array?array.length:0,result=[];for(predicate=getCallback(predicate,thisArg,3);length>++index;){var value=array[index];predicate(value,index,array)&&(result.push(value),splice.call(array,index--,1),length--)}return result}function rest(array){return drop(array,1)}function slice(array,start,end){var length=array?array.length:0;return length?(end&&"number"!=typeof end&&isIterateeCall(array,start,end)&&(start=0,end=length),baseSlice(array,start,end)):[]}function take(array,n,guard){var length=array?array.length:0;return length?((guard?isIterateeCall(array,n,guard):null==n)&&(n=1),baseSlice(array,0,0>n?0:n)):[]}function takeRight(array,n,guard){var length=array?array.length:0;return length?((guard?isIterateeCall(array,n,guard):null==n)&&(n=1),n=length-(+n||0),baseSlice(array,0>n?0:n)):[]}function takeRightWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),!1,!0):[]}function takeWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3)):[]}function uniq(array,isSorted,iteratee,thisArg){var length=array?array.length:0;if(!length)return[];null!=isSorted&&"boolean"!=typeof isSorted&&(thisArg=iteratee,iteratee=isIterateeCall(array,isSorted,thisArg)?null:isSorted,isSorted=!1);var func=getCallback();return(func!==baseCallback||null!=iteratee)&&(iteratee=func(iteratee,thisArg,3)),isSorted&&getIndexOf()==baseIndexOf?sortedUniq(array,iteratee):baseUniq(array,iteratee)}function unzip(array){for(var index=-1,length=(array&&array.length&&arrayMax(arrayMap(array,getLength)))>>>0,result=Array(length);length>++index;)result[index]=arrayMap(array,baseProperty(index));return result}function xor(){for(var index=-1,length=arguments.length;length>++index;){var array=arguments[index];if(isArray(array)||isArguments(array))var result=result?baseDifference(result,array).concat(baseDifference(array,result)):array}return result?baseUniq(result):[]}function zipObject(props,values){var index=-1,length=props?props.length:0,result={};for(!length||values||isArray(props[0])||(values=[]);length>++index;){var key=props[index];values?result[key]=values[index]:key&&(result[key[0]]=key[1])}return result}function chain(value){var result=lodash(value);return result.__chain__=!0,result}function tap(value,interceptor,thisArg){return interceptor.call(thisArg,value),value}function thru(value,interceptor,thisArg){return interceptor.call(thisArg,value)}function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}function wrapperPlant(value){for(var result,parent=this;parent instanceof baseLodash;){var clone=wrapperClone(parent);result?previous.__wrapped__=clone:result=clone;var previous=clone;parent=parent.__wrapped__}return previous.__wrapped__=value,result}function wrapperReverse(){var value=this.__wrapped__;return value instanceof LazyWrapper?(this.__actions__.length&&(value=new LazyWrapper(this)),new LodashWrapper(value.reverse(),this.__chain__)):this.thru(function(value){return value.reverse()})}function wrapperToString(){return this.value()+""}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}function every(collection,predicate,thisArg){var func=isArray(collection)?arrayEvery:baseEvery;return thisArg&&isIterateeCall(collection,predicate,thisArg)&&(predicate=null),("function"!=typeof predicate||thisArg!==undefined)&&(predicate=getCallback(predicate,thisArg,3)),func(collection,predicate)}function filter(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;return predicate=getCallback(predicate,thisArg,3),func(collection,predicate)}function findWhere(collection,source){return find(collection,baseMatches(source))}function includes(collection,target,fromIndex,guard){var length=collection?collection.length:0;return isLength(length)||(collection=values(collection),length=collection.length),length?(fromIndex="number"!=typeof fromIndex||guard&&isIterateeCall(target,fromIndex,guard)?0:0>fromIndex?nativeMax(length+fromIndex,0):fromIndex||0,"string"==typeof collection||!isArray(collection)&&isString(collection)?length>fromIndex&&collection.indexOf(target,fromIndex)>-1:getIndexOf(collection,target,fromIndex)>-1):!1}function map(collection,iteratee,thisArg){var func=isArray(collection)?arrayMap:baseMap;return iteratee=getCallback(iteratee,thisArg,3),func(collection,iteratee)}function pluck(collection,key){return map(collection,baseProperty(key))}function reject(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;return predicate=getCallback(predicate,thisArg,3),func(collection,function(value,index,collection){return!predicate(value,index,collection)})}function sample(collection,n,guard){if(guard?isIterateeCall(collection,n,guard):null==n){collection=toIterable(collection);var length=collection.length;return length>0?collection[baseRandom(0,length-1)]:undefined}var result=shuffle(collection);return result.length=nativeMin(0>n?0:+n||0,result.length),result}function shuffle(collection){collection=toIterable(collection);for(var index=-1,length=collection.length,result=Array(length);length>++index;){var rand=baseRandom(0,index);index!=rand&&(result[index]=result[rand]),result[rand]=collection[index]}return result}function size(collection){var length=collection?collection.length:0;return isLength(length)?length:keys(collection).length}function some(collection,predicate,thisArg){var func=isArray(collection)?arraySome:baseSome;return thisArg&&isIterateeCall(collection,predicate,thisArg)&&(predicate=null),("function"!=typeof predicate||thisArg!==undefined)&&(predicate=getCallback(predicate,thisArg,3)),func(collection,predicate)}function sortBy(collection,iteratee,thisArg){if(null==collection)return[];var index=-1,length=collection.length,result=isLength(length)?Array(length):[];return thisArg&&isIterateeCall(collection,iteratee,thisArg)&&(iteratee=null),iteratee=getCallback(iteratee,thisArg,3),baseEach(collection,function(value,key,collection){result[++index]={criteria:iteratee(value,key,collection),index:index,value:value}}),baseSortBy(result,compareAscending)}function sortByAll(){var args=arguments,collection=args[0],guard=args[3],index=0,length=args.length-1;if(null==collection)return[];for(var props=Array(length);length>index;)props[index]=args[++index];return guard&&isIterateeCall(args[1],args[2],guard)&&(props=args[1]),baseSortByOrder(collection,baseFlatten(props),[])}function sortByOrder(collection,props,orders,guard){return null==collection?[]:(guard&&isIterateeCall(props,orders,guard)&&(orders=null),isArray(props)||(props=null==props?[]:[props]),isArray(orders)||(orders=null==orders?[]:[orders]),baseSortByOrder(collection,props,orders))}function where(collection,source){return filter(collection,baseMatches(source))}function after(n,func){if("function"!=typeof func){if("function"!=typeof n)throw new TypeError(FUNC_ERROR_TEXT);var temp=n;n=func,func=temp}return n=nativeIsFinite(n=+n)?n:0,function(){return 1>--n?func.apply(this,arguments):undefined}}function ary(func,n,guard){return guard&&isIterateeCall(func,n,guard)&&(n=null),n=func&&null==n?func.length:nativeMax(+n||0,0),createWrapper(func,ARY_FLAG,null,null,null,null,n)}function before(n,func){var result;if("function"!=typeof func){if("function"!=typeof n)throw new TypeError(FUNC_ERROR_TEXT);var temp=n;n=func,func=temp}return function(){return--n>0?result=func.apply(this,arguments):func=null,result}}function debounce(func,wait,options){function cancel(){timeoutId&&clearTimeout(timeoutId),maxTimeoutId&&clearTimeout(maxTimeoutId),maxTimeoutId=timeoutId=trailingCall=undefined}function delayed(){var remaining=wait-(now()-stamp);if(0>=remaining||remaining>wait){maxTimeoutId&&clearTimeout(maxTimeoutId);var isCalled=trailingCall;maxTimeoutId=timeoutId=trailingCall=undefined,isCalled&&(lastCalled=now(),result=func.apply(thisArg,args),timeoutId||maxTimeoutId||(args=thisArg=null))}else timeoutId=setTimeout(delayed,remaining)}function maxDelayed(){timeoutId&&clearTimeout(timeoutId),maxTimeoutId=timeoutId=trailingCall=undefined,(trailing||maxWait!==wait)&&(lastCalled=now(),result=func.apply(thisArg,args),timeoutId||maxTimeoutId||(args=thisArg=null))}function debounced(){if(args=arguments,stamp=now(),thisArg=this,trailingCall=trailing&&(timeoutId||!leading),maxWait===!1)var leadingCall=leading&&!timeoutId;else{maxTimeoutId||leading||(lastCalled=stamp);var remaining=maxWait-(stamp-lastCalled),isCalled=0>=remaining||remaining>maxWait;isCalled?(maxTimeoutId&&(maxTimeoutId=clearTimeout(maxTimeoutId)),lastCalled=stamp,result=func.apply(thisArg,args)):maxTimeoutId||(maxTimeoutId=setTimeout(maxDelayed,remaining))}return isCalled&&timeoutId?timeoutId=clearTimeout(timeoutId):timeoutId||wait===maxWait||(timeoutId=setTimeout(delayed,wait)),leadingCall&&(isCalled=!0,result=func.apply(thisArg,args)),!isCalled||timeoutId||maxTimeoutId||(args=thisArg=null),result}var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);if(wait=0>wait?0:+wait||0,options===!0){var leading=!0;trailing=!1}else isObject(options)&&(leading=options.leading,maxWait="maxWait"in options&&nativeMax(+options.maxWait||0,wait),trailing="trailing"in options?options.trailing:trailing);return debounced.cancel=cancel,debounced}function memoize(func,resolver){if("function"!=typeof func||resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,cache=memoized.cache,key=resolver?resolver.apply(this,args):args[0];if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return cache.set(key,result),result};return memoized.cache=new memoize.Cache,memoized}function negate(predicate){if("function"!=typeof predicate)throw new TypeError(FUNC_ERROR_TEXT);return function(){return!predicate.apply(this,arguments)}}function once(func){return before(func,2)}function restParam(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=nativeMax(start===undefined?func.length-1:+start||0,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);length>++index;)rest[index]=args[start+index];switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);for(index=-1;start>++index;)otherArgs[index]=args[index];return otherArgs[start]=rest,func.apply(this,otherArgs)}}function spread(func){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return function(array){return func.apply(this,array)}}function throttle(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return options===!1?leading=!1:isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounceOptions.leading=leading,debounceOptions.maxWait=+wait,debounceOptions.trailing=trailing,debounce(func,wait,debounceOptions)}function wrap(value,wrapper){return wrapper=null==wrapper?identity:wrapper,createWrapper(wrapper,PARTIAL_FLAG,null,[value],[])}function clone(value,isDeep,customizer,thisArg){return isDeep&&"boolean"!=typeof isDeep&&isIterateeCall(value,isDeep,customizer)?isDeep=!1:"function"==typeof isDeep&&(thisArg=customizer,customizer=isDeep,isDeep=!1),customizer="function"==typeof customizer&&bindCallback(customizer,thisArg,1),baseClone(value,isDeep,customizer)}function cloneDeep(value,customizer,thisArg){return customizer="function"==typeof customizer&&bindCallback(customizer,thisArg,1),baseClone(value,!0,customizer)}function isArguments(value){var length=isObjectLike(value)?value.length:undefined;return isLength(length)&&objToString.call(value)==argsTag}function isBoolean(value){return value===!0||value===!1||isObjectLike(value)&&objToString.call(value)==boolTag}function isDate(value){return isObjectLike(value)&&objToString.call(value)==dateTag}function isElement(value){return!!value&&1===value.nodeType&&isObjectLike(value)&&objToString.call(value).indexOf("Element")>-1}function isEmpty(value){if(null==value)return!0;var length=value.length;return isLength(length)&&(isArray(value)||isString(value)||isArguments(value)||isObjectLike(value)&&isFunction(value.splice))?!length:!keys(value).length}function isEqual(value,other,customizer,thisArg){if(customizer="function"==typeof customizer&&bindCallback(customizer,thisArg,3),!customizer&&isStrictComparable(value)&&isStrictComparable(other))return value===other;var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,customizer):!!result}function isError(value){return isObjectLike(value)&&"string"==typeof value.message&&objToString.call(value)==errorTag}function isObject(value){var type=typeof value;return"function"==type||!!value&&"object"==type}function isMatch(object,source,customizer,thisArg){var props=keys(source),length=props.length;if(!length)return!0;if(null==object)return!1;if(customizer="function"==typeof customizer&&bindCallback(customizer,thisArg,3),!customizer&&1==length){var key=props[0],value=source[key];if(isStrictComparable(value))return value===object[key]&&(value!==undefined||key in toObject(object))}for(var values=Array(length),strictCompareFlags=Array(length);length--;)value=values[length]=source[props[length]],strictCompareFlags[length]=isStrictComparable(value);return baseIsMatch(toObject(object),props,values,strictCompareFlags,customizer)}function isNaN(value){return isNumber(value)&&value!=+value}function isNative(value){return null==value?!1:objToString.call(value)==funcTag?reNative.test(fnToString.call(value)):isObjectLike(value)&&reHostCtor.test(value)}function isNull(value){return null===value}function isNumber(value){return"number"==typeof value||isObjectLike(value)&&objToString.call(value)==numberTag}function isRegExp(value){return isObjectLike(value)&&objToString.call(value)==regexpTag||!1}function isString(value){return"string"==typeof value||isObjectLike(value)&&objToString.call(value)==stringTag}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}function isUndefined(value){return value===undefined}function toArray(value){var length=value?value.length:0;return isLength(length)?length?arrayCopy(value):[]:values(value)}function toPlainObject(value){return baseCopy(value,keysIn(value))}function create(prototype,properties,guard){var result=baseCreate(prototype);return guard&&isIterateeCall(prototype,properties,guard)&&(properties=null),properties?baseCopy(properties,result,keys(properties)):result}function functions(object){return baseFunctions(object,keysIn(object))}function has(object,key){return object?hasOwnProperty.call(object,key):!1}function invert(object,multiValue,guard){guard&&isIterateeCall(object,multiValue,guard)&&(multiValue=null);for(var index=-1,props=keys(object),length=props.length,result={};length>++index;){var key=props[index],value=object[key];multiValue?hasOwnProperty.call(result,value)?result[value].push(key):result[value]=[key]:result[value]=key}return result}function keysIn(object){if(null==object)return[];isObject(object)||(object=Object(object));var length=object.length;length=length&&isLength(length)&&(isArray(object)||support.nonEnumArgs&&isArguments(object))&&length||0;for(var Ctor=object.constructor,index=-1,isProto="function"==typeof Ctor&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;length>++index;)result[index]=index+"";for(var key in object)skipIndexes&&isIndex(key,length)||"constructor"==key&&(isProto||!hasOwnProperty.call(object,key))||result.push(key);return result}function mapValues(object,iteratee,thisArg){var result={};return iteratee=getCallback(iteratee,thisArg,3),baseForOwn(object,function(value,key,object){result[key]=iteratee(value,key,object)}),result}function pairs(object){for(var index=-1,props=keys(object),length=props.length,result=Array(length);length>++index;){var key=props[index];result[index]=[key,object[key]]}return result}function result(object,key,defaultValue){var value=null==object?undefined:object[key];return value===undefined&&(value=defaultValue),isFunction(value)?value.call(object):value}function transform(object,iteratee,accumulator,thisArg){var isArr=isArray(object)||isTypedArray(object);if(iteratee=getCallback(iteratee,thisArg,4),null==accumulator)if(isArr||isObject(object)){var Ctor=object.constructor;accumulator=isArr?isArray(object)?new Ctor:[]:baseCreate(isFunction(Ctor)&&Ctor.prototype)}else accumulator={};return(isArr?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)}),accumulator}function values(object){return baseValues(object,keys(object))}function valuesIn(object){return baseValues(object,keysIn(object))}function inRange(value,start,end){return start=+start||0,end===undefined?(end=start,start=0):end=+end||0,value>=start&&end>value}function random(min,max,floating){floating&&isIterateeCall(min,max,floating)&&(max=floating=null);var noMin=null==min,noMax=null==max;if(null==floating&&(noMax&&"boolean"==typeof min?(floating=min,min=1):"boolean"==typeof max&&(floating=max,noMax=!0)),noMin&&noMax&&(max=1,noMax=!1),min=+min||0,noMax?(max=min,min=0):max=+max||0,floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+rand*(max-min+parseFloat("1e-"+((rand+"").length-1))),max)}return baseRandom(min,max)}function capitalize(string){return string=baseToString(string),string&&string.charAt(0).toUpperCase()+string.slice(1)}function deburr(string){return string=baseToString(string),string&&string.replace(reLatin1,deburrLetter).replace(reComboMarks,"")}function endsWith(string,target,position){string=baseToString(string),target+="";var length=string.length;return position=position===undefined?length:nativeMin(0>position?0:+position||0,length),position-=target.length,position>=0&&string.indexOf(target,position)==position}function escape(string){return string=baseToString(string),string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}function escapeRegExp(string){return string=baseToString(string),string&&reHasRegExpChars.test(string)?string.replace(reRegExpChars,"\\$&"):string}function pad(string,length,chars){string=baseToString(string),length=+length;var strLength=string.length;if(strLength>=length||!nativeIsFinite(length))return string;var mid=(length-strLength)/2,leftLength=floor(mid),rightLength=ceil(mid);return chars=createPadding("",rightLength,chars),chars.slice(0,leftLength)+string+chars}function parseInt(string,radix,guard){return guard&&isIterateeCall(string,radix,guard)&&(radix=0),nativeParseInt(string,radix)}function repeat(string,n){var result="";if(string=baseToString(string),n=+n,1>n||!string||!nativeIsFinite(n))return result;do n%2&&(result+=string),n=floor(n/2),string+=string;while(n);return result}function startsWith(string,target,position){return string=baseToString(string),position=null==position?0:nativeMin(0>position?0:+position||0,string.length),string.lastIndexOf(target,position)==position}function template(string,options,otherOptions){var settings=lodash.templateSettings;
otherOptions&&isIterateeCall(string,options,otherOptions)&&(options=otherOptions=null),string=baseToString(string),options=baseAssign(baseAssign({},otherOptions||options),settings,assignOwnDefaults);var imports=baseAssign(baseAssign({},options.imports),settings.imports,assignOwnDefaults),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys),isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g"),sourceURL="//# sourceURL="+("sourceURL"in options?options.sourceURL:"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){return interpolateValue||(interpolateValue=esTemplateValue),source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar),escapeValue&&(isEscaping=!0,source+="' +\n__e("+escapeValue+") +\n'"),evaluateValue&&(isEvaluating=!0,source+="';\n"+evaluateValue+";\n__p += '"),interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),index=offset+match.length,match}),source+="';\n";var variable=options.variable;variable||(source="with (obj) {\n"+source+"\n}\n"),source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)});if(result.source=source,isError(result))throw result;return result}function trim(string,chars,guard){var value=string;return(string=baseToString(string))?(guard?isIterateeCall(value,chars,guard):null==chars)?string.slice(trimmedLeftIndex(string),trimmedRightIndex(string)+1):(chars+="",string.slice(charsLeftIndex(string,chars),charsRightIndex(string,chars)+1)):string}function trimLeft(string,chars,guard){var value=string;return string=baseToString(string),string?(guard?isIterateeCall(value,chars,guard):null==chars)?string.slice(trimmedLeftIndex(string)):string.slice(charsLeftIndex(string,chars+"")):string}function trimRight(string,chars,guard){var value=string;return string=baseToString(string),string?(guard?isIterateeCall(value,chars,guard):null==chars)?string.slice(0,trimmedRightIndex(string)+1):string.slice(0,charsRightIndex(string,chars+"")+1):string}function trunc(string,options,guard){guard&&isIterateeCall(string,options,guard)&&(options=null);var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(null!=options)if(isObject(options)){var separator="separator"in options?options.separator:separator;length="length"in options?+options.length||0:length,omission="omission"in options?baseToString(options.omission):omission}else length=+options||0;if(string=baseToString(string),length>=string.length)return string;var end=length-omission.length;if(1>end)return omission;var result=string.slice(0,end);if(null==separator)return result+omission;if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,newEnd,substring=string.slice(0,end);for(separator.global||(separator=RegExp(separator.source,(reFlags.exec(separator)||"")+"g")),separator.lastIndex=0;match=separator.exec(substring);)newEnd=match.index;result=result.slice(0,null==newEnd?end:newEnd)}}else if(string.indexOf(separator,end)!=end){var index=result.lastIndexOf(separator);index>-1&&(result=result.slice(0,index))}return result+omission}function unescape(string){return string=baseToString(string),string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}function words(string,pattern,guard){return guard&&isIterateeCall(string,pattern,guard)&&(pattern=null),string=baseToString(string),string.match(pattern||reWords)||[]}function callback(func,thisArg,guard){return guard&&isIterateeCall(func,thisArg,guard)&&(thisArg=null),isObjectLike(func)?matches(func):baseCallback(func,thisArg)}function constant(value){return function(){return value}}function identity(value){return value}function matches(source){return baseMatches(baseClone(source,!0))}function matchesProperty(key,value){return baseMatchesProperty(key+"",baseClone(value,!0))}function mixin(object,source,options){if(null==options){var isObj=isObject(source),props=isObj&&keys(source),methodNames=props&&props.length&&baseFunctions(source,props);(methodNames?methodNames.length:isObj)||(methodNames=!1,options=source,source=object,object=this)}methodNames||(methodNames=baseFunctions(source,keys(source)));var chain=!0,index=-1,isFunc=isFunction(object),length=methodNames.length;options===!1?chain=!1:isObject(options)&&"chain"in options&&(chain=options.chain);for(;length>++index;){var methodName=methodNames[index],func=source[methodName];object[methodName]=func,isFunc&&(object.prototype[methodName]=function(func){return function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=arrayCopy(this.__actions__);return actions.push({func:func,args:arguments,thisArg:object}),result.__chain__=chainAll,result}var args=[this.value()];return push.apply(args,arguments),func.apply(object,args)}}(func))}return object}function noConflict(){return context._=oldDash,this}function noop(){}function property(key){return baseProperty(key+"")}function propertyOf(object){return function(key){return null==object?undefined:object[key]}}function range(start,end,step){step&&isIterateeCall(start,end,step)&&(end=step=null),start=+start||0,step=null==step?1:+step||0,null==end?(end=start,start=0):end=+end||0;for(var index=-1,length=nativeMax(ceil((end-start)/(step||1)),0),result=Array(length);length>++index;)result[index]=start,start+=step;return result}function times(n,iteratee,thisArg){if(n=+n,1>n||!nativeIsFinite(n))return[];var index=-1,result=Array(nativeMin(n,MAX_ARRAY_LENGTH));for(iteratee=bindCallback(iteratee,thisArg,1);n>++index;)MAX_ARRAY_LENGTH>index?result[index]=iteratee(index):iteratee(index);return result}function uniqueId(prefix){var id=++idCounter;return baseToString(prefix)+id}function add(augend,addend){return augend+addend}function sum(collection,iteratee,thisArg){thisArg&&isIterateeCall(collection,iteratee,thisArg)&&(iteratee=null);var func=getCallback(),noIteratee=null==iteratee;return func===baseCallback&&noIteratee||(noIteratee=!1,iteratee=func(iteratee,thisArg,3)),noIteratee?arraySum(isArray(collection)?collection:toIterable(collection)):baseSum(collection,iteratee)}context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError,arrayProto=Array.prototype,objectProto=Object.prototype,stringProto=String.prototype,document=(document=context.window)&&document.document,fnToString=Function.prototype.toString,getLength=baseProperty("length"),hasOwnProperty=objectProto.hasOwnProperty,idCounter=0,objToString=objectProto.toString,oldDash=context._,reNative=RegExp("^"+escapeRegExp(objToString).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ArrayBuffer=isNative(ArrayBuffer=context.ArrayBuffer)&&ArrayBuffer,bufferSlice=isNative(bufferSlice=ArrayBuffer&&new ArrayBuffer(0).slice)&&bufferSlice,ceil=Math.ceil,clearTimeout=context.clearTimeout,floor=Math.floor,getPrototypeOf=isNative(getPrototypeOf=Object.getPrototypeOf)&&getPrototypeOf,push=arrayProto.push,propertyIsEnumerable=objectProto.propertyIsEnumerable,Set=isNative(Set=context.Set)&&Set,setTimeout=context.setTimeout,splice=arrayProto.splice,Uint8Array=isNative(Uint8Array=context.Uint8Array)&&Uint8Array,WeakMap=isNative(WeakMap=context.WeakMap)&&WeakMap,Float64Array=function(){try{var func=isNative(func=context.Float64Array)&&func,result=new func(new ArrayBuffer(10),0,1)&&func}catch(e){}return result}(),nativeIsArray=isNative(nativeIsArray=Array.isArray)&&nativeIsArray,nativeCreate=isNative(nativeCreate=Object.create)&&nativeCreate,nativeIsFinite=context.isFinite,nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys,nativeMax=Math.max,nativeMin=Math.min,nativeNow=isNative(nativeNow=Date.now)&&nativeNow,nativeNumIsFinite=isNative(nativeNumIsFinite=Number.isFinite)&&nativeNumIsFinite,nativeParseInt=context.parseInt,nativeRandom=Math.random,NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,POSITIVE_INFINITY=Number.POSITIVE_INFINITY,MAX_ARRAY_LENGTH=Math.pow(2,32)-1,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1,FLOAT64_BYTES_PER_ELEMENT=Float64Array?Float64Array.BYTES_PER_ELEMENT:0,MAX_SAFE_INTEGER=Math.pow(2,53)-1,metaMap=WeakMap&&new WeakMap,realNames={},support=lodash.support={};(function(x){support.funcDecomp=/\bthis\b/.test(function(){return this}),support.funcNames="string"==typeof Function.name;try{support.dom=11===document.createDocumentFragment().nodeType}catch(e){support.dom=!1}try{support.nonEnumArgs=!propertyIsEnumerable.call(arguments,1)}catch(e){support.nonEnumArgs=!0}})(0,0),lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}};var baseCreate=function(){function Object(){}return function(prototype){if(isObject(prototype)){Object.prototype=prototype;var result=new Object;Object.prototype=null}return result||context.Object()}}(),baseEach=createBaseEach(baseForOwn),baseEachRight=createBaseEach(baseForOwnRight,!0),baseFor=createBaseFor(),baseForRight=createBaseFor(!0),baseSetData=metaMap?function(func,data){return metaMap.set(func,data),func}:identity;bufferSlice||(bufferClone=ArrayBuffer&&Uint8Array?function(buffer){var byteLength=buffer.byteLength,floatLength=Float64Array?floor(byteLength/FLOAT64_BYTES_PER_ELEMENT):0,offset=floatLength*FLOAT64_BYTES_PER_ELEMENT,result=new ArrayBuffer(byteLength);if(floatLength){var view=new Float64Array(result,0,floatLength);view.set(new Float64Array(buffer,0,floatLength))}return byteLength!=offset&&(view=new Uint8Array(result,offset),view.set(new Uint8Array(buffer,offset))),result}:constant(null));var createCache=nativeCreate&&Set?function(values){return new SetCache(values)}:constant(null),getData=metaMap?function(func){return metaMap.get(func)}:noop,getFuncName=function(){return support.funcNames?"constant"==constant.name?baseProperty("name"):function(func){for(var result=func.name,array=realNames[result],length=array?array.length:0;length--;){var data=array[length],otherFunc=data.func;if(null==otherFunc||otherFunc==func)return data.name}return result}:constant("")}(),setData=function(){var count=0,lastCalled=0;return function(key,value){var stamp=now(),remaining=HOT_SPAN-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=HOT_COUNT)return key}else count=0;return baseSetData(key,value)}}(),difference=restParam(function(array,values){return isArray(array)||isArguments(array)?baseDifference(array,baseFlatten(values,!1,!0)):[]}),findIndex=createFindIndex(),findLastIndex=createFindIndex(!0),pullAt=restParam(function(array,indexes){array||(array=[]),indexes=baseFlatten(indexes);var length=indexes.length,result=baseAt(array,indexes);for(indexes.sort(baseCompareAscending);length--;){var index=parseFloat(indexes[length]);if(index!=previous&&isIndex(index)){var previous=index;splice.call(array,index,1)}}return result}),sortedIndex=createSortedIndex(),sortedLastIndex=createSortedIndex(!0),union=restParam(function(arrays){return baseUniq(baseFlatten(arrays,!1,!0))}),without=restParam(function(array,values){return isArray(array)||isArguments(array)?baseDifference(array,values):[]}),zip=restParam(unzip),at=restParam(function(collection,props){var length=collection?collection.length:0;return isLength(length)&&(collection=toIterable(collection)),baseAt(collection,baseFlatten(props))}),countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:result[key]=1}),find=createFind(baseEach),findLast=createFind(baseEachRight,!0),forEach=createForEach(arrayEach,baseEach),forEachRight=createForEach(arrayEachRight,baseEachRight),groupBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key].push(value):result[key]=[value]}),indexBy=createAggregator(function(result,value,key){result[key]=value}),invoke=restParam(function(collection,methodName,args){var index=-1,isFunc="function"==typeof methodName,length=collection?collection.length:0,result=isLength(length)?Array(length):[];return baseEach(collection,function(value){var func=isFunc?methodName:null!=value&&value[methodName];result[++index]=func?func.apply(value,args):undefined}),result}),partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]}),reduce=createReduce(arrayReduce,baseEach),reduceRight=createReduce(arrayReduceRight,baseEachRight),now=nativeNow||function(){return(new Date).getTime()},bind=restParam(function(func,thisArg,partials){var bitmask=BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,bind.placeholder);bitmask|=PARTIAL_FLAG}return createWrapper(func,bitmask,thisArg,partials,holders)}),bindAll=restParam(function(object,methodNames){methodNames=methodNames.length?baseFlatten(methodNames):functions(object);for(var index=-1,length=methodNames.length;length>++index;){var key=methodNames[index];object[key]=createWrapper(object[key],BIND_FLAG,object)}return object}),bindKey=restParam(function(object,key,partials){var bitmask=BIND_FLAG|BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,bindKey.placeholder);bitmask|=PARTIAL_FLAG}return createWrapper(key,bitmask,object,partials,holders)}),curry=createCurry(CURRY_FLAG),curryRight=createCurry(CURRY_RIGHT_FLAG),defer=restParam(function(func,args){return baseDelay(func,1,args)}),delay=restParam(function(func,wait,args){return baseDelay(func,wait,args)}),flow=createFlow(),flowRight=createFlow(!0),partial=createPartial(PARTIAL_FLAG),partialRight=createPartial(PARTIAL_RIGHT_FLAG),rearg=restParam(function(func,indexes){return createWrapper(func,REARG_FLAG,null,null,null,baseFlatten(indexes))}),isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};support.dom||(isElement=function(value){return!!value&&1===value.nodeType&&isObjectLike(value)&&!isPlainObject(value)});var isFinite=nativeNumIsFinite||function(value){return"number"==typeof value&&nativeIsFinite(value)},isFunction=baseIsFunction(/x/)||Uint8Array&&!baseIsFunction(Uint8Array)?function(value){return objToString.call(value)==funcTag}:baseIsFunction,isPlainObject=getPrototypeOf?function(value){if(!value||objToString.call(value)!=objectTag)return!1;var valueOf=value.valueOf,objProto=isNative(valueOf)&&(objProto=getPrototypeOf(valueOf))&&getPrototypeOf(objProto);return objProto?value==objProto||getPrototypeOf(value)==objProto:shimIsPlainObject(value)}:shimIsPlainObject,assign=createAssigner(baseAssign),defaults=restParam(function(args){var object=args[0];return null==object?object:(args.push(assignDefaults),assign.apply(undefined,args))}),findKey=createFindKey(baseForOwn),findLastKey=createFindKey(baseForOwnRight),forIn=createForIn(baseFor),forInRight=createForIn(baseForRight),forOwn=createForOwn(baseForOwn),forOwnRight=createForOwn(baseForOwnRight),keys=nativeKeys?function(object){if(object)var Ctor=object.constructor,length=object.length;return"function"==typeof Ctor&&Ctor.prototype===object||"function"!=typeof object&&length&&isLength(length)?shimKeys(object):isObject(object)?nativeKeys(object):[]}:shimKeys,merge=createAssigner(baseMerge),omit=restParam(function(object,props){if(null==object)return{};if("function"!=typeof props[0]){var props=arrayMap(baseFlatten(props),String);return pickByArray(object,baseDifference(keysIn(object),props))}var predicate=bindCallback(props[0],props[1],3);return pickByCallback(object,function(value,key,object){return!predicate(value,key,object)})}),pick=restParam(function(object,props){return null==object?{}:"function"==typeof props[0]?pickByCallback(object,bindCallback(props[0],props[1],3)):pickByArray(object,baseFlatten(props))}),camelCase=createCompounder(function(result,word,index){return word=word.toLowerCase(),result+(index?word.charAt(0).toUpperCase()+word.slice(1):word)}),kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()}),padLeft=createPadDir(),padRight=createPadDir(!0);8!=nativeParseInt(whitespace+"08")&&(parseInt=function(string,radix,guard){return(guard?isIterateeCall(string,radix,guard):null==radix)?radix=0:radix&&(radix=+radix),string=trim(string),nativeParseInt(string,radix||(reHexPrefix.test(string)?16:10))});var snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()}),startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+(word.charAt(0).toUpperCase()+word.slice(1))}),attempt=restParam(function(func,args){try{return func.apply(undefined,args)}catch(e){return isError(e)?e:new Error(e)}}),max=createExtremum(arrayMax),min=createExtremum(arrayMin,!0);return lodash.prototype=baseLodash.prototype,LodashWrapper.prototype=baseCreate(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper,LazyWrapper.prototype=baseCreate(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper,MapCache.prototype["delete"]=mapDelete,MapCache.prototype.get=mapGet,MapCache.prototype.has=mapHas,MapCache.prototype.set=mapSet,SetCache.prototype.push=cachePush,memoize.Cache=MapCache,lodash.after=after,lodash.ary=ary,lodash.assign=assign,lodash.at=at,lodash.before=before,lodash.bind=bind,lodash.bindAll=bindAll,lodash.bindKey=bindKey,lodash.callback=callback,lodash.chain=chain,lodash.chunk=chunk,lodash.compact=compact,lodash.constant=constant,lodash.countBy=countBy,lodash.create=create,lodash.curry=curry,lodash.curryRight=curryRight,lodash.debounce=debounce,lodash.defaults=defaults,lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,lodash.drop=drop,lodash.dropRight=dropRight,lodash.dropRightWhile=dropRightWhile,lodash.dropWhile=dropWhile,lodash.fill=fill,lodash.filter=filter,lodash.flatten=flatten,lodash.flattenDeep=flattenDeep,lodash.flow=flow,lodash.flowRight=flowRight,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=forIn,lodash.forInRight=forInRight,lodash.forOwn=forOwn,lodash.forOwnRight=forOwnRight,lodash.functions=functions,lodash.groupBy=groupBy,lodash.indexBy=indexBy,lodash.initial=initial,lodash.intersection=intersection,lodash.invert=invert,lodash.invoke=invoke,lodash.keys=keys,lodash.keysIn=keysIn,lodash.map=map,lodash.mapValues=mapValues,lodash.matches=matches,lodash.matchesProperty=matchesProperty,lodash.memoize=memoize,lodash.merge=merge,lodash.mixin=mixin,lodash.negate=negate,lodash.omit=omit,lodash.once=once,lodash.pairs=pairs,lodash.partial=partial,lodash.partialRight=partialRight,lodash.partition=partition,lodash.pick=pick,lodash.pluck=pluck,lodash.property=property,lodash.propertyOf=propertyOf,lodash.pull=pull,lodash.pullAt=pullAt,lodash.range=range,lodash.rearg=rearg,lodash.reject=reject,lodash.remove=remove,lodash.rest=rest,lodash.restParam=restParam,lodash.shuffle=shuffle,lodash.slice=slice,lodash.sortBy=sortBy,lodash.sortByAll=sortByAll,lodash.sortByOrder=sortByOrder,lodash.spread=spread,lodash.take=take,lodash.takeRight=takeRight,lodash.takeRightWhile=takeRightWhile,lodash.takeWhile=takeWhile,lodash.tap=tap,lodash.throttle=throttle,lodash.thru=thru,lodash.times=times,lodash.toArray=toArray,lodash.toPlainObject=toPlainObject,lodash.transform=transform,lodash.union=union,lodash.uniq=uniq,lodash.unzip=unzip,lodash.values=values,lodash.valuesIn=valuesIn,lodash.where=where,lodash.without=without,lodash.wrap=wrap,lodash.xor=xor,lodash.zip=zip,lodash.zipObject=zipObject,lodash.backflow=flowRight,lodash.collect=map,lodash.compose=flowRight,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.extend=assign,lodash.iteratee=callback,lodash.methods=functions,lodash.object=zipObject,lodash.select=filter,lodash.tail=rest,lodash.unique=uniq,mixin(lodash,lodash),lodash.add=add,lodash.attempt=attempt,lodash.camelCase=camelCase,lodash.capitalize=capitalize,lodash.clone=clone,lodash.cloneDeep=cloneDeep,lodash.deburr=deburr,lodash.endsWith=endsWith,lodash.escape=escape,lodash.escapeRegExp=escapeRegExp,lodash.every=every,lodash.find=find,lodash.findIndex=findIndex,lodash.findKey=findKey,lodash.findLast=findLast,lodash.findLastIndex=findLastIndex,lodash.findLastKey=findLastKey,lodash.findWhere=findWhere,lodash.first=first,lodash.has=has,lodash.identity=identity,lodash.includes=includes,lodash.indexOf=indexOf,lodash.inRange=inRange,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isBoolean=isBoolean,lodash.isDate=isDate,lodash.isElement=isElement,lodash.isEmpty=isEmpty,lodash.isEqual=isEqual,lodash.isError=isError,lodash.isFinite=isFinite,lodash.isFunction=isFunction,lodash.isMatch=isMatch,lodash.isNaN=isNaN,lodash.isNative=isNative,lodash.isNull=isNull,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isPlainObject=isPlainObject,lodash.isRegExp=isRegExp,lodash.isString=isString,lodash.isTypedArray=isTypedArray,lodash.isUndefined=isUndefined,lodash.kebabCase=kebabCase,lodash.last=last,lodash.lastIndexOf=lastIndexOf,lodash.max=max,lodash.min=min,lodash.noConflict=noConflict,lodash.noop=noop,lodash.now=now,lodash.pad=pad,lodash.padLeft=padLeft,lodash.padRight=padRight,lodash.parseInt=parseInt,lodash.random=random,lodash.reduce=reduce,lodash.reduceRight=reduceRight,lodash.repeat=repeat,lodash.result=result,lodash.runInContext=runInContext,lodash.size=size,lodash.snakeCase=snakeCase,lodash.some=some,lodash.sortedIndex=sortedIndex,lodash.sortedLastIndex=sortedLastIndex,lodash.startCase=startCase,lodash.startsWith=startsWith,lodash.sum=sum,lodash.template=template,lodash.trim=trim,lodash.trimLeft=trimLeft,lodash.trimRight=trimRight,lodash.trunc=trunc,lodash.unescape=unescape,lodash.uniqueId=uniqueId,lodash.words=words,lodash.all=every,lodash.any=some,lodash.contains=includes,lodash.detect=find,lodash.foldl=reduce,lodash.foldr=reduceRight,lodash.head=first,lodash.include=includes,lodash.inject=reduce,mixin(lodash,function(){var source={};return baseForOwn(lodash,function(func,methodName){lodash.prototype[methodName]||(source[methodName]=func)}),source}(),!1),lodash.sample=sample,lodash.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(value){return sample(value,n)}):sample(this.value())},lodash.VERSION=VERSION,arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash}),arrayEach(["dropWhile","filter","map","takeWhile"],function(methodName,type){var isFilter=type!=LAZY_MAP_FLAG,isDropWhile=type==LAZY_DROP_WHILE_FLAG;LazyWrapper.prototype[methodName]=function(iteratee,thisArg){var filtered=this.__filtered__,result=filtered&&isDropWhile?new LazyWrapper(this):this.clone(),iteratees=result.__iteratees__||(result.__iteratees__=[]);return iteratees.push({done:!1,count:0,index:0,iteratee:getCallback(iteratee,thisArg,1),limit:-1,type:type}),result.__filtered__=filtered||isFilter,result}}),arrayEach(["drop","take"],function(methodName,index){var whileName=methodName+"While";LazyWrapper.prototype[methodName]=function(n){var filtered=this.__filtered__,result=filtered&&!index?this.dropWhile():this.clone();if(n=null==n?1:nativeMax(floor(n)||0,0),filtered)index?result.__takeCount__=nativeMin(result.__takeCount__,n):last(result.__iteratees__).limit=n;else{var views=result.__views__||(result.__views__=[]);views.push({size:n,type:methodName+(0>result.__dir__?"Right":"")})}return result},LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()},LazyWrapper.prototype[methodName+"RightWhile"]=function(predicate,thisArg){return this.reverse()[whileName](predicate,thisArg).reverse()}}),arrayEach(["first","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}}),arrayEach(["initial","rest"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this[dropName](1)}}),arrayEach(["pluck","where"],function(methodName,index){var operationName=index?"filter":"map",createCallback=index?baseMatches:baseProperty;LazyWrapper.prototype[methodName]=function(value){return this[operationName](createCallback(value))}}),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.reject=function(predicate,thisArg){return predicate=getCallback(predicate,thisArg,1),this.filter(function(value){return!predicate(value)})},LazyWrapper.prototype.slice=function(start,end){start=null==start?0:+start||0;var result=0>start?this.takeRight(-start):this.drop(start);return end!==undefined&&(end=+end||0,result=0>end?result.dropRight(-end):result.take(end-start)),result},LazyWrapper.prototype.toArray=function(){return this.drop(0)},baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var checkIteratee=/^(?:filter|map|reject)|While$/.test(methodName),retUnwrapped=/^(?:first|last)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments,length=args.length,chainAll=this.__chain__,value=this.__wrapped__,isHybrid=!!this.__actions__.length,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value);useLazy&&checkIteratee&&"function"==typeof iteratee&&1!=iteratee.length&&(isLazy=useLazy=!1);var onlyLazy=isLazy&&!isHybrid;if(retUnwrapped&&!chainAll)return onlyLazy?func.call(value):lodashFunc.call(lodash,this.value());var interceptor=function(value){var otherArgs=[value];return push.apply(otherArgs,args),lodashFunc.apply(lodash,otherArgs)};if(useLazy){var wrapper=onlyLazy?value:new LazyWrapper(this),result=func.apply(wrapper,args);if(!retUnwrapped&&(isHybrid||result.__actions__)){var actions=result.__actions__||(result.__actions__=[]);actions.push({func:thru,args:[interceptor],thisArg:lodash})}return new LodashWrapper(result,chainAll)}return this.thru(interceptor)}}}),arrayEach(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(methodName){var func=(/^(?:replace|split)$/.test(methodName)?stringProto:arrayProto)[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:join|pop|replace|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;return retUnwrapped&&!this.__chain__?func.apply(this.value(),args):this[chainName](function(value){return func.apply(value,args)})}}),baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name,names=realNames[key]||(realNames[key]=[]);names.push({name:methodName,func:lodashFunc})}}),realNames[createHybridWrapper(null,BIND_KEY_FLAG).name]=[{name:"wrapper",func:null}],LazyWrapper.prototype.clone=lazyClone,LazyWrapper.prototype.reverse=lazyReverse,LazyWrapper.prototype.value=lazyValue,lodash.prototype.chain=wrapperChain,lodash.prototype.commit=wrapperCommit,lodash.prototype.plant=wrapperPlant,lodash.prototype.reverse=wrapperReverse,lodash.prototype.toString=wrapperToString,lodash.prototype.run=lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue,lodash.prototype.collect=lodash.prototype.map,lodash.prototype.head=lodash.prototype.first,lodash.prototype.select=lodash.prototype.filter,lodash.prototype.tail=lodash.prototype.rest,lodash}var undefined,VERSION="3.6.0",BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_BOUND_FLAG=4,CURRY_FLAG=8,CURRY_RIGHT_FLAG=16,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64,ARY_FLAG=128,REARG_FLAG=256,DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...",HOT_COUNT=150,HOT_SPAN=16,LAZY_DROP_WHILE_FLAG=0,LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2,FUNC_ERROR_TEXT="Expected a function",PLACEHOLDER="__lodash_placeholder__",argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEscapedHtml=/&(?:amp|lt|gt|quot|#39|#96);/g,reUnescapedHtml=/[&<>"'`]/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source),reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g,reComboMarks=/[\u0300-\u036f\ufe20-\ufe23]/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reFlags=/\w*$/,reHexPrefix=/^0[xX]/,reHostCtor=/^\[object .+?Constructor\]$/,reLatin1=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,reNoMatch=/($^)/,reRegExpChars=/[.*+?^${}()|[\]\/\\]/g,reHasRegExpChars=RegExp(reRegExpChars.source),reUnescapedString=/['\n\r\u2028\u2029\\]/g,reWords=function(){var upper="[A-Z\\xc0-\\xd6\\xd8-\\xde]",lower="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(upper+"+(?="+upper+lower+")|"+upper+"?"+lower+"|"+upper+"+|[0-9]+","g")}(),whitespace=" 	\f\n\r\u2028\u2029",contextProps=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"],templateCounter=-1,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[stringTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[mapTag]=cloneableTags[setTag]=cloneableTags[weakMapTag]=!1;var debounceOptions={leading:!1,maxWait:0,trailing:!1},deburredLetters={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},objectTypes={"function":!0,object:!0},stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,freeGlobal=freeExports&&freeModule&&"object"==typeof global&&global,freeSelf=objectTypes[typeof self]&&self&&self.Object&&self,freeWindow=objectTypes[typeof window]&&window&&window.Object&&window,moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports,root=freeGlobal||freeWindow!==(this&&this.window)&&freeWindow||freeSelf||this,_=runInContext();
"function"==typeof define&&"object"==typeof define.amd&&define.amd?(root._=_,define(function(){return _})):freeExports&&freeModule?moduleExports?(freeModule.exports=_)._=_:freeExports._=_:root._=_}).call(this);
                (function(){function merge(){var i,args=arguments,len,ret={},doCopy=function(copy,original){var value,key;"object"!=typeof copy&&(copy={});for(key in original)original.hasOwnProperty(key)&&(value=original[key],copy[key]=value&&"object"==typeof value&&"[object Array]"!==Object.prototype.toString.call(value)&&"renderTo"!==key&&"number"!=typeof value.nodeType?doCopy(copy[key]||{},value):original[key]);return copy};for(args[0]===!0&&(ret=args[1],args=Array.prototype.slice.call(args,2)),len=args.length,i=0;len>i;i++)ret=doCopy(ret,args[i]);return ret}function pInt(s,mag){return parseInt(s,mag||10)}function isString(s){return"string"==typeof s}function isObject(obj){return obj&&"object"==typeof obj}function isArray(obj){return"[object Array]"===Object.prototype.toString.call(obj)}function isNumber(n){return"number"==typeof n}function log2lin(num){return math.log(num)/math.LN10}function lin2log(num){return math.pow(10,num)}function erase(arr,item){for(var i=arr.length;i--;)if(arr[i]===item){arr.splice(i,1);break}}function defined(obj){return obj!==UNDEFINED&&null!==obj}function attr(elem,prop,value){var key,ret;if(isString(prop))defined(value)?elem.setAttribute(prop,value):elem&&elem.getAttribute&&(ret=elem.getAttribute(prop));else if(defined(prop)&&isObject(prop))for(key in prop)elem.setAttribute(key,prop[key]);return ret}function splat(obj){return isArray(obj)?obj:[obj]}function css(el,styles){isIE&&!hasSVG&&styles&&styles.opacity!==UNDEFINED&&(styles.filter="alpha(opacity="+100*styles.opacity+")"),extend(el.style,styles)}function createElement(tag,attribs,styles,parent,nopad){var el=doc.createElement(tag);return attribs&&extend(el,attribs),nopad&&css(el,{padding:0,border:NONE,margin:0}),styles&&css(el,styles),parent&&parent.appendChild(el),el}function extendClass(parent,members){var object=function(){return UNDEFINED};return object.prototype=new parent,extend(object.prototype,members),object}function pad(number,length){return Array((length||2)+1-(number+"").length).join(0)+number}function getTZOffset(timestamp){return 6e4*(getTimezoneOffset&&getTimezoneOffset(timestamp)||timezoneOffset||0)}function formatSingle(format,val){var floatRegex=/f$/,decRegex=/\.([0-9])/,lang=defaultOptions.lang,decimals;return floatRegex.test(format)?(decimals=format.match(decRegex),decimals=decimals?decimals[1]:-1,null!==val&&(val=Highcharts.numberFormat(val,decimals,lang.decimalPoint,format.indexOf(",")>-1?lang.thousandsSep:""))):val=dateFormat(format,val),val}function format(str,ctx){for(var splitter="{",isInside=!1,segment,valueAndFormat,path,i,len,ret=[],val,index;-1!==(index=str.indexOf(splitter));){if(segment=str.slice(0,index),isInside){for(valueAndFormat=segment.split(":"),path=valueAndFormat.shift().split("."),len=path.length,val=ctx,i=0;len>i;i++)val=val[path[i]];valueAndFormat.length&&(val=formatSingle(valueAndFormat.join(":"),val)),ret.push(val)}else ret.push(segment);str=str.slice(index+1),isInside=!isInside,splitter=isInside?"}":"{"}return ret.push(str),ret.join("")}function getMagnitude(num){return math.pow(10,mathFloor(math.log(num)/math.LN10))}function normalizeTickInterval(interval,multiples,magnitude,allowDecimals,preventExceed){var normalized,i,retInterval=interval;for(magnitude=pick(magnitude,1),normalized=interval/magnitude,multiples||(multiples=[1,2,2.5,5,10],allowDecimals===!1&&(1===magnitude?multiples=[1,2,5,10]:.1>=magnitude&&(multiples=[1/magnitude]))),i=0;multiples.length>i&&(retInterval=multiples[i],!(preventExceed&&retInterval*magnitude>=interval||!preventExceed&&(multiples[i]+(multiples[i+1]||multiples[i]))/2>=normalized));i++);return retInterval*=magnitude}function stableSort(arr,sortFunction){var length=arr.length,sortValue,i;for(i=0;length>i;i++)arr[i].ss_i=i;for(arr.sort(function(a,b){return sortValue=sortFunction(a,b),0===sortValue?a.ss_i-b.ss_i:sortValue}),i=0;length>i;i++)delete arr[i].ss_i}function arrayMin(data){for(var i=data.length,min=data[0];i--;)min>data[i]&&(min=data[i]);return min}function arrayMax(data){for(var i=data.length,max=data[0];i--;)data[i]>max&&(max=data[i]);return max}function destroyObjectProperties(obj,except){var n;for(n in obj)obj[n]&&obj[n]!==except&&obj[n].destroy&&obj[n].destroy(),delete obj[n]}function discardElement(element){garbageBin||(garbageBin=createElement(DIV)),element&&garbageBin.appendChild(element),garbageBin.innerHTML=""}function error(code,stop){var msg="Highcharts error #"+code+": www.highcharts.com/errors/"+code;if(stop)throw msg;win.console&&console.log(msg)}function correctFloat(num){return parseFloat(num.toPrecision(14))}function setAnimation(animation,chart){globalAnimation=pick(animation,chart.animation)}function setTimeMethods(){var globalOptions=defaultOptions.global,useUTC=globalOptions.useUTC,GET=useUTC?"getUTC":"get",SET=useUTC?"setUTC":"set";Date=globalOptions.Date||window.Date,timezoneOffset=useUTC&&globalOptions.timezoneOffset,getTimezoneOffset=useUTC&&globalOptions.getTimezoneOffset,makeTime=function(year,month,date,hours,minutes,seconds){var d;return useUTC?(d=Date.UTC.apply(0,arguments),d+=getTZOffset(d)):d=new Date(year,month,pick(date,1),pick(hours,0),pick(minutes,0),pick(seconds,0)).getTime(),d},getMinutes=GET+"Minutes",getHours=GET+"Hours",getDay=GET+"Day",getDate=GET+"Date",getMonth=GET+"Month",getFullYear=GET+"FullYear",setMinutes=SET+"Minutes",setHours=SET+"Hours",setDate=SET+"Date",setMonth=SET+"Month",setFullYear=SET+"FullYear"}function setOptions(options){return defaultOptions=merge(!0,defaultOptions,options),setTimeMethods(),defaultOptions}function getOptions(){return defaultOptions}function SVGElement(){}function Tick(axis,pos,type,noLabel){this.axis=axis,this.pos=pos,this.type=type||"",this.isNew=!0,type||noLabel||this.addLabel()}function StackItem(axis,options,isNegative,x,stackOption){var inverted=axis.chart.inverted;this.axis=axis,this.isNegative=isNegative,this.options=options,this.x=x,this.total=null,this.points={},this.stack=stackOption,this.alignOptions={align:options.align||(inverted?isNegative?"left":"right":"center"),verticalAlign:options.verticalAlign||(inverted?"middle":isNegative?"bottom":"top"),y:pick(options.y,inverted?4:isNegative?14:-6),x:pick(options.x,inverted?isNegative?-6:6:0)},this.textAlign=options.textAlign||(inverted?isNegative?"right":"left":"center")}var UNDEFINED,doc=document,win=window,math=Math,mathRound=math.round,mathFloor=math.floor,mathCeil=math.ceil,mathMax=math.max,mathMin=math.min,mathAbs=math.abs,mathCos=math.cos,mathSin=math.sin,mathPI=math.PI,deg2rad=2*mathPI/360,userAgent=navigator.userAgent,isOpera=win.opera,isIE=/(msie|trident)/i.test(userAgent)&&!isOpera,docMode8=8===doc.documentMode,isWebKit=/AppleWebKit/.test(userAgent),isFirefox=/Firefox/.test(userAgent),isTouchDevice=/(Mobile|Android|Windows Phone)/.test(userAgent),SVG_NS="http://www.w3.org/2000/svg",hasSVG=!!doc.createElementNS&&!!doc.createElementNS(SVG_NS,"svg").createSVGRect,hasBidiBug=isFirefox&&4>parseInt(userAgent.split("Firefox/")[1],10),useCanVG=!hasSVG&&!isIE&&!!doc.createElement("canvas").getContext,Renderer,hasTouch,symbolSizes={},idCounter=0,garbageBin,defaultOptions,dateFormat,globalAnimation,pathAnim,timeUnits,noop=function(){return UNDEFINED},charts=[],chartCount=0,PRODUCT="Highcharts",VERSION="4.1.4",DIV="div",ABSOLUTE="absolute",RELATIVE="relative",HIDDEN="hidden",PREFIX="highcharts-",VISIBLE="visible",PX="px",NONE="none",M="M",L="L",numRegex=/^[0-9]+$/,NORMAL_STATE="",HOVER_STATE="hover",SELECT_STATE="select",marginNames=["plotTop","marginRight","marginBottom","plotLeft"],AxisPlotLineOrBandExtension,STROKE_WIDTH="stroke-width",Date,makeTime,timezoneOffset,getTimezoneOffset,getMinutes,getHours,getDay,getDate,getMonth,getFullYear,setMinutes,setHours,setDate,setMonth,setFullYear,seriesTypes={},Highcharts;Highcharts=win.Highcharts=win.Highcharts?error(16,!0):{},Highcharts.seriesTypes=seriesTypes;var extend=Highcharts.extend=function(a,b){var n;a||(a={});for(n in b)a[n]=b[n];return a},pick=Highcharts.pick=function(){var args=arguments,i,arg,length=args.length;for(i=0;length>i;i++)if(arg=args[i],arg!==UNDEFINED&&null!==arg)return arg},wrap=Highcharts.wrap=function(obj,method,func){var proceed=obj[method];obj[method]=function(){var args=Array.prototype.slice.call(arguments);return args.unshift(proceed),func.apply(this,args)}};dateFormat=function(format,timestamp,capitalize){if(!defined(timestamp)||isNaN(timestamp))return"Invalid date";format=pick(format,"%Y-%m-%d %H:%M:%S");var date=new Date(timestamp-getTZOffset(timestamp)),key,hours=date[getHours](),day=date[getDay](),dayOfMonth=date[getDate](),month=date[getMonth](),fullYear=date[getFullYear](),lang=defaultOptions.lang,langWeekdays=lang.weekdays,replacements=extend({a:langWeekdays[day].substr(0,3),A:langWeekdays[day],d:pad(dayOfMonth),e:dayOfMonth,w:day,b:lang.shortMonths[month],B:lang.months[month],m:pad(month+1),y:(""+fullYear).substr(2,2),Y:fullYear,H:pad(hours),I:pad(hours%12||12),l:hours%12||12,M:pad(date[getMinutes]()),p:12>hours?"AM":"PM",P:12>hours?"am":"pm",S:pad(date.getSeconds()),L:pad(mathRound(timestamp%1e3),3)},Highcharts.dateFormats);for(key in replacements)for(;-1!==format.indexOf("%"+key);)format=format.replace("%"+key,"function"==typeof replacements[key]?replacements[key](timestamp):replacements[key]);return capitalize?format.substr(0,1).toUpperCase()+format.substr(1):format},timeUnits={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},Highcharts.numberFormat=function(number,decimals,decPoint,thousandsSep){var lang=defaultOptions.lang,n=+number||0,c=-1===decimals?mathMin(((""+n).split(".")[1]||"").length,20):isNaN(decimals=mathAbs(decimals))?2:decimals,d=void 0===decPoint?lang.decimalPoint:decPoint,t=void 0===thousandsSep?lang.thousandsSep:thousandsSep,s=0>n?"-":"",i=pInt(n=mathAbs(n).toFixed(c))+"",j=i.length>3?i.length%3:0;return s+(j?i.substr(0,j)+t:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+t)+(c?d+mathAbs(n-i).toFixed(c).slice(2):"")},pathAnim={init:function(elem,fromD,toD){fromD=fromD||"";var shift=elem.shift,bezier=fromD.indexOf("C")>-1,numParams=bezier?7:3,endLength,slice,i,start=fromD.split(" "),end=[].concat(toD),startBaseLine,endBaseLine,sixify=function(arr){for(i=arr.length;i--;)arr[i]===M&&arr.splice(i+1,0,arr[i+1],arr[i+2],arr[i+1],arr[i+2])};if(bezier&&(sixify(start),sixify(end)),elem.isArea&&(startBaseLine=start.splice(start.length-6,6),endBaseLine=end.splice(end.length-6,6)),end.length/numParams>=shift&&start.length===end.length)for(;shift--;)end=[].concat(end).splice(0,numParams).concat(end);if(elem.shift=0,start.length)for(endLength=end.length;endLength>start.length;)slice=[].concat(start).splice(start.length-numParams,numParams),bezier&&(slice[numParams-6]=slice[numParams-2],slice[numParams-5]=slice[numParams-1]),start=start.concat(slice);return startBaseLine&&(start=start.concat(startBaseLine),end=end.concat(endBaseLine)),[start,end]},step:function(start,end,pos,complete){var ret=[],i=start.length,startVal;if(1===pos)ret=complete;else if(i===end.length&&1>pos)for(;i--;)startVal=parseFloat(start[i]),ret[i]=isNaN(startVal)?start[i]:pos*parseFloat(end[i]-startVal)+startVal;else ret=end;return ret}},function($){win.HighchartsAdapter=win.HighchartsAdapter||$&&{init:function(pathAnim){var Fx=$.fx;$.extend($.easing,{easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b}}),$.each(["cur","_default","width","height","opacity"],function(i,fn){var obj=Fx.step,base;"cur"===fn?obj=Fx.prototype:"_default"===fn&&$.Tween&&(obj=$.Tween.propHooks[fn],fn="set"),base=obj[fn],base&&(obj[fn]=function(fx){var elem;return fx=i?fx:this,"align"!==fx.prop?(elem=fx.elem,elem.attr?elem.attr(fx.prop,"cur"===fn?UNDEFINED:fx.now):base.apply(this,arguments)):void 0})}),wrap($.cssHooks.opacity,"get",function(proceed,elem,computed){return elem.attr?elem.opacity||0:proceed.call(this,elem,computed)}),this.addAnimSetter("d",function(fx){var elem=fx.elem,ends;fx.started||(ends=pathAnim.init(elem,elem.d,elem.toD),fx.start=ends[0],fx.end=ends[1],fx.started=!0),elem.attr("d",pathAnim.step(fx.start,fx.end,fx.pos,elem.toD))}),this.each=Array.prototype.forEach?function(arr,fn){return Array.prototype.forEach.call(arr,fn)}:function(arr,fn){var i,len=arr.length;for(i=0;len>i;i++)if(fn.call(arr[i],arr[i],i,arr)===!1)return i},$.fn.highcharts=function(){var constr="Chart",args=arguments,options,ret,chart;return this[0]&&(isString(args[0])&&(constr=args[0],args=Array.prototype.slice.call(args,1)),options=args[0],options!==UNDEFINED&&(options.chart=options.chart||{},options.chart.renderTo=this[0],chart=new Highcharts[constr](options,args[1]),ret=this),options===UNDEFINED&&(ret=charts[attr(this[0],"data-highcharts-chart")])),ret}},addAnimSetter:function(prop,setter){$.Tween?$.Tween.propHooks[prop]={set:setter}:$.fx.step[prop]=setter},getScript:$.getScript,inArray:$.inArray,adapterRun:function(elem,method){return $(elem)[method]()},grep:$.grep,map:function(arr,fn){for(var results=[],i=0,len=arr.length;len>i;i++)results[i]=fn.call(arr[i],arr[i],i,arr);return results},offset:function(el){return $(el).offset()},addEvent:function(el,event,fn){$(el).bind(event,fn)},removeEvent:function(el,eventType,handler){var func=doc.removeEventListener?"removeEventListener":"detachEvent";doc[func]&&el&&!el[func]&&(el[func]=function(){}),$(el).unbind(eventType,handler)},fireEvent:function(el,type,eventArguments,defaultFunction){var event=$.Event(type),detachedType="detached"+type,defaultPrevented;!isIE&&eventArguments&&(delete eventArguments.layerX,delete eventArguments.layerY,delete eventArguments.returnValue),extend(event,eventArguments),el[type]&&(el[detachedType]=el[type],el[type]=null),$.each(["preventDefault","stopPropagation"],function(i,fn){var base=event[fn];event[fn]=function(){try{base.call(event)}catch(e){"preventDefault"===fn&&(defaultPrevented=!0)}}}),$(el).trigger(event),el[detachedType]&&(el[type]=el[detachedType],el[detachedType]=null),!defaultFunction||event.isDefaultPrevented()||defaultPrevented||defaultFunction(event)},washMouseEvent:function(e){var ret=e.originalEvent||e;return ret.pageX===UNDEFINED&&(ret.pageX=e.pageX,ret.pageY=e.pageY),ret},animate:function(el,params,options){var $el=$(el);el.style||(el.style={}),params.d&&(el.toD=params.d,params.d=1),$el.stop(),params.opacity!==UNDEFINED&&el.attr&&(params.opacity+="px"),el.hasAnim=1,$el.animate(params,options)},stop:function(el){el.hasAnim&&$(el).stop()}}}(win.jQuery);var globalAdapter=win.HighchartsAdapter,adapter=globalAdapter||{};globalAdapter&&globalAdapter.init.call(globalAdapter,pathAnim);var adapterRun=adapter.adapterRun,getScript=adapter.getScript,inArray=adapter.inArray,each=Highcharts.each=adapter.each,grep=adapter.grep,offset=adapter.offset,map=adapter.map,addEvent=adapter.addEvent,removeEvent=adapter.removeEvent,fireEvent=adapter.fireEvent,washMouseEvent=adapter.washMouseEvent,animate=adapter.animate,stop=adapter.stop;defaultOptions={colors:["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/4.1.4/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/4.1.4/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":Highcharts.numberFormat(this.y,-1)},style:{color:"contrast",fontSize:"11px",fontWeight:"bold",textShadow:"0 0 6px contrast, 0 0 3px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:ABSOLUTE,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:ABSOLUTE,width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:RELATIVE,top:"45%"},style:{position:ABSOLUTE,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:hasSVG,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}"></span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:isTouchDevice?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var defaultPlotOptions=defaultOptions.plotOptions,defaultSeriesOptions=defaultPlotOptions.line;setTimeMethods();var rgbaRegEx=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,hexRegEx=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,rgbRegEx=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,Color=function(input){function init(input){input&&input.stops?stops=map(input.stops,function(stop){return Color(stop[1])}):(result=rgbaRegEx.exec(input),result?rgba=[pInt(result[1]),pInt(result[2]),pInt(result[3]),parseFloat(result[4],10)]:(result=hexRegEx.exec(input),result?rgba=[pInt(result[1],16),pInt(result[2],16),pInt(result[3],16),1]:(result=rgbRegEx.exec(input),result&&(rgba=[pInt(result[1]),pInt(result[2]),pInt(result[3]),1]))))}function get(format){var ret;return stops?(ret=merge(input),ret.stops=[].concat(ret.stops),each(stops,function(stop,i){ret.stops[i]=[ret.stops[i][0],stop.get(format)]})):ret=rgba&&!isNaN(rgba[0])?"rgb"===format?"rgb("+rgba[0]+","+rgba[1]+","+rgba[2]+")":"a"===format?rgba[3]:"rgba("+rgba.join(",")+")":input,ret}function brighten(alpha){if(stops)each(stops,function(stop){stop.brighten(alpha)});else if(isNumber(alpha)&&0!==alpha){var i;for(i=0;3>i;i++)rgba[i]+=pInt(255*alpha),0>rgba[i]&&(rgba[i]=0),rgba[i]>255&&(rgba[i]=255)}return this}function setOpacity(alpha){return rgba[3]=alpha,this}var rgba=[],result,stops;return init(input),{get:get,brighten:brighten,rgba:rgba,setOpacity:setOpacity,raw:input}};SVGElement.prototype={opacity:1,textProps:["fontSize","fontWeight","fontFamily","color","lineHeight","width","textDecoration","textShadow"],init:function(renderer,nodeName){var wrapper=this;wrapper.element="span"===nodeName?createElement(nodeName):doc.createElementNS(SVG_NS,nodeName),wrapper.renderer=renderer},animate:function(params,options,complete){var animOptions=pick(options,globalAnimation,!0);return stop(this),animOptions?(animOptions=merge(animOptions,{}),complete&&(animOptions.complete=complete),animate(this,params,animOptions)):(this.attr(params),complete&&complete()),this},colorGradient:function(color,prop,elem){var renderer=this.renderer,colorObject,gradName,gradAttr,gradients,gradientObject,stops,stopColor,stopOpacity,radialReference,n,id,key=[];if(color.linearGradient?gradName="linearGradient":color.radialGradient&&(gradName="radialGradient"),gradName){gradAttr=color[gradName],gradients=renderer.gradients,stops=color.stops,radialReference=elem.radialReference,isArray(gradAttr)&&(color[gradName]=gradAttr={x1:gradAttr[0],y1:gradAttr[1],x2:gradAttr[2],y2:gradAttr[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===gradName&&radialReference&&!defined(gradAttr.gradientUnits)&&(gradAttr=merge(gradAttr,{cx:radialReference[0]-radialReference[2]/2+gradAttr.cx*radialReference[2],cy:radialReference[1]-radialReference[2]/2+gradAttr.cy*radialReference[2],r:gradAttr.r*radialReference[2],gradientUnits:"userSpaceOnUse"}));for(n in gradAttr)"id"!==n&&key.push(n,gradAttr[n]);for(n in stops)key.push(stops[n]);key=key.join(","),gradients[key]?id=gradients[key].attr("id"):(gradAttr.id=id=PREFIX+idCounter++,gradients[key]=gradientObject=renderer.createElement(gradName).attr(gradAttr).add(renderer.defs),gradientObject.stops=[],each(stops,function(stop){var stopObject;0===stop[1].indexOf("rgba")?(colorObject=Color(stop[1]),stopColor=colorObject.get("rgb"),stopOpacity=colorObject.get("a")):(stopColor=stop[1],stopOpacity=1),stopObject=renderer.createElement("stop").attr({offset:stop[0],"stop-color":stopColor,"stop-opacity":stopOpacity}).add(gradientObject),gradientObject.stops.push(stopObject)})),elem.setAttribute(prop,"url("+renderer.url+"#"+id+")")}},applyTextShadow:function(textShadow){var elem=this.element,tspans,hasContrast=-1!==textShadow.indexOf("contrast"),supports=this.renderer.forExport||elem.style.textShadow!==UNDEFINED&&!isIE;hasContrast&&(textShadow=textShadow.replace(/contrast/g,this.renderer.getContrast(elem.style.fill))),supports?hasContrast&&css(elem,{textShadow:textShadow}):(this.fakeTS=!0,this.ySetter=this.xSetter,tspans=[].slice.call(elem.getElementsByTagName("tspan")),each(textShadow.split(/\s?,\s?/g),function(textShadow){var firstChild=elem.firstChild,color,strokeWidth;textShadow=textShadow.split(" "),color=textShadow[textShadow.length-1],strokeWidth=textShadow[textShadow.length-2],strokeWidth&&each(tspans,function(tspan,y){var clone;0===y&&(tspan.setAttribute("x",elem.getAttribute("x")),y=elem.getAttribute("y"),tspan.setAttribute("y",y||0),null===y&&elem.setAttribute("y",0)),clone=tspan.cloneNode(1),attr(clone,{"class":PREFIX+"text-shadow",fill:color,stroke:color,"stroke-opacity":1/mathMax(pInt(strokeWidth),3),"stroke-width":strokeWidth,"stroke-linejoin":"round"}),elem.insertBefore(clone,firstChild)})}))},attr:function(hash,val){var key,value,element=this.element,hasSetSymbolSize,ret=this,skipAttr;if("string"==typeof hash&&val!==UNDEFINED&&(key=hash,hash={},hash[key]=val),"string"==typeof hash)ret=(this[hash+"Getter"]||this._defaultGetter).call(this,hash,element);else{for(key in hash)value=hash[key],skipAttr=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(key)&&(hasSetSymbolSize||(this.symbolAttr(hash),hasSetSymbolSize=!0),skipAttr=!0),!this.rotation||"x"!==key&&"y"!==key||(this.doTransform=!0),skipAttr||(this[key+"Setter"]||this._defaultSetter).call(this,value,key,element),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(key)&&this.updateShadows(key,value);this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return ret},updateShadows:function(key,value){for(var shadows=this.shadows,i=shadows.length;i--;)shadows[i].setAttribute(key,"height"===key?mathMax(value-(shadows[i].cutHeight||0),0):"d"===key?this.d:value)},addClass:function(className){var element=this.element,currentClassName=attr(element,"class")||"";return-1===currentClassName.indexOf(className)&&attr(element,"class",currentClassName+" "+className),this},symbolAttr:function(hash){var wrapper=this;each(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(key){wrapper[key]=pick(hash[key],wrapper[key])}),wrapper.attr({d:wrapper.renderer.symbols[wrapper.symbolName](wrapper.x,wrapper.y,wrapper.width,wrapper.height,wrapper)})},clip:function(clipRect){return this.attr("clip-path",clipRect?"url("+this.renderer.url+"#"+clipRect.id+")":NONE)},crisp:function(rect){var wrapper=this,key,attribs={},normalizer,strokeWidth=rect.strokeWidth||wrapper.strokeWidth||0;normalizer=mathRound(strokeWidth)%2/2,rect.x=mathFloor(rect.x||wrapper.x||0)+normalizer,rect.y=mathFloor(rect.y||wrapper.y||0)+normalizer,rect.width=mathFloor((rect.width||wrapper.width||0)-2*normalizer),rect.height=mathFloor((rect.height||wrapper.height||0)-2*normalizer),rect.strokeWidth=strokeWidth;for(key in rect)wrapper[key]!==rect[key]&&(wrapper[key]=attribs[key]=rect[key]);return attribs},css:function(styles){var elemWrapper=this,oldStyles=elemWrapper.styles,newStyles={},elem=elemWrapper.element,textWidth,n,serializedCss="",hyphenate,hasNew=!oldStyles;if(styles&&styles.color&&(styles.fill=styles.color),oldStyles)for(n in styles)styles[n]!==oldStyles[n]&&(newStyles[n]=styles[n],hasNew=!0);if(hasNew){if(textWidth=elemWrapper.textWidth=styles&&styles.width&&"text"===elem.nodeName.toLowerCase()&&pInt(styles.width)||elemWrapper.textWidth,oldStyles&&(styles=extend(oldStyles,newStyles)),elemWrapper.styles=styles,textWidth&&(useCanVG||!hasSVG&&elemWrapper.renderer.forExport)&&delete styles.width,isIE&&!hasSVG)css(elemWrapper.element,styles);else{hyphenate=function(a,b){return"-"+b.toLowerCase()};for(n in styles)serializedCss+=n.replace(/([A-Z])/g,hyphenate)+":"+styles[n]+";";attr(elem,"style",serializedCss)}textWidth&&elemWrapper.added&&elemWrapper.renderer.buildText(elemWrapper)}return elemWrapper},on:function(eventType,handler){var svgElement=this,element=svgElement.element;return hasTouch&&"click"===eventType?(element.ontouchstart=function(e){svgElement.touchEventFired=Date.now(),e.preventDefault(),handler.call(element,e)},element.onclick=function(e){(-1===userAgent.indexOf("Android")||Date.now()-(svgElement.touchEventFired||0)>1100)&&handler.call(element,e)}):element["on"+eventType]=handler,this},setRadialReference:function(coordinates){return this.element.radialReference=coordinates,this},translate:function(x,y){return this.attr({translateX:x,translateY:y})},invert:function(){var wrapper=this;return wrapper.inverted=!0,wrapper.updateTransform(),wrapper},updateTransform:function(){var wrapper=this,translateX=wrapper.translateX||0,translateY=wrapper.translateY||0,scaleX=wrapper.scaleX,scaleY=wrapper.scaleY,inverted=wrapper.inverted,rotation=wrapper.rotation,element=wrapper.element,transform;inverted&&(translateX+=wrapper.attr("width"),translateY+=wrapper.attr("height")),transform=["translate("+translateX+","+translateY+")"],inverted?transform.push("rotate(90) scale(-1,1)"):rotation&&transform.push("rotate("+rotation+" "+(element.getAttribute("x")||0)+" "+(element.getAttribute("y")||0)+")"),(defined(scaleX)||defined(scaleY))&&transform.push("scale("+pick(scaleX,1)+" "+pick(scaleY,1)+")"),transform.length&&element.setAttribute("transform",transform.join(" "))},toFront:function(){var element=this.element;return element.parentNode.appendChild(element),this},align:function(alignOptions,alignByTranslate,box){var align,vAlign,x,y,attribs={},alignTo,renderer=this.renderer,alignedObjects=renderer.alignedObjects;return alignOptions?(this.alignOptions=alignOptions,this.alignByTranslate=alignByTranslate,(!box||isString(box))&&(this.alignTo=alignTo=box||"renderer",erase(alignedObjects,this),alignedObjects.push(this),box=null)):(alignOptions=this.alignOptions,alignByTranslate=this.alignByTranslate,alignTo=this.alignTo),box=pick(box,renderer[alignTo],renderer),align=alignOptions.align,vAlign=alignOptions.verticalAlign,x=(box.x||0)+(alignOptions.x||0),y=(box.y||0)+(alignOptions.y||0),("right"===align||"center"===align)&&(x+=(box.width-(alignOptions.width||0))/{right:1,center:2}[align]),attribs[alignByTranslate?"translateX":"x"]=mathRound(x),("bottom"===vAlign||"middle"===vAlign)&&(y+=(box.height-(alignOptions.height||0))/({bottom:1,middle:2}[vAlign]||1)),attribs[alignByTranslate?"translateY":"y"]=mathRound(y),this[this.placed?"animate":"attr"](attribs),this.placed=!0,this.alignAttr=attribs,this},getBBox:function(reload){var wrapper=this,bBox,renderer=wrapper.renderer,width,height,rotation=wrapper.rotation,element=wrapper.element,styles=wrapper.styles,rad=rotation*deg2rad,textStr=wrapper.textStr,textShadow,elemStyle=element.style,toggleTextShadowShim,cacheKey;if(textStr!==UNDEFINED&&(cacheKey=["",rotation||0,styles&&styles.fontSize,element.style.width].join(","),cacheKey=""===textStr||numRegex.test(textStr)?"num:"+(""+textStr).length+cacheKey:textStr+cacheKey),cacheKey&&!reload&&(bBox=renderer.cache[cacheKey]),!bBox){if(element.namespaceURI===SVG_NS||renderer.forExport){try{toggleTextShadowShim=this.fakeTS&&function(display){each(element.querySelectorAll("."+PREFIX+"text-shadow"),function(tspan){tspan.style.display=display})},isFirefox&&elemStyle.textShadow?(textShadow=elemStyle.textShadow,elemStyle.textShadow=""):toggleTextShadowShim&&toggleTextShadowShim(NONE),bBox=element.getBBox?extend({},element.getBBox()):{width:element.offsetWidth,height:element.offsetHeight},textShadow?elemStyle.textShadow=textShadow:toggleTextShadowShim&&toggleTextShadowShim("")}catch(e){}(!bBox||0>bBox.width)&&(bBox={width:0,height:0})}else bBox=wrapper.htmlGetBBox();renderer.isSVG&&(width=bBox.width,height=bBox.height,isIE&&styles&&"11px"===styles.fontSize&&"16.9"===height.toPrecision(3)&&(bBox.height=height=14),rotation&&(bBox.width=mathAbs(height*mathSin(rad))+mathAbs(width*mathCos(rad)),bBox.height=mathAbs(height*mathCos(rad))+mathAbs(width*mathSin(rad)))),renderer.cache[cacheKey]=bBox}return bBox},show:function(inherit){return inherit&&this.element.namespaceURI===SVG_NS?this.element.removeAttribute("visibility"):this.attr({visibility:inherit?"inherit":VISIBLE}),this},hide:function(){return this.attr({visibility:HIDDEN})},fadeOut:function(duration){var elemWrapper=this;elemWrapper.animate({opacity:0},{duration:duration||150,complete:function(){elemWrapper.attr({y:-9999})}})},add:function(parent){var renderer=this.renderer,element=this.element,inserted;return parent&&(this.parentGroup=parent),this.parentInverted=parent&&parent.inverted,void 0!==this.textStr&&renderer.buildText(this),this.added=!0,(!parent||parent.handleZ||this.zIndex)&&(inserted=this.zIndexSetter()),inserted||(parent?parent.element:renderer.box).appendChild(element),this.onAdd&&this.onAdd(),this},safeRemoveChild:function(element){var parentNode=element.parentNode;parentNode&&parentNode.removeChild(element)},destroy:function(){var wrapper=this,element=wrapper.element||{},shadows=wrapper.shadows,parentToClean=wrapper.renderer.isSVG&&"SPAN"===element.nodeName&&wrapper.parentGroup,grandParent,key,i;if(element.onclick=element.onmouseout=element.onmouseover=element.onmousemove=element.point=null,stop(wrapper),wrapper.clipPath&&(wrapper.clipPath=wrapper.clipPath.destroy()),wrapper.stops){for(i=0;wrapper.stops.length>i;i++)wrapper.stops[i]=wrapper.stops[i].destroy();wrapper.stops=null}for(wrapper.safeRemoveChild(element),shadows&&each(shadows,function(shadow){wrapper.safeRemoveChild(shadow)});parentToClean&&parentToClean.div&&0===parentToClean.div.childNodes.length;)grandParent=parentToClean.parentGroup,wrapper.safeRemoveChild(parentToClean.div),delete parentToClean.div,parentToClean=grandParent;wrapper.alignTo&&erase(wrapper.renderer.alignedObjects,wrapper);for(key in wrapper)delete wrapper[key];return null},shadow:function(shadowOptions,group,cutOff){var shadows=[],i,shadow,element=this.element,strokeWidth,shadowWidth,shadowElementOpacity,transform;
if(shadowOptions){for(shadowWidth=pick(shadowOptions.width,3),shadowElementOpacity=(shadowOptions.opacity||.15)/shadowWidth,transform=this.parentInverted?"(-1,-1)":"("+pick(shadowOptions.offsetX,1)+", "+pick(shadowOptions.offsetY,1)+")",i=1;shadowWidth>=i;i++)shadow=element.cloneNode(0),strokeWidth=2*shadowWidth+1-2*i,attr(shadow,{isShadow:"true",stroke:shadowOptions.color||"black","stroke-opacity":shadowElementOpacity*i,"stroke-width":strokeWidth,transform:"translate"+transform,fill:NONE}),cutOff&&(attr(shadow,"height",mathMax(attr(shadow,"height")-strokeWidth,0)),shadow.cutHeight=strokeWidth),group?group.element.appendChild(shadow):element.parentNode.insertBefore(shadow,element),shadows.push(shadow);this.shadows=shadows}return this},xGetter:function(key){return"circle"===this.element.nodeName&&(key={x:"cx",y:"cy"}[key]||key),this._defaultGetter(key)},_defaultGetter:function(key){var ret=pick(this[key],this.element?this.element.getAttribute(key):null,0);return/^[\-0-9\.]+$/.test(ret)&&(ret=parseFloat(ret)),ret},dSetter:function(value,key,element){value&&value.join&&(value=value.join(" ")),/(NaN| {2}|^$)/.test(value)&&(value="M 0 0"),element.setAttribute(key,value),this[key]=value},dashstyleSetter:function(value){var i;if(value=value&&value.toLowerCase()){for(value=value.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),i=value.length;i--;)value[i]=pInt(value[i])*this["stroke-width"];value=value.join(",").replace("NaN","none"),this.element.setAttribute("stroke-dasharray",value)}},alignSetter:function(value){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[value])},opacitySetter:function(value,key,element){this[key]=value,element.setAttribute(key,value)},titleSetter:function(value){var titleNode=this.element.getElementsByTagName("title")[0];titleNode||(titleNode=doc.createElementNS(SVG_NS,"title"),this.element.appendChild(titleNode)),titleNode.textContent=(pick(value)+"").replace(/<[^>]*>/g,"")},textSetter:function(value){value!==this.textStr&&(delete this.bBox,this.textStr=value,this.added&&this.renderer.buildText(this))},fillSetter:function(value,key,element){"string"==typeof value?element.setAttribute(key,value):value&&this.colorGradient(value,key,element)},zIndexSetter:function(value,key){var renderer=this.renderer,parentGroup=this.parentGroup,parentWrapper=parentGroup||renderer,parentNode=parentWrapper.element||renderer.box,childNodes,otherElement,otherZIndex,element=this.element,inserted,run=this.added,i;if(defined(value)&&(element.setAttribute(key,value),value=+value,this[key]===value&&(run=!1),this[key]=value),run){for(value=this.zIndex,value&&parentGroup&&(parentGroup.handleZ=!0),childNodes=parentNode.childNodes,i=0;childNodes.length>i&&!inserted;i++)otherElement=childNodes[i],otherZIndex=attr(otherElement,"zIndex"),otherElement!==element&&(pInt(otherZIndex)>value||!defined(value)&&defined(otherZIndex))&&(parentNode.insertBefore(element,otherElement),inserted=!0);inserted||parentNode.appendChild(element)}return inserted},_defaultSetter:function(value,key,element){element.setAttribute(key,value)}},SVGElement.prototype.yGetter=SVGElement.prototype.xGetter,SVGElement.prototype.translateXSetter=SVGElement.prototype.translateYSetter=SVGElement.prototype.rotationSetter=SVGElement.prototype.verticalAlignSetter=SVGElement.prototype.scaleXSetter=SVGElement.prototype.scaleYSetter=function(value,key){this[key]=value,this.doTransform=!0},SVGElement.prototype["stroke-widthSetter"]=SVGElement.prototype.strokeSetter=function(value,key,element){this[key]=value,this.stroke&&this["stroke-width"]?(this.strokeWidth=this["stroke-width"],SVGElement.prototype.fillSetter.call(this,this.stroke,"stroke",element),element.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===key&&0===value&&this.hasStroke&&(element.removeAttribute("stroke"),this.hasStroke=!1)};var SVGRenderer=function(){this.init.apply(this,arguments)};SVGRenderer.prototype={Element:SVGElement,init:function(container,width,height,style,forExport){var renderer=this,loc=location,boxWrapper,element,desc;boxWrapper=renderer.createElement("svg").attr({version:"1.1"}).css(this.getStyle(style)),element=boxWrapper.element,container.appendChild(element),-1===container.innerHTML.indexOf("xmlns")&&attr(element,"xmlns",SVG_NS),renderer.isSVG=!0,renderer.box=element,renderer.boxWrapper=boxWrapper,renderer.alignedObjects=[],renderer.url=(isFirefox||isWebKit)&&doc.getElementsByTagName("base").length?loc.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",desc=this.createElement("desc").add(),desc.element.appendChild(doc.createTextNode("Created with "+PRODUCT+" "+VERSION)),renderer.defs=this.createElement("defs").add(),renderer.forExport=forExport,renderer.gradients={},renderer.cache={},renderer.setSize(width,height,!1);var subPixelFix,rect;isFirefox&&container.getBoundingClientRect&&(renderer.subPixelFix=subPixelFix=function(){css(container,{left:0,top:0}),rect=container.getBoundingClientRect(),css(container,{left:mathCeil(rect.left)-rect.left+PX,top:mathCeil(rect.top)-rect.top+PX})},subPixelFix(),addEvent(win,"resize",subPixelFix))},getStyle:function(style){return this.style=extend({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},style)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var renderer=this,rendererDefs=renderer.defs;return renderer.box=null,renderer.boxWrapper=renderer.boxWrapper.destroy(),destroyObjectProperties(renderer.gradients||{}),renderer.gradients=null,rendererDefs&&(renderer.defs=rendererDefs.destroy()),renderer.subPixelFix&&removeEvent(win,"resize",renderer.subPixelFix),renderer.alignedObjects=null,null},createElement:function(nodeName){var wrapper=new this.Element;return wrapper.init(this,nodeName),wrapper},draw:function(){},buildText:function(wrapper){for(var textNode=wrapper.element,renderer=this,forExport=renderer.forExport,textStr=""+pick(wrapper.textStr,""),hasMarkup=-1!==textStr.indexOf("<"),lines,childNodes=textNode.childNodes,styleRegex,hrefRegex,parentX=attr(textNode,"x"),textStyles=wrapper.styles,width=wrapper.textWidth,textLineHeight=textStyles&&textStyles.lineHeight,textShadow=textStyles&&textStyles.textShadow,ellipsis=textStyles&&"ellipsis"===textStyles.textOverflow,i=childNodes.length,tempParent=width&&!wrapper.added&&this.box,getLineHeight=function(tspan){return textLineHeight?pInt(textLineHeight):renderer.fontMetrics(/(px|em)$/.test(tspan&&tspan.style.fontSize)?tspan.style.fontSize:textStyles&&textStyles.fontSize||renderer.style.fontSize||12,tspan).h},unescapeAngleBrackets=function(inputStr){return inputStr.replace(/&lt;/g,"<").replace(/&gt;/g,">")};i--;)textNode.removeChild(childNodes[i]);return hasMarkup||textShadow||ellipsis||-1!==textStr.indexOf(" ")?(styleRegex=/<.*style="([^"]+)".*>/,hrefRegex=/<.*href="(http[^"]+)".*>/,tempParent&&tempParent.appendChild(textNode),lines=hasMarkup?textStr.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[textStr],""===lines[lines.length-1]&&lines.pop(),each(lines,function(line,lineNo){var spans,spanNo=0;line=line.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),spans=line.split("|||"),each(spans,function(span){if(""!==span||1===spans.length){var attributes={},tspan=doc.createElementNS(SVG_NS,"tspan"),spanStyle;if(styleRegex.test(span)&&(spanStyle=span.match(styleRegex)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),attr(tspan,"style",spanStyle)),hrefRegex.test(span)&&!forExport&&(attr(tspan,"onclick",'location.href="'+span.match(hrefRegex)[1]+'"'),css(tspan,{cursor:"pointer"})),span=unescapeAngleBrackets(span.replace(/<(.|\n)*?>/g,"")||" ")," "!==span){if(tspan.appendChild(doc.createTextNode(span)),spanNo?attributes.dx=0:lineNo&&null!==parentX&&(attributes.x=parentX),attr(tspan,attributes),textNode.appendChild(tspan),!spanNo&&lineNo&&(!hasSVG&&forExport&&css(tspan,{display:"block"}),attr(tspan,"dy",getLineHeight(tspan))),width){for(var words=span.replace(/([^\^])-/g,"$1- ").split(" "),hasWhiteSpace=spans.length>1||lineNo||words.length>1&&"nowrap"!==textStyles.whiteSpace,tooLong,wasTooLong,actualWidth,rest=[],dy=getLineHeight(tspan),softLineNo=1,rotation=wrapper.rotation,wordStr=span,cursor=wordStr.length,bBox;(hasWhiteSpace||ellipsis)&&(words.length||rest.length);)wrapper.rotation=0,bBox=wrapper.getBBox(!0),actualWidth=bBox.width,!hasSVG&&renderer.forExport&&(actualWidth=renderer.measureSpanWidth(tspan.firstChild.data,wrapper.styles)),tooLong=actualWidth>width,void 0===wasTooLong&&(wasTooLong=tooLong),ellipsis&&wasTooLong?(cursor/=2,""===wordStr||!tooLong&&.5>cursor?words=[]:(tooLong&&(wasTooLong=!0),wordStr=span.substring(0,wordStr.length+(tooLong?-1:1)*mathCeil(cursor)),words=[wordStr+""],tspan.removeChild(tspan.firstChild))):tooLong&&1!==words.length?(tspan.removeChild(tspan.firstChild),rest.unshift(words.pop())):(words=rest,rest=[],words.length&&(softLineNo++,tspan=doc.createElementNS(SVG_NS,"tspan"),attr(tspan,{dy:dy,x:parentX}),spanStyle&&attr(tspan,"style",spanStyle),textNode.appendChild(tspan)),actualWidth>width&&(width=actualWidth)),words.length&&tspan.appendChild(doc.createTextNode(words.join(" ").replace(/- /g,"-")));wasTooLong&&wrapper.attr("title",wrapper.textStr),wrapper.rotation=rotation}spanNo++}}})}),tempParent&&tempParent.removeChild(textNode),textShadow&&wrapper.applyTextShadow&&wrapper.applyTextShadow(textShadow),void 0):(textNode.appendChild(doc.createTextNode(unescapeAngleBrackets(textStr))),void 0)},getContrast:function(color){return color=Color(color).rgba,color[0]+color[1]+color[2]>384?"#000":"#FFF"},button:function(text,x,y,callback,normalState,hoverState,pressedState,disabledState,shape){var label=this.label(text,x,y,shape,null,null,null,null,"button"),curState=0,stateOptions,stateStyle,normalStyle,hoverStyle,pressedStyle,disabledStyle,verticalGradient={x1:0,y1:0,x2:0,y2:1};return normalState=merge({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:verticalGradient,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},normalState),normalStyle=normalState.style,delete normalState.style,hoverState=merge(normalState,{stroke:"#68A",fill:{linearGradient:verticalGradient,stops:[[0,"#FFF"],[1,"#ACF"]]}},hoverState),hoverStyle=hoverState.style,delete hoverState.style,pressedState=merge(normalState,{stroke:"#68A",fill:{linearGradient:verticalGradient,stops:[[0,"#9BD"],[1,"#CDF"]]}},pressedState),pressedStyle=pressedState.style,delete pressedState.style,disabledState=merge(normalState,{style:{color:"#CCC"}},disabledState),disabledStyle=disabledState.style,delete disabledState.style,addEvent(label.element,isIE?"mouseover":"mouseenter",function(){3!==curState&&label.attr(hoverState).css(hoverStyle)}),addEvent(label.element,isIE?"mouseout":"mouseleave",function(){3!==curState&&(stateOptions=[normalState,hoverState,pressedState][curState],stateStyle=[normalStyle,hoverStyle,pressedStyle][curState],label.attr(stateOptions).css(stateStyle))}),label.setState=function(state){label.state=curState=state,state?2===state?label.attr(pressedState).css(pressedStyle):3===state&&label.attr(disabledState).css(disabledStyle):label.attr(normalState).css(normalStyle)},label.on("click",function(){3!==curState&&callback.call(label)}).attr(normalState).css(extend({cursor:"default"},normalStyle))},crispLine:function(points,width){return points[1]===points[4]&&(points[1]=points[4]=mathRound(points[1])-width%2/2),points[2]===points[5]&&(points[2]=points[5]=mathRound(points[2])+width%2/2),points},path:function(path){var attr={fill:NONE};return isArray(path)?attr.d=path:isObject(path)&&extend(attr,path),this.createElement("path").attr(attr)},circle:function(x,y,r){var attr=isObject(x)?x:{x:x,y:y,r:r},wrapper=this.createElement("circle");return wrapper.xSetter=function(value){this.element.setAttribute("cx",value)},wrapper.ySetter=function(value){this.element.setAttribute("cy",value)},wrapper.attr(attr)},arc:function(x,y,r,innerR,start,end){var arc;return isObject(x)&&(y=x.y,r=x.r,innerR=x.innerR,start=x.start,end=x.end,x=x.x),arc=this.symbol("arc",x||0,y||0,r||0,r||0,{innerR:innerR||0,start:start||0,end:end||0}),arc.r=r,arc},rect:function(x,y,width,height,r,strokeWidth){r=isObject(x)?x.r:r;var wrapper=this.createElement("rect"),attribs=isObject(x)?x:x===UNDEFINED?{}:{x:x,y:y,width:mathMax(width,0),height:mathMax(height,0)};return strokeWidth!==UNDEFINED&&(attribs.strokeWidth=strokeWidth,attribs=wrapper.crisp(attribs)),r&&(attribs.r=r),wrapper.rSetter=function(value){attr(this.element,{rx:value,ry:value})},wrapper.attr(attribs)},setSize:function(width,height,animate){var renderer=this,alignedObjects=renderer.alignedObjects,i=alignedObjects.length;for(renderer.width=width,renderer.height=height,renderer.boxWrapper[pick(animate,!0)?"animate":"attr"]({width:width,height:height});i--;)alignedObjects[i].align()},g:function(name){var elem=this.createElement("g");return defined(name)?elem.attr({"class":PREFIX+name}):elem},image:function(src,x,y,width,height){var attribs={preserveAspectRatio:NONE},elemWrapper;return arguments.length>1&&extend(attribs,{x:x,y:y,width:width,height:height}),elemWrapper=this.createElement("image").attr(attribs),elemWrapper.element.setAttributeNS?elemWrapper.element.setAttributeNS("http://www.w3.org/1999/xlink","href",src):elemWrapper.element.setAttribute("hc-svg-href",src),elemWrapper},symbol:function(symbol,x,y,width,height,options){var obj,symbolFn=this.symbols[symbol],path=symbolFn&&symbolFn(mathRound(x),mathRound(y),width,height,options),imageElement,imageRegex=/^url\((.*?)\)$/,imageSrc,imageSize,centerImage;return path?(obj=this.path(path),extend(obj,{symbolName:symbol,x:x,y:y,width:width,height:height}),options&&extend(obj,options)):imageRegex.test(symbol)&&(centerImage=function(img,size){img.element&&(img.attr({width:size[0],height:size[1]}),img.alignByTranslate||img.translate(mathRound((width-size[0])/2),mathRound((height-size[1])/2)))},imageSrc=symbol.match(imageRegex)[1],imageSize=symbolSizes[imageSrc]||options&&options.width&&options.height&&[options.width,options.height],obj=this.image(imageSrc).attr({x:x,y:y}),obj.isImg=!0,imageSize?centerImage(obj,imageSize):(obj.attr({width:0,height:0}),imageElement=createElement("img",{onload:function(){centerImage(obj,symbolSizes[imageSrc]=[this.width,this.height])},src:imageSrc}))),obj},symbols:{circle:function(x,y,w,h){var cpw=.166*w;return[M,x+w/2,y,"C",x+w+cpw,y,x+w+cpw,y+h,x+w/2,y+h,"C",x-cpw,y+h,x-cpw,y,x+w/2,y,"Z"]},square:function(x,y,w,h){return[M,x,y,L,x+w,y,x+w,y+h,x,y+h,"Z"]},triangle:function(x,y,w,h){return[M,x+w/2,y,L,x+w,y+h,x,y+h,"Z"]},"triangle-down":function(x,y,w,h){return[M,x,y,L,x+w,y,x+w/2,y+h,"Z"]},diamond:function(x,y,w,h){return[M,x+w/2,y,L,x+w,y+h/2,x+w/2,y+h,x,y+h/2,"Z"]},arc:function(x,y,w,h,options){var start=options.start,radius=options.r||w||h,end=options.end-.001,innerRadius=options.innerR,open=options.open,cosStart=mathCos(start),sinStart=mathSin(start),cosEnd=mathCos(end),sinEnd=mathSin(end),longArc=mathPI>options.end-start?0:1;return[M,x+radius*cosStart,y+radius*sinStart,"A",radius,radius,0,longArc,1,x+radius*cosEnd,y+radius*sinEnd,open?M:L,x+innerRadius*cosEnd,y+innerRadius*sinEnd,"A",innerRadius,innerRadius,0,longArc,0,x+innerRadius*cosStart,y+innerRadius*sinStart,open?"":"Z"]},callout:function(x,y,w,h,options){var arrowLength=6,halfDistance=6,r=mathMin(options&&options.r||0,w,h),safeDistance=r+halfDistance,anchorX=options&&options.anchorX,anchorY=options&&options.anchorY,path,normalizer=mathRound(options.strokeWidth||0)%2/2;return x+=normalizer,y+=normalizer,path=["M",x+r,y,"L",x+w-r,y,"C",x+w,y,x+w,y,x+w,y+r,"L",x+w,y+h-r,"C",x+w,y+h,x+w,y+h,x+w-r,y+h,"L",x+r,y+h,"C",x,y+h,x,y+h,x,y+h-r,"L",x,y+r,"C",x,y,x,y,x+r,y],anchorX&&anchorX>w&&anchorY>y+safeDistance&&y+h-safeDistance>anchorY?path.splice(13,3,"L",x+w,anchorY-halfDistance,x+w+arrowLength,anchorY,x+w,anchorY+halfDistance,x+w,y+h-r):anchorX&&0>anchorX&&anchorY>y+safeDistance&&y+h-safeDistance>anchorY?path.splice(33,3,"L",x,anchorY+halfDistance,x-arrowLength,anchorY,x,anchorY-halfDistance,x,y+r):anchorY&&anchorY>h&&anchorX>x+safeDistance&&x+w-safeDistance>anchorX?path.splice(23,3,"L",anchorX+halfDistance,y+h,anchorX,y+h+arrowLength,anchorX-halfDistance,y+h,x+r,y+h):anchorY&&0>anchorY&&anchorX>x+safeDistance&&x+w-safeDistance>anchorX&&path.splice(3,3,"L",anchorX-halfDistance,y,anchorX,y-arrowLength,anchorX+halfDistance,y,w-r,y),path}},clipRect:function(x,y,width,height){var wrapper,id=PREFIX+idCounter++,clipPath=this.createElement("clipPath").attr({id:id}).add(this.defs);return wrapper=this.rect(x,y,width,height,0).add(clipPath),wrapper.id=id,wrapper.clipPath=clipPath,wrapper.count=0,wrapper},text:function(str,x,y,useHTML){var renderer=this,fakeSVG=useCanVG||!hasSVG&&renderer.forExport,wrapper,attr={};return useHTML&&!renderer.forExport?renderer.html(str,x,y):(attr.x=Math.round(x||0),y&&(attr.y=Math.round(y)),(str||0===str)&&(attr.text=str),wrapper=renderer.createElement("text").attr(attr),fakeSVG&&wrapper.css({position:ABSOLUTE}),useHTML||(wrapper.xSetter=function(value,key,element){var tspans=element.getElementsByTagName("tspan"),tspan,parentVal=element.getAttribute(key),i;for(i=0;tspans.length>i;i++)tspan=tspans[i],tspan.getAttribute(key)===parentVal&&tspan.setAttribute(key,value);element.setAttribute(key,value)}),wrapper)},fontMetrics:function(fontSize,elem){fontSize=fontSize||this.style.fontSize,elem&&win.getComputedStyle&&(elem=elem.element||elem,fontSize=win.getComputedStyle(elem,"").fontSize),fontSize=/px/.test(fontSize)?pInt(fontSize):/em/.test(fontSize)?12*parseFloat(fontSize):12;var lineHeight=24>fontSize?fontSize+3:mathRound(1.2*fontSize),baseline=mathRound(.8*lineHeight);return{h:lineHeight,b:baseline,f:fontSize}},rotCorr:function(baseline,rotation,alterY){var y=baseline;return rotation&&alterY&&(y=mathMax(y*mathCos(rotation*deg2rad),4)),{x:-baseline/3*mathSin(rotation*deg2rad),y:y}},label:function(str,x,y,shape,anchorX,anchorY,useHTML,baseline,className){function updateBoxSize(){var boxX,boxY,style=text.element.style;bBox=(void 0===width||void 0===height||wrapper.styles.textAlign)&&defined(text.textStr)&&text.getBBox(),wrapper.width=(width||bBox.width||0)+2*padding+paddingLeft,wrapper.height=(height||bBox.height||0)+2*padding,baselineOffset=padding+renderer.fontMetrics(style&&style.fontSize,text).b,needsBox&&(box||(boxX=mathRound(-alignFactor*padding),boxY=baseline?-baselineOffset:0,wrapper.box=box=shape?renderer.symbol(shape,boxX,boxY,wrapper.width,wrapper.height,deferredAttr):renderer.rect(boxX,boxY,wrapper.width,wrapper.height,0,deferredAttr[STROKE_WIDTH]),box.attr("fill",NONE).add(wrapper)),box.isImg||box.attr(extend({width:mathRound(wrapper.width),height:mathRound(wrapper.height)},deferredAttr)),deferredAttr=null)}function updateTextPadding(){var styles=wrapper.styles,textAlign=styles&&styles.textAlign,x=paddingLeft+padding*(1-alignFactor),y;y=baseline?0:baselineOffset,defined(width)&&bBox&&("center"===textAlign||"right"===textAlign)&&(x+={center:.5,right:1}[textAlign]*(width-bBox.width)),(x!==text.x||y!==text.y)&&(text.attr("x",x),y!==UNDEFINED&&text.attr("SPAN"===text.element.nodeName?"y":"translateY",y)),text.x=x,text.y=y}function boxAttr(key,value){box?box.attr(key,value):deferredAttr[key]=value}var renderer=this,wrapper=renderer.g(className),text=renderer.text("",0,0,useHTML).attr({zIndex:1}),box,bBox,alignFactor=0,padding=3,paddingLeft=0,width,height,wrapperX,wrapperY,crispAdjust=0,deferredAttr={},baselineOffset,needsBox;wrapper.onAdd=function(){text.add(wrapper),wrapper.attr({text:str||0===str?str:"",x:x,y:y}),box&&defined(anchorX)&&wrapper.attr({anchorX:anchorX,anchorY:anchorY})},wrapper.widthSetter=function(value){width=value},wrapper.heightSetter=function(value){height=value},wrapper.paddingSetter=function(value){defined(value)&&value!==padding&&(padding=wrapper.padding=value,updateTextPadding())},wrapper.paddingLeftSetter=function(value){defined(value)&&value!==paddingLeft&&(paddingLeft=value,updateTextPadding())},wrapper.alignSetter=function(value){alignFactor={left:0,center:.5,right:1}[value]},wrapper.textSetter=function(value){value!==UNDEFINED&&text.textSetter(value),updateBoxSize(),updateTextPadding()},wrapper["stroke-widthSetter"]=function(value,key){value&&(needsBox=!0),crispAdjust=value%2/2,boxAttr(key,value)},wrapper.strokeSetter=wrapper.fillSetter=wrapper.rSetter=function(value,key){"fill"===key&&value&&(needsBox=!0),boxAttr(key,value)},wrapper.anchorXSetter=function(value,key){anchorX=value,boxAttr(key,value+crispAdjust-wrapperX)},wrapper.anchorYSetter=function(value,key){anchorY=value,boxAttr(key,value-wrapperY)},wrapper.xSetter=function(value){wrapper.x=value,alignFactor&&(value-=alignFactor*((width||bBox.width)+padding)),wrapperX=mathRound(value),wrapper.attr("translateX",wrapperX)},wrapper.ySetter=function(value){wrapperY=wrapper.y=mathRound(value),wrapper.attr("translateY",wrapperY)};var baseCss=wrapper.css;return extend(wrapper,{css:function(styles){if(styles){var textStyles={};styles=merge(styles),each(wrapper.textProps,function(prop){styles[prop]!==UNDEFINED&&(textStyles[prop]=styles[prop],delete styles[prop])}),text.css(textStyles)}return baseCss.call(wrapper,styles)},getBBox:function(){return{width:bBox.width+2*padding,height:bBox.height+2*padding,x:bBox.x-padding,y:bBox.y-padding}},shadow:function(b){return box&&box.shadow(b),wrapper},destroy:function(){removeEvent(wrapper.element,"mouseenter"),removeEvent(wrapper.element,"mouseleave"),text&&(text=text.destroy()),box&&(box=box.destroy()),SVGElement.prototype.destroy.call(wrapper),wrapper=renderer=updateBoxSize=updateTextPadding=boxAttr=null}})}},Renderer=SVGRenderer,extend(SVGElement.prototype,{htmlCss:function(styles){var wrapper=this,element=wrapper.element,textWidth=styles&&"SPAN"===element.tagName&&styles.width;return textWidth&&(delete styles.width,wrapper.textWidth=textWidth,wrapper.updateTransform()),styles&&"ellipsis"===styles.textOverflow&&(styles.whiteSpace="nowrap",styles.overflow="hidden"),wrapper.styles=extend(wrapper.styles,styles),css(wrapper.element,styles),wrapper},htmlGetBBox:function(){var wrapper=this,element=wrapper.element;return"text"===element.nodeName&&(element.style.position=ABSOLUTE),{x:element.offsetLeft,y:element.offsetTop,width:element.offsetWidth,height:element.offsetHeight}},htmlUpdateTransform:function(){if(!this.added)return this.alignOnAdd=!0,void 0;var wrapper=this,renderer=wrapper.renderer,elem=wrapper.element,translateX=wrapper.translateX||0,translateY=wrapper.translateY||0,x=wrapper.x||0,y=wrapper.y||0,align=wrapper.textAlign||"left",alignCorrection={left:0,center:.5,right:1}[align],shadows=wrapper.shadows,styles=wrapper.styles;if(css(elem,{marginLeft:translateX,marginTop:translateY}),shadows&&each(shadows,function(shadow){css(shadow,{marginLeft:translateX+1,marginTop:translateY+1})}),wrapper.inverted&&each(elem.childNodes,function(child){renderer.invertChild(child,elem)}),"SPAN"===elem.tagName){var width,rotation=wrapper.rotation,baseline,textWidth=pInt(wrapper.textWidth),currentTextTransform=[rotation,align,elem.innerHTML,wrapper.textWidth].join(",");currentTextTransform!==wrapper.cTT&&(baseline=renderer.fontMetrics(elem.style.fontSize).b,defined(rotation)&&wrapper.setSpanRotation(rotation,alignCorrection,baseline),width=pick(wrapper.elemWidth,elem.offsetWidth),width>textWidth&&/[ \-]/.test(elem.textContent||elem.innerText)&&(css(elem,{width:textWidth+PX,display:"block",whiteSpace:styles&&styles.whiteSpace||"normal"}),width=textWidth),wrapper.getSpanCorrection(width,baseline,alignCorrection,rotation,align)),css(elem,{left:x+(wrapper.xCorr||0)+PX,top:y+(wrapper.yCorr||0)+PX}),isWebKit&&(baseline=elem.offsetHeight),wrapper.cTT=currentTextTransform}},setSpanRotation:function(rotation,alignCorrection,baseline){var rotationStyle={},cssTransformKey=isIE?"-ms-transform":isWebKit?"-webkit-transform":isFirefox?"MozTransform":isOpera?"-o-transform":"";rotationStyle[cssTransformKey]=rotationStyle.transform="rotate("+rotation+"deg)",rotationStyle[cssTransformKey+(isFirefox?"Origin":"-origin")]=rotationStyle.transformOrigin=100*alignCorrection+"% "+baseline+"px",css(this.element,rotationStyle)},getSpanCorrection:function(width,baseline,alignCorrection){this.xCorr=-width*alignCorrection,this.yCorr=-baseline}}),extend(SVGRenderer.prototype,{html:function(str,x,y){var wrapper=this.createElement("span"),element=wrapper.element,renderer=wrapper.renderer;return wrapper.textSetter=function(value){value!==element.innerHTML&&delete this.bBox,element.innerHTML=this.textStr=value},wrapper.xSetter=wrapper.ySetter=wrapper.alignSetter=wrapper.rotationSetter=function(value,key){"align"===key&&(key="textAlign"),wrapper[key]=value,wrapper.htmlUpdateTransform()},wrapper.attr({text:str,x:mathRound(x),y:mathRound(y)}).css({position:ABSOLUTE,fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),element.style.whiteSpace="nowrap",wrapper.css=wrapper.htmlCss,renderer.isSVG&&(wrapper.add=function(svgGroupWrapper){var htmlGroup,container=renderer.box.parentNode,parentGroup,parents=[];if(this.parentGroup=svgGroupWrapper,svgGroupWrapper){if(htmlGroup=svgGroupWrapper.div,!htmlGroup){for(parentGroup=svgGroupWrapper;parentGroup;)parents.push(parentGroup),parentGroup=parentGroup.parentGroup;each(parents.reverse(),function(parentGroup){var htmlGroupStyle;htmlGroup=parentGroup.div=parentGroup.div||createElement(DIV,{className:attr(parentGroup.element,"class")},{position:ABSOLUTE,left:(parentGroup.translateX||0)+PX,top:(parentGroup.translateY||0)+PX},htmlGroup||container),htmlGroupStyle=htmlGroup.style,extend(parentGroup,{translateXSetter:function(value,key){htmlGroupStyle.left=value+PX,parentGroup[key]=value,parentGroup.doTransform=!0},translateYSetter:function(value,key){htmlGroupStyle.top=value+PX,parentGroup[key]=value,parentGroup.doTransform=!0},visibilitySetter:function(value,key){htmlGroupStyle[key]=value}})})}}else htmlGroup=container;return htmlGroup.appendChild(element),wrapper.added=!0,wrapper.alignOnAdd&&wrapper.htmlUpdateTransform(),wrapper}),wrapper}});var VMLRenderer,VMLElement;if(!hasSVG&&!useCanVG){VMLElement={init:function(renderer,nodeName){var wrapper=this,markup=["<",nodeName,' filled="f" stroked="f"'],style=["position: ",ABSOLUTE,";"],isDiv=nodeName===DIV;("shape"===nodeName||isDiv)&&style.push("left:0;top:0;width:1px;height:1px;"),style.push("visibility: ",isDiv?HIDDEN:VISIBLE),markup.push(' style="',style.join(""),'"/>'),nodeName&&(markup=isDiv||"span"===nodeName||"img"===nodeName?markup.join(""):renderer.prepVML(markup),wrapper.element=createElement(markup)),wrapper.renderer=renderer},add:function(parent){var wrapper=this,renderer=wrapper.renderer,element=wrapper.element,box=renderer.box,inverted=parent&&parent.inverted,parentNode=parent?parent.element||parent:box;return inverted&&renderer.invertChild(element,parentNode),parentNode.appendChild(element),wrapper.added=!0,wrapper.alignOnAdd&&!wrapper.deferUpdateTransform&&wrapper.updateTransform(),wrapper.onAdd&&wrapper.onAdd(),wrapper},updateTransform:SVGElement.prototype.htmlUpdateTransform,setSpanRotation:function(){var rotation=this.rotation,costheta=mathCos(rotation*deg2rad),sintheta=mathSin(rotation*deg2rad);css(this.element,{filter:rotation?["progid:DXImageTransform.Microsoft.Matrix(M11=",costheta,", M12=",-sintheta,", M21=",sintheta,", M22=",costheta,", sizingMethod='auto expand')"].join(""):NONE})},getSpanCorrection:function(width,baseline,alignCorrection,rotation,align){var costheta=rotation?mathCos(rotation*deg2rad):1,sintheta=rotation?mathSin(rotation*deg2rad):0,height=pick(this.elemHeight,this.element.offsetHeight),quad,nonLeft=align&&"left"!==align;this.xCorr=0>costheta&&-width,this.yCorr=0>sintheta&&-height,quad=0>costheta*sintheta,this.xCorr+=sintheta*baseline*(quad?1-alignCorrection:alignCorrection),this.yCorr-=costheta*baseline*(rotation?quad?alignCorrection:1-alignCorrection:1),nonLeft&&(this.xCorr-=width*alignCorrection*(0>costheta?-1:1),rotation&&(this.yCorr-=height*alignCorrection*(0>sintheta?-1:1)),css(this.element,{textAlign:align}))},pathToVML:function(value){for(var i=value.length,path=[];i--;)isNumber(value[i])?path[i]=mathRound(10*value[i])-5:"Z"===value[i]?path[i]="x":(path[i]=value[i],!value.isArc||"wa"!==value[i]&&"at"!==value[i]||(path[i+5]===path[i+7]&&(path[i+7]+=value[i+7]>value[i+5]?1:-1),path[i+6]===path[i+8]&&(path[i+8]+=value[i+8]>value[i+6]?1:-1)));return path.join(" ")||"x"},clip:function(clipRect){var wrapper=this,clipMembers,cssRet;return clipRect?(clipMembers=clipRect.members,erase(clipMembers,wrapper),clipMembers.push(wrapper),wrapper.destroyClip=function(){erase(clipMembers,wrapper)},cssRet=clipRect.getCSS(wrapper)):(wrapper.destroyClip&&wrapper.destroyClip(),cssRet={clip:docMode8?"inherit":"rect(auto)"}),wrapper.css(cssRet)},css:SVGElement.prototype.htmlCss,safeRemoveChild:function(element){element.parentNode&&discardElement(element)},destroy:function(){return this.destroyClip&&this.destroyClip(),SVGElement.prototype.destroy.apply(this)},on:function(eventType,handler){return this.element["on"+eventType]=function(){var evt=win.event;evt.target=evt.srcElement,handler(evt)},this},cutOffPath:function(path,length){var len;return path=path.split(/[ ,]/),len=path.length,(9===len||11===len)&&(path[len-4]=path[len-2]=pInt(path[len-2])-10*length),path.join(" ")},shadow:function(shadowOptions,group,cutOff){var shadows=[],i,element=this.element,renderer=this.renderer,shadow,elemStyle=element.style,markup,path=element.path,strokeWidth,modifiedPath,shadowWidth,shadowElementOpacity;if(path&&"string"!=typeof path.value&&(path="x"),modifiedPath=path,shadowOptions){for(shadowWidth=pick(shadowOptions.width,3),shadowElementOpacity=(shadowOptions.opacity||.15)/shadowWidth,i=1;3>=i;i++)strokeWidth=2*shadowWidth+1-2*i,cutOff&&(modifiedPath=this.cutOffPath(path.value,strokeWidth+.5)),markup=['<shape isShadow="true" strokeweight="',strokeWidth,'" filled="false" path="',modifiedPath,'" coordsize="10 10" style="',element.style.cssText,'" />'],shadow=createElement(renderer.prepVML(markup),null,{left:pInt(elemStyle.left)+pick(shadowOptions.offsetX,1),top:pInt(elemStyle.top)+pick(shadowOptions.offsetY,1)}),cutOff&&(shadow.cutOff=strokeWidth+1),markup=['<stroke color="',shadowOptions.color||"black",'" opacity="',shadowElementOpacity*i,'"/>'],createElement(renderer.prepVML(markup),null,null,shadow),group?group.element.appendChild(shadow):element.parentNode.insertBefore(shadow,element),shadows.push(shadow);this.shadows=shadows}return this},updateShadows:noop,setAttr:function(key,value){docMode8?this.element[key]=value:this.element.setAttribute(key,value)},classSetter:function(value){this.element.className=value},dashstyleSetter:function(value,key,element){var strokeElem=element.getElementsByTagName("stroke")[0]||createElement(this.renderer.prepVML(["<stroke/>"]),null,null,element);strokeElem[key]=value||"solid",this[key]=value},dSetter:function(value,key,element){var i,shadows=this.shadows;if(value=value||[],this.d=value.join&&value.join(" "),element.path=value=this.pathToVML(value),shadows)for(i=shadows.length;i--;)shadows[i].path=shadows[i].cutOff?this.cutOffPath(value,shadows[i].cutOff):value;this.setAttr(key,value)},fillSetter:function(value,key,element){var nodeName=element.nodeName;"SPAN"===nodeName?element.style.color=value:"IMG"!==nodeName&&(element.filled=value!==NONE,this.setAttr("fillcolor",this.renderer.color(value,element,key,this)))},opacitySetter:noop,rotationSetter:function(value,key,element){var style=element.style;this[key]=style[key]=value,style.left=-mathRound(mathSin(value*deg2rad)+1)+PX,style.top=mathRound(mathCos(value*deg2rad))+PX},strokeSetter:function(value,key,element){this.setAttr("strokecolor",this.renderer.color(value,element,key))
},"stroke-widthSetter":function(value,key,element){element.stroked=!!value,this[key]=value,isNumber(value)&&(value+=PX),this.setAttr("strokeweight",value)},titleSetter:function(value,key){this.setAttr(key,value)},visibilitySetter:function(value,key,element){"inherit"===value&&(value=VISIBLE),this.shadows&&each(this.shadows,function(shadow){shadow.style[key]=value}),"DIV"===element.nodeName&&(value=value===HIDDEN?"-999em":0,docMode8||(element.style[key]=value?VISIBLE:HIDDEN),key="top"),element.style[key]=value},xSetter:function(value,key,element){this[key]=value,"x"===key?key="left":"y"===key&&(key="top"),this.updateClipping?(this[key]=value,this.updateClipping()):element.style[key]=value},zIndexSetter:function(value,key,element){element.style[key]=value}},Highcharts.VMLElement=VMLElement=extendClass(SVGElement,VMLElement),VMLElement.prototype.ySetter=VMLElement.prototype.widthSetter=VMLElement.prototype.heightSetter=VMLElement.prototype.xSetter;var VMLRendererExtension={Element:VMLElement,isIE8:userAgent.indexOf("MSIE 8.0")>-1,init:function(container,width,height,style){var renderer=this,boxWrapper,box,css;if(renderer.alignedObjects=[],boxWrapper=renderer.createElement(DIV).css(extend(this.getStyle(style),{position:RELATIVE})),box=boxWrapper.element,container.appendChild(boxWrapper.element),renderer.isVML=!0,renderer.box=box,renderer.boxWrapper=boxWrapper,renderer.cache={},renderer.setSize(width,height,!1),!doc.namespaces.hcv){doc.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),css="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{doc.createStyleSheet().cssText=css}catch(e){doc.styleSheets[0].cssText+=css}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(x,y,width,height){var clipRect=this.createElement(),isObj=isObject(x);return extend(clipRect,{members:[],count:0,left:(isObj?x.x:x)+1,top:(isObj?x.y:y)+1,width:(isObj?x.width:width)-1,height:(isObj?x.height:height)-1,getCSS:function(wrapper){var element=wrapper.element,nodeName=element.nodeName,isShape="shape"===nodeName,inverted=wrapper.inverted,rect=this,top=rect.top-(isShape?element.offsetTop:0),left=rect.left,right=left+rect.width,bottom=top+rect.height,ret={clip:"rect("+mathRound(inverted?left:top)+"px,"+mathRound(inverted?bottom:right)+"px,"+mathRound(inverted?right:bottom)+"px,"+mathRound(inverted?top:left)+"px)"};return!inverted&&docMode8&&"DIV"===nodeName&&extend(ret,{width:right+PX,height:bottom+PX}),ret},updateClipping:function(){each(clipRect.members,function(member){member.element&&member.css(clipRect.getCSS(member))})}})},color:function(color,elem,prop,wrapper){var renderer=this,colorObject,regexRgba=/^rgba/,markup,fillType,ret=NONE;if(color&&color.linearGradient?fillType="gradient":color&&color.radialGradient&&(fillType="pattern"),fillType){var stopColor,stopOpacity,gradient=color.linearGradient||color.radialGradient,x1,y1,x2,y2,opacity1,opacity2,color1,color2,fillAttr="",stops=color.stops,firstStop,lastStop,colors=[],addFillNode=function(){markup=['<fill colors="'+colors.join(",")+'" opacity="',opacity2,'" o:opacity2="',opacity1,'" type="',fillType,'" ',fillAttr,'focus="100%" method="any" />'],createElement(renderer.prepVML(markup),null,null,elem)};if(firstStop=stops[0],lastStop=stops[stops.length-1],firstStop[0]>0&&stops.unshift([0,firstStop[1]]),1>lastStop[0]&&stops.push([1,lastStop[1]]),each(stops,function(stop,i){regexRgba.test(stop[1])?(colorObject=Color(stop[1]),stopColor=colorObject.get("rgb"),stopOpacity=colorObject.get("a")):(stopColor=stop[1],stopOpacity=1),colors.push(100*stop[0]+"% "+stopColor),i?(opacity2=stopOpacity,color1=stopColor):(opacity1=stopOpacity,color2=stopColor)}),"fill"===prop)if("gradient"===fillType)x1=gradient.x1||gradient[0]||0,y1=gradient.y1||gradient[1]||0,x2=gradient.x2||gradient[2]||0,y2=gradient.y2||gradient[3]||0,fillAttr='angle="'+(90-180*math.atan((y2-y1)/(x2-x1))/mathPI)+'"',addFillNode();else{var r=gradient.r,sizex=2*r,sizey=2*r,cx=gradient.cx,cy=gradient.cy,radialReference=elem.radialReference,bBox,applyRadialGradient=function(){radialReference&&(bBox=wrapper.getBBox(),cx+=(radialReference[0]-bBox.x)/bBox.width-.5,cy+=(radialReference[1]-bBox.y)/bBox.height-.5,sizex*=radialReference[2]/bBox.width,sizey*=radialReference[2]/bBox.height),fillAttr='src="'+defaultOptions.global.VMLRadialGradientURL+'" '+'size="'+sizex+","+sizey+'" '+'origin="0.5,0.5" '+'position="'+cx+","+cy+'" '+'color2="'+color2+'" ',addFillNode()};wrapper.added?applyRadialGradient():wrapper.onAdd=applyRadialGradient,ret=color1}else ret=stopColor}else if(regexRgba.test(color)&&"IMG"!==elem.tagName)colorObject=Color(color),markup=["<",prop,' opacity="',colorObject.get("a"),'"/>'],createElement(this.prepVML(markup),null,null,elem),ret=colorObject.get("rgb");else{var propNodes=elem.getElementsByTagName(prop);propNodes.length&&(propNodes[0].opacity=1,propNodes[0].type="solid"),ret=color}return ret},prepVML:function(markup){var vmlStyle="display:inline-block;behavior:url(#default#VML);",isIE8=this.isIE8;return markup=markup.join(""),isIE8?(markup=markup.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),markup=-1===markup.indexOf('style="')?markup.replace("/>",' style="'+vmlStyle+'" />'):markup.replace('style="','style="'+vmlStyle)):markup=markup.replace("<","<hcv:"),markup},text:SVGRenderer.prototype.html,path:function(path){var attr={coordsize:"10 10"};return isArray(path)?attr.d=path:isObject(path)&&extend(attr,path),this.createElement("shape").attr(attr)},circle:function(x,y,r){var circle=this.symbol("circle");return isObject(x)&&(r=x.r,y=x.y,x=x.x),circle.isCircle=!0,circle.r=r,circle.attr({x:x,y:y})},g:function(name){var wrapper,attribs;return name&&(attribs={className:PREFIX+name,"class":PREFIX+name}),wrapper=this.createElement(DIV).attr(attribs)},image:function(src,x,y,width,height){var obj=this.createElement("img").attr({src:src});return arguments.length>1&&obj.attr({x:x,y:y,width:width,height:height}),obj},createElement:function(nodeName){return"rect"===nodeName?this.symbol(nodeName):SVGRenderer.prototype.createElement.call(this,nodeName)},invertChild:function(element,parentNode){var ren=this,parentStyle=parentNode.style,imgStyle="IMG"===element.tagName&&element.style;css(element,{flip:"x",left:pInt(parentStyle.width)-(imgStyle?pInt(imgStyle.top):1),top:pInt(parentStyle.height)-(imgStyle?pInt(imgStyle.left):1),rotation:-90}),each(element.childNodes,function(child){ren.invertChild(child,element)})},symbols:{arc:function(x,y,w,h,options){var start=options.start,end=options.end,radius=options.r||w||h,innerRadius=options.innerR,cosStart=mathCos(start),sinStart=mathSin(start),cosEnd=mathCos(end),sinEnd=mathSin(end),ret;return 0===end-start?["x"]:(ret=["wa",x-radius,y-radius,x+radius,y+radius,x+radius*cosStart,y+radius*sinStart,x+radius*cosEnd,y+radius*sinEnd],options.open&&!innerRadius&&ret.push("e",M,x,y),ret.push("at",x-innerRadius,y-innerRadius,x+innerRadius,y+innerRadius,x+innerRadius*cosEnd,y+innerRadius*sinEnd,x+innerRadius*cosStart,y+innerRadius*sinStart,"x","e"),ret.isArc=!0,ret)},circle:function(x,y,w,h,wrapper){return wrapper&&(w=h=2*wrapper.r),wrapper&&wrapper.isCircle&&(x-=w/2,y-=h/2),["wa",x,y,x+w,y+h,x+w,y+h/2,x+w,y+h/2,"e"]},rect:function(x,y,w,h,options){return SVGRenderer.prototype.symbols[defined(options)&&options.r?"callout":"square"].call(0,x,y,w,h,options)}}};Highcharts.VMLRenderer=VMLRenderer=function(){this.init.apply(this,arguments)},VMLRenderer.prototype=merge(SVGRenderer.prototype,VMLRendererExtension),Renderer=VMLRenderer}SVGRenderer.prototype.measureSpanWidth=function(text,styles){var measuringSpan=doc.createElement("span"),offsetWidth,textNode=doc.createTextNode(text);return measuringSpan.appendChild(textNode),css(measuringSpan,styles),this.box.appendChild(measuringSpan),offsetWidth=measuringSpan.offsetWidth,discardElement(measuringSpan),offsetWidth};var CanVGRenderer,CanVGController;useCanVG&&(Highcharts.CanVGRenderer=CanVGRenderer=function(){SVG_NS="http://www.w3.org/1999/xhtml"},CanVGRenderer.prototype.symbols={},CanVGController=function(){function drawDeferred(){var callLength=deferredRenderCalls.length,callIndex;for(callIndex=0;callLength>callIndex;callIndex++)deferredRenderCalls[callIndex]();deferredRenderCalls=[]}var deferredRenderCalls=[];return{push:function(func,scriptLocation){0===deferredRenderCalls.length&&getScript(scriptLocation,drawDeferred),deferredRenderCalls.push(func)}}}(),Renderer=CanVGRenderer),Tick.prototype={addLabel:function(){var tick=this,axis=tick.axis,options=axis.options,chart=axis.chart,categories=axis.categories,names=axis.names,pos=tick.pos,labelOptions=options.labels,str,tickPositions=axis.tickPositions,isFirst=pos===tickPositions[0],isLast=pos===tickPositions[tickPositions.length-1],value=categories?pick(categories[pos],names[pos],pos):pos,label=tick.label,tickPositionInfo=tickPositions.info,dateTimeLabelFormat;axis.isDatetimeAxis&&tickPositionInfo&&(dateTimeLabelFormat=options.dateTimeLabelFormats[tickPositionInfo.higherRanks[pos]||tickPositionInfo.unitName]),tick.isFirst=isFirst,tick.isLast=isLast,str=axis.labelFormatter.call({axis:axis,chart:chart,isFirst:isFirst,isLast:isLast,dateTimeLabelFormat:dateTimeLabelFormat,value:axis.isLog?correctFloat(lin2log(value)):value}),defined(label)?label&&label.attr({text:str}):(tick.label=label=defined(str)&&labelOptions.enabled?chart.renderer.text(str,0,0,labelOptions.useHTML).css(merge(labelOptions.style)).add(axis.labelGroup):null,tick.labelLength=label&&label.getBBox().width,tick.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(xy){var axis=this.axis,pxPos=xy.x,chartWidth=axis.chart.chartWidth,spacing=axis.chart.spacing,leftBound=pick(axis.labelLeft,spacing[3]),rightBound=pick(axis.labelRight,chartWidth-spacing[1]),label=this.label,rotation=this.rotation,factor={left:0,center:.5,right:1}[axis.labelAlign],labelWidth=label.getBBox().width,slotWidth=axis.slotWidth,leftPos,rightPos,textWidth;rotation?0>rotation&&leftBound>pxPos-factor*labelWidth?textWidth=mathRound(pxPos/mathCos(rotation*deg2rad)-leftBound):rotation>0&&pxPos+factor*labelWidth>rightBound&&(textWidth=mathRound((chartWidth-pxPos)/mathCos(rotation*deg2rad))):(leftPos=pxPos-factor*labelWidth,rightPos=pxPos+factor*labelWidth,leftBound>leftPos?(slotWidth-=leftBound-leftPos,xy.x=leftBound,label.attr({align:"left"})):rightPos>rightBound&&(slotWidth-=rightPos-rightBound,xy.x=rightBound,label.attr({align:"right"})),labelWidth>slotWidth&&(textWidth=slotWidth)),textWidth&&label.css({width:textWidth,textOverflow:"ellipsis"})},getPosition:function(horiz,pos,tickmarkOffset,old){var axis=this.axis,chart=axis.chart,cHeight=old&&chart.oldChartHeight||chart.chartHeight;return{x:horiz?axis.translate(pos+tickmarkOffset,null,null,old)+axis.transB:axis.left+axis.offset+(axis.opposite?(old&&chart.oldChartWidth||chart.chartWidth)-axis.right-axis.left:0),y:horiz?cHeight-axis.bottom+axis.offset-(axis.opposite?axis.height:0):cHeight-axis.translate(pos+tickmarkOffset,null,null,old)-axis.transB}},getLabelPosition:function(x,y,label,horiz,labelOptions,tickmarkOffset,index,step){var axis=this.axis,transA=axis.transA,reversed=axis.reversed,staggerLines=axis.staggerLines,rotCorr=axis.tickRotCorr||{x:0,y:0},yOffset=pick(labelOptions.y,rotCorr.y+(2===axis.side?8:-(label.getBBox().height/2))),line;return x=x+labelOptions.x+rotCorr.x-(tickmarkOffset&&horiz?tickmarkOffset*transA*(reversed?-1:1):0),y=y+yOffset-(tickmarkOffset&&!horiz?tickmarkOffset*transA*(reversed?1:-1):0),staggerLines&&(line=index/(step||1)%staggerLines,y+=line*(axis.labelOffset/staggerLines)),{x:x,y:mathRound(y)}},getMarkPath:function(x,y,tickLength,tickWidth,horiz,renderer){return renderer.crispLine([M,x,y,L,x+(horiz?0:-tickLength),y+(horiz?tickLength:0)],tickWidth)},render:function(index,old,opacity){var tick=this,axis=tick.axis,options=axis.options,chart=axis.chart,renderer=chart.renderer,horiz=axis.horiz,type=tick.type,label=tick.label,pos=tick.pos,labelOptions=options.labels,gridLine=tick.gridLine,gridPrefix=type?type+"Grid":"grid",tickPrefix=type?type+"Tick":"tick",gridLineWidth=options[gridPrefix+"LineWidth"],gridLineColor=options[gridPrefix+"LineColor"],dashStyle=options[gridPrefix+"LineDashStyle"],tickLength=options[tickPrefix+"Length"],tickWidth=options[tickPrefix+"Width"]||0,tickColor=options[tickPrefix+"Color"],tickPosition=options[tickPrefix+"Position"],gridLinePath,mark=tick.mark,markPath,step=labelOptions.step,attribs,show=!0,tickmarkOffset=axis.tickmarkOffset,xy=tick.getPosition(horiz,pos,tickmarkOffset,old),x=xy.x,y=xy.y,reverseCrisp=horiz&&x===axis.pos+axis.len||!horiz&&y===axis.pos?-1:1;opacity=pick(opacity,1),this.isActive=!0,gridLineWidth&&(gridLinePath=axis.getPlotLinePath(pos+tickmarkOffset,gridLineWidth*reverseCrisp,old,!0),gridLine===UNDEFINED&&(attribs={stroke:gridLineColor,"stroke-width":gridLineWidth},dashStyle&&(attribs.dashstyle=dashStyle),type||(attribs.zIndex=1),old&&(attribs.opacity=0),tick.gridLine=gridLine=gridLineWidth?renderer.path(gridLinePath).attr(attribs).add(axis.gridGroup):null),!old&&gridLine&&gridLinePath&&gridLine[tick.isNew?"attr":"animate"]({d:gridLinePath,opacity:opacity})),tickWidth&&tickLength&&("inside"===tickPosition&&(tickLength=-tickLength),axis.opposite&&(tickLength=-tickLength),markPath=tick.getMarkPath(x,y,tickLength,tickWidth*reverseCrisp,horiz,renderer),mark?mark.animate({d:markPath,opacity:opacity}):tick.mark=renderer.path(markPath).attr({stroke:tickColor,"stroke-width":tickWidth,opacity:opacity}).add(axis.axisGroup)),label&&!isNaN(x)&&(label.xy=xy=tick.getLabelPosition(x,y,label,horiz,labelOptions,tickmarkOffset,index,step),tick.isFirst&&!tick.isLast&&!pick(options.showFirstLabel,1)||tick.isLast&&!tick.isFirst&&!pick(options.showLastLabel,1)?show=!1:!horiz||axis.isRadial||labelOptions.step||labelOptions.rotation||old||0===opacity||tick.handleOverflow(xy),step&&index%step&&(show=!1),show&&!isNaN(xy.y)?(xy.opacity=opacity,label[tick.isNew?"attr":"animate"](xy),tick.isNew=!1):label.attr("y",-9999))},destroy:function(){destroyObjectProperties(this,this.axis)}},Highcharts.PlotLineOrBand=function(axis,options){this.axis=axis,options&&(this.options=options,this.id=options.id)},Highcharts.PlotLineOrBand.prototype={render:function(){var plotLine=this,axis=plotLine.axis,horiz=axis.horiz,options=plotLine.options,optionsLabel=options.label,label=plotLine.label,width=options.width,to=options.to,from=options.from,isBand=defined(from)&&defined(to),value=options.value,dashStyle=options.dashStyle,svgElem=plotLine.svgElem,path=[],addEvent,eventType,xs,ys,x,y,color=options.color,zIndex=options.zIndex,events=options.events,attribs={},renderer=axis.chart.renderer;if(axis.isLog&&(from=log2lin(from),to=log2lin(to),value=log2lin(value)),width)path=axis.getPlotLinePath(value,width),attribs={stroke:color,"stroke-width":width},dashStyle&&(attribs.dashstyle=dashStyle);else{if(!isBand)return;path=axis.getPlotBandPath(from,to,options),color&&(attribs.fill=color),options.borderWidth&&(attribs.stroke=options.borderColor,attribs["stroke-width"]=options.borderWidth)}if(defined(zIndex)&&(attribs.zIndex=zIndex),svgElem)path?svgElem.animate({d:path},null,svgElem.onGetPath):(svgElem.hide(),svgElem.onGetPath=function(){svgElem.show()},label&&(plotLine.label=label=label.destroy()));else if(path&&path.length&&(plotLine.svgElem=svgElem=renderer.path(path).attr(attribs).add(),events)){addEvent=function(eventType){svgElem.on(eventType,function(e){events[eventType].apply(plotLine,[e])})};for(eventType in events)addEvent(eventType)}return optionsLabel&&defined(optionsLabel.text)&&path&&path.length&&axis.width>0&&axis.height>0?(optionsLabel=merge({align:horiz&&isBand&&"center",x:horiz?!isBand&&4:10,verticalAlign:!horiz&&isBand&&"middle",y:horiz?isBand?16:10:isBand?6:-4,rotation:horiz&&!isBand&&90},optionsLabel),label||(attribs={align:optionsLabel.textAlign||optionsLabel.align,rotation:optionsLabel.rotation},defined(zIndex)&&(attribs.zIndex=zIndex),plotLine.label=label=renderer.text(optionsLabel.text,0,0,optionsLabel.useHTML).attr(attribs).css(optionsLabel.style).add()),xs=[path[1],path[4],isBand?path[6]:path[1]],ys=[path[2],path[5],isBand?path[7]:path[2]],x=arrayMin(xs),y=arrayMin(ys),label.align(optionsLabel,!1,{x:x,y:y,width:arrayMax(xs)-x,height:arrayMax(ys)-y}),label.show()):label&&label.hide(),plotLine},destroy:function(){erase(this.axis.plotLinesAndBands,this),delete this.axis,destroyObjectProperties(this)}},AxisPlotLineOrBandExtension={getPlotBandPath:function(from,to){var toPath=this.getPlotLinePath(to,null,null,!0),path=this.getPlotLinePath(from,null,null,!0);return path&&toPath&&""+path!=""+toPath?path.push(toPath[4],toPath[5],toPath[1],toPath[2]):path=null,path},addPlotBand:function(options){return this.addPlotBandOrLine(options,"plotBands")},addPlotLine:function(options){return this.addPlotBandOrLine(options,"plotLines")},addPlotBandOrLine:function(options,coll){var obj=new Highcharts.PlotLineOrBand(this,options).render(),userOptions=this.userOptions;return obj&&(coll&&(userOptions[coll]=userOptions[coll]||[],userOptions[coll].push(options)),this.plotLinesAndBands.push(obj)),obj},removePlotBandOrLine:function(id){for(var plotLinesAndBands=this.plotLinesAndBands,options=this.options,userOptions=this.userOptions,i=plotLinesAndBands.length;i--;)plotLinesAndBands[i].id===id&&plotLinesAndBands[i].destroy();each([options.plotLines||[],userOptions.plotLines||[],options.plotBands||[],userOptions.plotBands||[]],function(arr){for(i=arr.length;i--;)arr[i].id===id&&erase(arr,arr[i])})}};var Axis=Highcharts.Axis=function(){this.init.apply(this,arguments)};Axis.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#D8D8D8",labels:{enabled:!0,style:{color:"#606060",cursor:"default",fontSize:"11px"},x:0,y:15},lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return Highcharts.numberFormat(this.total,-1)},style:merge(defaultPlotOptions.line.dataLabels.style,{color:"#000000"})}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0,y:-15},title:{rotation:0}},init:function(chart,userOptions){var isXAxis=userOptions.isX,axis=this;axis.horiz=chart.inverted?!isXAxis:isXAxis,axis.isXAxis=isXAxis,axis.coll=isXAxis?"xAxis":"yAxis",axis.opposite=userOptions.opposite,axis.side=userOptions.side||(axis.horiz?axis.opposite?0:2:axis.opposite?1:3),axis.setOptions(userOptions);var options=this.options,type=options.type,isDatetimeAxis="datetime"===type;axis.labelFormatter=options.labels.formatter||axis.defaultLabelFormatter,axis.userOptions=userOptions,axis.minPixelPadding=0,axis.chart=chart,axis.reversed=options.reversed,axis.zoomEnabled=options.zoomEnabled!==!1,axis.categories=options.categories||"category"===type,axis.names=axis.names||[],axis.isLog="logarithmic"===type,axis.isDatetimeAxis=isDatetimeAxis,axis.isLinked=defined(options.linkedTo),axis.ticks={},axis.labelEdge=[],axis.minorTicks={},axis.plotLinesAndBands=[],axis.alternateBands={},axis.len=0,axis.minRange=axis.userMinRange=options.minRange||options.maxZoom,axis.range=options.range,axis.offset=options.offset||0,axis.stacks={},axis.oldStacks={},axis.max=null,axis.min=null,axis.crosshair=pick(options.crosshair,splat(chart.options.tooltip.crosshairs)[isXAxis?0:1],!1);var eventType,events=axis.options.events;-1===inArray(axis,chart.axes)&&(isXAxis&&!this.isColorAxis?chart.axes.splice(chart.xAxis.length,0,axis):chart.axes.push(axis),chart[axis.coll].push(axis)),axis.series=axis.series||[],chart.inverted&&isXAxis&&axis.reversed===UNDEFINED&&(axis.reversed=!0),axis.removePlotBand=axis.removePlotBandOrLine,axis.removePlotLine=axis.removePlotBandOrLine;for(eventType in events)addEvent(axis,eventType,events[eventType]);axis.isLog&&(axis.val2lin=log2lin,axis.lin2val=lin2log)},setOptions:function(userOptions){this.options=merge(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],merge(defaultOptions[this.coll],userOptions))},defaultLabelFormatter:function(){var axis=this.axis,value=this.value,categories=axis.categories,dateTimeLabelFormat=this.dateTimeLabelFormat,numericSymbols=defaultOptions.lang.numericSymbols,i=numericSymbols&&numericSymbols.length,multi,ret,formatOption=axis.options.labels.format,numericSymbolDetector=axis.isLog?value:axis.tickInterval;if(formatOption)ret=format(formatOption,this);else if(categories)ret=value;else if(dateTimeLabelFormat)ret=dateFormat(dateTimeLabelFormat,value);else if(i&&numericSymbolDetector>=1e3)for(;i--&&ret===UNDEFINED;)multi=Math.pow(1e3,i+1),numericSymbolDetector>=multi&&null!==numericSymbols[i]&&(ret=Highcharts.numberFormat(value/multi,-1)+numericSymbols[i]);return ret===UNDEFINED&&(ret=mathAbs(value)>=1e4?Highcharts.numberFormat(value,0):Highcharts.numberFormat(value,-1,UNDEFINED,"")),ret},getSeriesExtremes:function(){var axis=this,chart=axis.chart;axis.hasVisibleSeries=!1,axis.dataMin=axis.dataMax=axis.ignoreMinPadding=axis.ignoreMaxPadding=null,axis.buildStacks&&axis.buildStacks(),each(axis.series,function(series){if(series.visible||!chart.options.chart.ignoreHiddenSeries){var seriesOptions=series.options,xData,threshold=seriesOptions.threshold,seriesDataMin,seriesDataMax;axis.hasVisibleSeries=!0,axis.isLog&&0>=threshold&&(threshold=null),axis.isXAxis?(xData=series.xData,xData.length&&(axis.dataMin=mathMin(pick(axis.dataMin,xData[0]),arrayMin(xData)),axis.dataMax=mathMax(pick(axis.dataMax,xData[0]),arrayMax(xData)))):(series.getExtremes(),seriesDataMax=series.dataMax,seriesDataMin=series.dataMin,defined(seriesDataMin)&&defined(seriesDataMax)&&(axis.dataMin=mathMin(pick(axis.dataMin,seriesDataMin),seriesDataMin),axis.dataMax=mathMax(pick(axis.dataMax,seriesDataMax),seriesDataMax)),defined(threshold)&&(axis.dataMin>=threshold?(axis.dataMin=threshold,axis.ignoreMinPadding=!0):threshold>axis.dataMax&&(axis.dataMax=threshold,axis.ignoreMaxPadding=!0)))}})},translate:function(val,backwards,cvsCoord,old,handleLog,pointPlacement){var axis=this,sign=1,cvsOffset=0,localA=old?axis.oldTransA:axis.transA,localMin=old?axis.oldMin:axis.min,returnValue,minPixelPadding=axis.minPixelPadding,doPostTranslate=(axis.doPostTranslate||axis.isLog&&handleLog)&&axis.lin2val;return localA||(localA=axis.transA),cvsCoord&&(sign*=-1,cvsOffset=axis.len),axis.reversed&&(sign*=-1,cvsOffset-=sign*(axis.sector||axis.len)),backwards?(val=val*sign+cvsOffset,val-=minPixelPadding,returnValue=val/localA+localMin,doPostTranslate&&(returnValue=axis.lin2val(returnValue))):(doPostTranslate&&(val=axis.val2lin(val)),"between"===pointPlacement&&(pointPlacement=.5),returnValue=sign*(val-localMin)*localA+cvsOffset+sign*minPixelPadding+(isNumber(pointPlacement)?localA*pointPlacement*axis.pointRange:0)),returnValue},toPixels:function(value,paneCoordinates){return this.translate(value,!1,!this.horiz,null,!0)+(paneCoordinates?0:this.pos)},toValue:function(pixel,paneCoordinates){return this.translate(pixel-(paneCoordinates?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(value,lineWidth,old,force,translatedValue){var axis=this,chart=axis.chart,axisLeft=axis.left,axisTop=axis.top,x1,y1,x2,y2,cHeight=old&&chart.oldChartHeight||chart.chartHeight,cWidth=old&&chart.oldChartWidth||chart.chartWidth,skip,transB=axis.transB,between=function(x,a,b){return(a>x||x>b)&&(force?x=mathMin(mathMax(a,x),b):skip=!0),x};return translatedValue=pick(translatedValue,axis.translate(value,null,null,old)),x1=x2=mathRound(translatedValue+transB),y1=y2=mathRound(cHeight-translatedValue-transB),isNaN(translatedValue)?skip=!0:axis.horiz?(y1=axisTop,y2=cHeight-axis.bottom,x1=x2=between(x1,axisLeft,axisLeft+axis.width)):(x1=axisLeft,x2=cWidth-axis.right,y1=y2=between(y1,axisTop,axisTop+axis.height)),skip&&!force?null:chart.renderer.crispLine([M,x1,y1,L,x2,y2],lineWidth||1)},getLinearTickPositions:function(tickInterval,min,max){var pos,lastPos,roundedMin=correctFloat(mathFloor(min/tickInterval)*tickInterval),roundedMax=correctFloat(mathCeil(max/tickInterval)*tickInterval),tickPositions=[];if(min===max&&isNumber(min))return[min];for(pos=roundedMin;roundedMax>=pos&&(tickPositions.push(pos),pos=correctFloat(pos+tickInterval),pos!==lastPos);)lastPos=pos;return tickPositions},getMinorTickPositions:function(){var axis=this,options=axis.options,tickPositions=axis.tickPositions,minorTickInterval=axis.minorTickInterval,minorTickPositions=[],pos,i,min=axis.min,max=axis.max,range=max-min,len;if(range&&axis.len/3>range/minorTickInterval)if(axis.isLog)for(len=tickPositions.length,i=1;len>i;i++)minorTickPositions=minorTickPositions.concat(axis.getLogTickPositions(minorTickInterval,tickPositions[i-1],tickPositions[i],!0));else if(axis.isDatetimeAxis&&"auto"===options.minorTickInterval)minorTickPositions=minorTickPositions.concat(axis.getTimeTicks(axis.normalizeTimeTickInterval(minorTickInterval),min,max,options.startOfWeek));else for(pos=min+(tickPositions[0]-min)%minorTickInterval;max>=pos;pos+=minorTickInterval)minorTickPositions.push(pos);return axis.trimTicks(minorTickPositions),minorTickPositions},adjustForMinRange:function(){var axis=this,options=axis.options,min=axis.min,max=axis.max,zoomOffset,spaceAvailable=axis.dataMax-axis.dataMin>=axis.minRange,closestDataRange,i,distance,xData,loopLength,minArgs,maxArgs;if(axis.isXAxis&&axis.minRange===UNDEFINED&&!axis.isLog&&(defined(options.min)||defined(options.max)?axis.minRange=null:(each(axis.series,function(series){for(xData=series.xData,loopLength=series.xIncrement?1:xData.length-1,i=loopLength;i>0;i--)distance=xData[i]-xData[i-1],(closestDataRange===UNDEFINED||closestDataRange>distance)&&(closestDataRange=distance)}),axis.minRange=mathMin(5*closestDataRange,axis.dataMax-axis.dataMin))),axis.minRange>max-min){var minRange=axis.minRange;zoomOffset=(minRange-max+min)/2,minArgs=[min-zoomOffset,pick(options.min,min-zoomOffset)],spaceAvailable&&(minArgs[2]=axis.dataMin),min=arrayMax(minArgs),maxArgs=[min+minRange,pick(options.max,min+minRange)],spaceAvailable&&(maxArgs[2]=axis.dataMax),max=arrayMin(maxArgs),minRange>max-min&&(minArgs[0]=max-minRange,minArgs[1]=pick(options.min,max-minRange),min=arrayMax(minArgs))}axis.min=min,axis.max=max},setAxisTranslation:function(saveOld){var axis=this,range=axis.max-axis.min,pointRange=axis.axisPointRange||0,closestPointRange,minPointOffset=0,pointRangePadding=0,linkedParent=axis.linkedParent,ordinalCorrection,hasCategories=!!axis.categories,transA=axis.transA,isXAxis=axis.isXAxis;(isXAxis||hasCategories||pointRange)&&(linkedParent?(minPointOffset=linkedParent.minPointOffset,pointRangePadding=linkedParent.pointRangePadding):each(axis.series,function(series){var seriesPointRange=hasCategories?1:isXAxis?series.pointRange:axis.axisPointRange||0,pointPlacement=series.options.pointPlacement,seriesClosestPointRange=series.closestPointRange;seriesPointRange>range&&(seriesPointRange=0),pointRange=mathMax(pointRange,seriesPointRange),axis.single||(minPointOffset=mathMax(minPointOffset,isString(pointPlacement)?0:seriesPointRange/2),pointRangePadding=mathMax(pointRangePadding,"on"===pointPlacement?0:seriesPointRange)),!series.noSharedTooltip&&defined(seriesClosestPointRange)&&(closestPointRange=defined(closestPointRange)?mathMin(closestPointRange,seriesClosestPointRange):seriesClosestPointRange)}),ordinalCorrection=axis.ordinalSlope&&closestPointRange?axis.ordinalSlope/closestPointRange:1,axis.minPointOffset=minPointOffset*=ordinalCorrection,axis.pointRangePadding=pointRangePadding*=ordinalCorrection,axis.pointRange=mathMin(pointRange,range),isXAxis&&(axis.closestPointRange=closestPointRange)),saveOld&&(axis.oldTransA=transA),axis.translationSlope=axis.transA=transA=axis.len/(range+pointRangePadding||1),axis.transB=axis.horiz?axis.left:axis.bottom,axis.minPixelPadding=transA*minPointOffset},setTickInterval:function(secondPass){var axis=this,chart=axis.chart,options=axis.options,isLog=axis.isLog,isDatetimeAxis=axis.isDatetimeAxis,isXAxis=axis.isXAxis,isLinked=axis.isLinked,maxPadding=options.maxPadding,minPadding=options.minPadding,length,linkedParentExtremes,tickIntervalOption=options.tickInterval,minTickInterval,tickPixelIntervalOption=options.tickPixelInterval,categories=axis.categories;isDatetimeAxis||categories||isLinked||this.getTickAmount(),isLinked?(axis.linkedParent=chart[axis.coll][options.linkedTo],linkedParentExtremes=axis.linkedParent.getExtremes(),axis.min=pick(linkedParentExtremes.min,linkedParentExtremes.dataMin),axis.max=pick(linkedParentExtremes.max,linkedParentExtremes.dataMax),options.type!==axis.linkedParent.options.type&&error(11,1)):(axis.min=pick(axis.userMin,options.min,axis.dataMin),axis.max=pick(axis.userMax,options.max,axis.dataMax)),isLog&&(!secondPass&&0>=mathMin(axis.min,pick(axis.dataMin,axis.min))&&error(10,1),axis.min=correctFloat(log2lin(axis.min)),axis.max=correctFloat(log2lin(axis.max))),axis.range&&defined(axis.max)&&(axis.userMin=axis.min=mathMax(axis.min,axis.max-axis.range),axis.userMax=axis.max,axis.range=null),axis.beforePadding&&axis.beforePadding(),axis.adjustForMinRange(),categories||axis.axisPointRange||axis.usePercentage||isLinked||!defined(axis.min)||!defined(axis.max)||(length=axis.max-axis.min,length&&(defined(options.min)||defined(axis.userMin)||!minPadding||!(0>axis.dataMin)&&axis.ignoreMinPadding||(axis.min-=length*minPadding),defined(options.max)||defined(axis.userMax)||!maxPadding||!(axis.dataMax>0)&&axis.ignoreMaxPadding||(axis.max+=length*maxPadding))),isNumber(options.floor)&&(axis.min=mathMax(axis.min,options.floor)),isNumber(options.ceiling)&&(axis.max=mathMin(axis.max,options.ceiling)),axis.tickInterval=axis.min===axis.max||void 0===axis.min||void 0===axis.max?1:isLinked&&!tickIntervalOption&&tickPixelIntervalOption===axis.linkedParent.options.tickPixelInterval?axis.linkedParent.tickInterval:pick(tickIntervalOption,this.tickAmount?(axis.max-axis.min)/mathMax(this.tickAmount-1,1):void 0,categories?1:(axis.max-axis.min)*tickPixelIntervalOption/mathMax(axis.len,tickPixelIntervalOption)),isXAxis&&!secondPass&&each(axis.series,function(series){series.processData(axis.min!==axis.oldMin||axis.max!==axis.oldMax)}),axis.setAxisTranslation(!0),axis.beforeSetTickPositions&&axis.beforeSetTickPositions(),axis.postProcessTickInterval&&(axis.tickInterval=axis.postProcessTickInterval(axis.tickInterval)),axis.pointRange&&(axis.tickInterval=mathMax(axis.pointRange,axis.tickInterval)),minTickInterval=pick(options.minTickInterval,axis.isDatetimeAxis&&axis.closestPointRange),!tickIntervalOption&&minTickInterval>axis.tickInterval&&(axis.tickInterval=minTickInterval),isDatetimeAxis||isLog||tickIntervalOption||(axis.tickInterval=normalizeTickInterval(axis.tickInterval,null,getMagnitude(axis.tickInterval),pick(options.allowDecimals,!(axis.tickInterval>.5&&5>axis.tickInterval&&axis.max>1e3&&9999>axis.max)),!!this.tickAmount)),!this.tickAmount&&this.len&&(axis.tickInterval=axis.unsquish()),this.setTickPositions()},setTickPositions:function(){var options=this.options,tickPositions,tickPositionsOption=options.tickPositions,tickPositioner=options.tickPositioner,startOnTick=options.startOnTick,endOnTick=options.endOnTick,single;
this.tickmarkOffset=this.categories&&"between"===options.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===options.minorTickInterval&&this.tickInterval?this.tickInterval/5:options.minorTickInterval,this.tickPositions=tickPositions=options.tickPositions&&options.tickPositions.slice(),tickPositions||(tickPositions=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,options.units),this.min,this.max,options.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickPositions=tickPositions,tickPositioner&&(tickPositioner=tickPositioner.apply(this,[this.min,this.max]),tickPositioner&&(this.tickPositions=tickPositions=tickPositioner))),this.isLinked||(this.trimTicks(tickPositions,startOnTick,endOnTick),this.min===this.max&&defined(this.min)&&!this.tickAmount&&(single=!0,this.min-=.5,this.max+=.5),this.single=single,tickPositionsOption||tickPositioner||this.adjustTickAmount())},trimTicks:function(tickPositions,startOnTick,endOnTick){var roundedMin=tickPositions[0],roundedMax=tickPositions[tickPositions.length-1],minPointOffset=this.minPointOffset||0;startOnTick?this.min=roundedMin:this.min-minPointOffset>roundedMin&&tickPositions.shift(),endOnTick?this.max=roundedMax:roundedMax>this.max+minPointOffset&&tickPositions.pop(),0===tickPositions.length&&defined(roundedMin)&&tickPositions.push((roundedMax+roundedMin)/2)},getTickAmount:function(){var others={},hasOther,options=this.options,tickAmount=options.tickAmount,tickPixelInterval=options.tickPixelInterval;!defined(options.tickInterval)&&tickPixelInterval>this.len&&!this.isRadial&&!this.isLog&&options.startOnTick&&options.endOnTick&&(tickAmount=2),tickAmount||this.chart.options.chart.alignTicks===!1||options.alignTicks===!1||(each(this.chart[this.coll],function(axis){var options=axis.options,horiz=axis.horiz,key=[horiz?options.left:options.top,horiz?options.width:options.height,options.pane].join(",");others[key]?hasOther=!0:others[key]=1}),hasOther&&(tickAmount=mathCeil(this.len/tickPixelInterval)+1)),4>tickAmount&&(this.finalTickAmt=tickAmount,tickAmount=5),this.tickAmount=tickAmount},adjustTickAmount:function(){var tickInterval=this.tickInterval,tickPositions=this.tickPositions,tickAmount=this.tickAmount,finalTickAmt=this.finalTickAmt,currentTickAmount=tickPositions&&tickPositions.length,i,len;if(tickAmount>currentTickAmount){for(;tickAmount>tickPositions.length;)tickPositions.push(correctFloat(tickPositions[tickPositions.length-1]+tickInterval));this.transA*=(currentTickAmount-1)/(tickAmount-1),this.max=tickPositions[tickPositions.length-1]}else currentTickAmount>tickAmount&&(this.tickInterval*=2,this.setTickPositions());if(defined(finalTickAmt)){for(i=len=tickPositions.length;i--;)(3===finalTickAmt&&1===i%2||2>=finalTickAmt&&i>0&&len-1>i)&&tickPositions.splice(i,1);this.finalTickAmt=UNDEFINED}},setScale:function(){var axis=this,stacks=axis.stacks,type,i,isDirtyData,isDirtyAxisLength;if(axis.oldMin=axis.min,axis.oldMax=axis.max,axis.oldAxisLength=axis.len,axis.setAxisSize(),isDirtyAxisLength=axis.len!==axis.oldAxisLength,each(axis.series,function(series){(series.isDirtyData||series.isDirty||series.xAxis.isDirty)&&(isDirtyData=!0)}),isDirtyAxisLength||isDirtyData||axis.isLinked||axis.forceRedraw||axis.userMin!==axis.oldUserMin||axis.userMax!==axis.oldUserMax){if(!axis.isXAxis)for(type in stacks)for(i in stacks[type])stacks[type][i].total=null,stacks[type][i].cum=0;axis.forceRedraw=!1,axis.getSeriesExtremes(),axis.setTickInterval(),axis.oldUserMin=axis.userMin,axis.oldUserMax=axis.userMax,axis.isDirty||(axis.isDirty=isDirtyAxisLength||axis.min!==axis.oldMin||axis.max!==axis.oldMax)}else if(!axis.isXAxis){axis.oldStacks&&(stacks=axis.stacks=axis.oldStacks);for(type in stacks)for(i in stacks[type])stacks[type][i].cum=stacks[type][i].total}},setExtremes:function(newMin,newMax,redraw,animation,eventArguments){var axis=this,chart=axis.chart;redraw=pick(redraw,!0),each(axis.series,function(serie){delete serie.kdTree}),eventArguments=extend(eventArguments,{min:newMin,max:newMax}),fireEvent(axis,"setExtremes",eventArguments,function(){axis.userMin=newMin,axis.userMax=newMax,axis.eventArgs=eventArguments,axis.isDirtyExtremes=!0,redraw&&chart.redraw(animation)})},zoom:function(newMin,newMax){var dataMin=this.dataMin,dataMax=this.dataMax,options=this.options;return this.allowZoomOutside||(defined(dataMin)&&mathMin(dataMin,pick(options.min,dataMin))>=newMin&&(newMin=UNDEFINED),defined(dataMax)&&newMax>=mathMax(dataMax,pick(options.max,dataMax))&&(newMax=UNDEFINED)),this.displayBtn=newMin!==UNDEFINED||newMax!==UNDEFINED,this.setExtremes(newMin,newMax,!1,UNDEFINED,{trigger:"zoom"}),!0},setAxisSize:function(){var chart=this.chart,options=this.options,offsetLeft=options.offsetLeft||0,offsetRight=options.offsetRight||0,horiz=this.horiz,width=pick(options.width,chart.plotWidth-offsetLeft+offsetRight),height=pick(options.height,chart.plotHeight),top=pick(options.top,chart.plotTop),left=pick(options.left,chart.plotLeft+offsetLeft),percentRegex=/%$/;percentRegex.test(height)&&(height=parseFloat(height)/100*chart.plotHeight),percentRegex.test(top)&&(top=parseFloat(top)/100*chart.plotHeight+chart.plotTop),this.left=left,this.top=top,this.width=width,this.height=height,this.bottom=chart.chartHeight-height-top,this.right=chart.chartWidth-width-left,this.len=mathMax(horiz?width:height,0),this.pos=horiz?left:top},getExtremes:function(){var axis=this,isLog=axis.isLog;return{min:isLog?correctFloat(lin2log(axis.min)):axis.min,max:isLog?correctFloat(lin2log(axis.max)):axis.max,dataMin:axis.dataMin,dataMax:axis.dataMax,userMin:axis.userMin,userMax:axis.userMax}},getThreshold:function(threshold){var axis=this,isLog=axis.isLog,realMin=isLog?lin2log(axis.min):axis.min,realMax=isLog?lin2log(axis.max):axis.max;return realMin>threshold||null===threshold?threshold=realMin:threshold>realMax&&(threshold=realMax),axis.translate(threshold,0,1,0,1)},autoLabelAlign:function(rotation){var ret,angle=(pick(rotation,0)-90*this.side+720)%360;return ret=angle>15&&165>angle?"right":angle>195&&345>angle?"left":"center"},unsquish:function(){var chart=this.chart,ticks=this.ticks,labelOptions=this.options.labels,horiz=this.horiz,tickInterval=this.tickInterval,newTickInterval=tickInterval,slotSize=this.len/(((this.categories?1:0)+this.max-this.min)/tickInterval),rotation,rotationOption=labelOptions.rotation,labelMetrics=chart.renderer.fontMetrics(labelOptions.style.fontSize,ticks[0]&&ticks[0].label),step,bestScore=Number.MAX_VALUE,autoRotation,getStep=function(spaceNeeded){var step=spaceNeeded/(slotSize||1);return step=step>1?mathCeil(step):1,step*tickInterval};return horiz?(autoRotation=defined(rotationOption)?[rotationOption]:80>slotSize&&!labelOptions.staggerLines&&!labelOptions.step&&labelOptions.autoRotation,autoRotation&&each(autoRotation,function(rot){var score;(rot===rotationOption||rot&&rot>=-90&&90>=rot)&&(step=getStep(mathAbs(labelMetrics.h/mathSin(deg2rad*rot))),score=step+mathAbs(rot/360),bestScore>score&&(bestScore=score,rotation=rot,newTickInterval=step))})):newTickInterval=getStep(labelMetrics.h),this.autoRotation=autoRotation,this.labelRotation=rotation,newTickInterval},renderUnsquish:function(){var chart=this.chart,renderer=chart.renderer,tickPositions=this.tickPositions,ticks=this.ticks,labelOptions=this.options.labels,horiz=this.horiz,margin=chart.margin,slotWidth=this.slotWidth=horiz&&!labelOptions.step&&!labelOptions.rotation&&(this.staggerLines||1)*chart.plotWidth/tickPositions.length||!horiz&&(margin[3]&&margin[3]-chart.spacing[3]||.33*chart.chartWidth),innerWidth=mathMax(1,mathRound(slotWidth-2*(labelOptions.padding||5))),attr={},labelMetrics=renderer.fontMetrics(labelOptions.style.fontSize,ticks[0]&&ticks[0].label),css,labelLength=0,label,i,pos;if(isString(labelOptions.rotation)||(attr.rotation=labelOptions.rotation),this.autoRotation)each(tickPositions,function(tick){tick=ticks[tick],tick&&tick.labelLength>labelLength&&(labelLength=tick.labelLength)}),labelLength>innerWidth&&labelLength>labelMetrics.h?attr.rotation=this.labelRotation:this.labelRotation=0;else if(slotWidth)for(css={width:innerWidth+PX,textOverflow:"clip"},i=tickPositions.length;!horiz&&i--;)pos=tickPositions[i],label=ticks[pos].label,label&&this.len/tickPositions.length-4<label.getBBox().height&&(label.specCss={textOverflow:"ellipsis"});attr.rotation&&(css={width:(labelLength>.5*chart.chartHeight?.33*chart.chartHeight:chart.chartHeight)+PX,textOverflow:"ellipsis"}),this.labelAlign=attr.align=labelOptions.align||this.autoLabelAlign(this.labelRotation),each(tickPositions,function(pos){var tick=ticks[pos],label=tick&&tick.label;label&&(css&&label.css(merge(css,label.specCss)),delete label.specCss,label.attr(attr),tick.rotation=attr.rotation)}),this.tickRotCorr=renderer.rotCorr(labelMetrics.b,this.labelRotation||0,2===this.side)},getOffset:function(){var axis=this,chart=axis.chart,renderer=chart.renderer,options=axis.options,tickPositions=axis.tickPositions,ticks=axis.ticks,horiz=axis.horiz,side=axis.side,invertedSide=chart.inverted?[1,0,3,2][side]:side,hasData,showAxis,titleOffset=0,titleOffsetOption,titleMargin=0,axisTitleOptions=options.title,labelOptions=options.labels,labelOffset=0,labelOffsetPadded,axisOffset=chart.axisOffset,clipOffset=chart.clipOffset,directionFactor=[-1,1,1,-1][side],n,lineHeightCorrection;if(axis.hasData=hasData=axis.hasVisibleSeries||defined(axis.min)&&defined(axis.max)&&!!tickPositions,axis.showAxis=showAxis=hasData||pick(options.showEmpty,!0),axis.staggerLines=axis.horiz&&labelOptions.staggerLines,axis.axisGroup||(axis.gridGroup=renderer.g("grid").attr({zIndex:options.gridZIndex||1}).add(),axis.axisGroup=renderer.g("axis").attr({zIndex:options.zIndex||2}).add(),axis.labelGroup=renderer.g("axis-labels").attr({zIndex:labelOptions.zIndex||7}).addClass(PREFIX+axis.coll.toLowerCase()+"-labels").add()),hasData||axis.isLinked)each(tickPositions,function(pos){ticks[pos]?ticks[pos].addLabel():ticks[pos]=new Tick(axis,pos)}),axis.renderUnsquish(),each(tickPositions,function(pos){(0===side||2===side||{1:"left",3:"right"}[side]===axis.labelAlign)&&(labelOffset=mathMax(ticks[pos].getLabelSize(),labelOffset))}),axis.staggerLines&&(labelOffset*=axis.staggerLines,axis.labelOffset=labelOffset);else for(n in ticks)ticks[n].destroy(),delete ticks[n];axisTitleOptions&&axisTitleOptions.text&&axisTitleOptions.enabled!==!1&&(axis.axisTitle||(axis.axisTitle=renderer.text(axisTitleOptions.text,0,0,axisTitleOptions.useHTML).attr({zIndex:7,rotation:axisTitleOptions.rotation||0,align:axisTitleOptions.textAlign||{low:"left",middle:"center",high:"right"}[axisTitleOptions.align]}).addClass(PREFIX+this.coll.toLowerCase()+"-title").css(axisTitleOptions.style).add(axis.axisGroup),axis.axisTitle.isNew=!0),showAxis&&(titleOffset=axis.axisTitle.getBBox()[horiz?"height":"width"],titleOffsetOption=axisTitleOptions.offset,titleMargin=defined(titleOffsetOption)?0:pick(axisTitleOptions.margin,horiz?5:10)),axis.axisTitle[showAxis?"show":"hide"]()),axis.offset=directionFactor*pick(options.offset,axisOffset[side]),axis.tickRotCorr=axis.tickRotCorr||{x:0,y:0},lineHeightCorrection=2===side?axis.tickRotCorr.y:0,labelOffsetPadded=labelOffset+titleMargin+(labelOffset&&directionFactor*(horiz?pick(labelOptions.y,axis.tickRotCorr.y+8):labelOptions.x)-lineHeightCorrection),axis.axisTitleMargin=pick(titleOffsetOption,labelOffsetPadded),axisOffset[side]=mathMax(axisOffset[side],axis.axisTitleMargin+titleOffset+directionFactor*axis.offset,labelOffsetPadded),clipOffset[invertedSide]=mathMax(clipOffset[invertedSide],2*mathFloor(options.lineWidth/2))},getLinePath:function(lineWidth){var chart=this.chart,opposite=this.opposite,offset=this.offset,horiz=this.horiz,lineLeft=this.left+(opposite?this.width:0)+offset,lineTop=chart.chartHeight-this.bottom-(opposite?this.height:0)+offset;return opposite&&(lineWidth*=-1),chart.renderer.crispLine([M,horiz?this.left:lineLeft,horiz?lineTop:this.top,L,horiz?chart.chartWidth-this.right:lineLeft,horiz?lineTop:chart.chartHeight-this.bottom],lineWidth)},getTitlePosition:function(){var horiz=this.horiz,axisLeft=this.left,axisTop=this.top,axisLength=this.len,axisTitleOptions=this.options.title,margin=horiz?axisLeft:axisTop,opposite=this.opposite,offset=this.offset,fontSize=pInt(axisTitleOptions.style.fontSize||12),alongAxis={low:margin+(horiz?0:axisLength),middle:margin+axisLength/2,high:margin+(horiz?axisLength:0)}[axisTitleOptions.align],offAxis=(horiz?axisTop+this.height:axisLeft)+(horiz?1:-1)*(opposite?-1:1)*this.axisTitleMargin+(2===this.side?fontSize:0);return{x:horiz?alongAxis:offAxis+(opposite?this.width:0)+offset+(axisTitleOptions.x||0),y:horiz?offAxis-(opposite?this.height:0)+offset:alongAxis+(axisTitleOptions.y||0)}},render:function(){var axis=this,chart=axis.chart,renderer=chart.renderer,options=axis.options,isLog=axis.isLog,isLinked=axis.isLinked,tickPositions=axis.tickPositions,axisTitle=axis.axisTitle,ticks=axis.ticks,minorTicks=axis.minorTicks,alternateBands=axis.alternateBands,stackLabelOptions=options.stackLabels,alternateGridColor=options.alternateGridColor,tickmarkOffset=axis.tickmarkOffset,lineWidth=options.lineWidth,linePath,hasRendered=chart.hasRendered,slideInTicks=hasRendered&&defined(axis.oldMin)&&!isNaN(axis.oldMin),hasData=axis.hasData,showAxis=axis.showAxis,from,to;axis.labelEdge.length=0,axis.overlap=!1,each([ticks,minorTicks,alternateBands],function(coll){var pos;for(pos in coll)coll[pos].isActive=!1}),(hasData||isLinked)&&(axis.minorTickInterval&&!axis.categories&&each(axis.getMinorTickPositions(),function(pos){minorTicks[pos]||(minorTicks[pos]=new Tick(axis,pos,"minor")),slideInTicks&&minorTicks[pos].isNew&&minorTicks[pos].render(null,!0),minorTicks[pos].render(null,!1,1)}),tickPositions.length&&(each(tickPositions,function(pos,i){(!isLinked||pos>=axis.min&&axis.max>=pos)&&(ticks[pos]||(ticks[pos]=new Tick(axis,pos)),slideInTicks&&ticks[pos].isNew&&ticks[pos].render(i,!0,.1),ticks[pos].render(i))}),tickmarkOffset&&(0===axis.min||axis.single)&&(ticks[-1]||(ticks[-1]=new Tick(axis,-1,null,!0)),ticks[-1].render(-1))),alternateGridColor&&each(tickPositions,function(pos,i){0===i%2&&axis.max>pos&&(alternateBands[pos]||(alternateBands[pos]=new Highcharts.PlotLineOrBand(axis)),from=pos+tickmarkOffset,to=tickPositions[i+1]!==UNDEFINED?tickPositions[i+1]+tickmarkOffset:axis.max,alternateBands[pos].options={from:isLog?lin2log(from):from,to:isLog?lin2log(to):to,color:alternateGridColor},alternateBands[pos].render(),alternateBands[pos].isActive=!0)}),axis._addedPlotLB||(each((options.plotLines||[]).concat(options.plotBands||[]),function(plotLineOptions){axis.addPlotBandOrLine(plotLineOptions)}),axis._addedPlotLB=!0)),each([ticks,minorTicks,alternateBands],function(coll){var pos,i,forDestruction=[],delay=globalAnimation?globalAnimation.duration||500:0,destroyInactiveItems=function(){for(i=forDestruction.length;i--;)coll[forDestruction[i]]&&!coll[forDestruction[i]].isActive&&(coll[forDestruction[i]].destroy(),delete coll[forDestruction[i]])};for(pos in coll)coll[pos].isActive||(coll[pos].render(pos,!1,0),coll[pos].isActive=!1,forDestruction.push(pos));coll!==alternateBands&&chart.hasRendered&&delay?delay&&setTimeout(destroyInactiveItems,delay):destroyInactiveItems()}),lineWidth&&(linePath=axis.getLinePath(lineWidth),axis.axisLine?axis.axisLine.animate({d:linePath}):axis.axisLine=renderer.path(linePath).attr({stroke:options.lineColor,"stroke-width":lineWidth,zIndex:7}).add(axis.axisGroup),axis.axisLine[showAxis?"show":"hide"]()),axisTitle&&showAxis&&(axisTitle[axisTitle.isNew?"attr":"animate"](axis.getTitlePosition()),axisTitle.isNew=!1),stackLabelOptions&&stackLabelOptions.enabled&&axis.renderStackTotals(),axis.isDirty=!1},redraw:function(){this.render(),each(this.plotLinesAndBands,function(plotLine){plotLine.render()}),each(this.series,function(series){series.isDirty=!0})},destroy:function(keepEvents){var axis=this,stacks=axis.stacks,stackKey,plotLinesAndBands=axis.plotLinesAndBands,i;keepEvents||removeEvent(axis);for(stackKey in stacks)destroyObjectProperties(stacks[stackKey]),stacks[stackKey]=null;for(each([axis.ticks,axis.minorTicks,axis.alternateBands],function(coll){destroyObjectProperties(coll)}),i=plotLinesAndBands.length;i--;)plotLinesAndBands[i].destroy();each(["stackTotalGroup","axisLine","axisTitle","axisGroup","cross","gridGroup","labelGroup"],function(prop){axis[prop]&&(axis[prop]=axis[prop].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(e,point){var path,options=this.crosshair,animation=options.animation,pos,attribs,categorized;if(this.crosshair&&(defined(point)||!pick(this.crosshair.snap,!0))!==!1){if(pick(options.snap,!0)?defined(point)&&(pos=this.isXAxis?point.plotX:this.len-point.plotY):pos=this.horiz?e.chartX-this.pos:this.len-e.chartY+this.pos,path=this.isRadial?this.getPlotLinePath(this.isXAxis?point.x:pick(point.stackY,point.y))||null:this.getPlotLinePath(null,null,null,null,pos)||null,null===path)return this.hideCrosshair(),void 0;this.cross?this.cross.attr({visibility:VISIBLE})[animation?"animate":"attr"]({d:path},animation):(categorized=this.categories&&!this.isRadial,attribs={"stroke-width":options.width||(categorized?this.transA:1),stroke:options.color||(categorized?"rgba(155,200,255,0.2)":"#C0C0C0"),zIndex:options.zIndex||2},options.dashStyle&&(attribs.dashstyle=options.dashStyle),this.cross=this.chart.renderer.path(path).attr(attribs).add())}else this.hideCrosshair()},hideCrosshair:function(){this.cross&&this.cross.hide()}},extend(Axis.prototype,AxisPlotLineOrBandExtension),Axis.prototype.getTimeTicks=function(normalizedInterval,min,max,startOfWeek){var tickPositions=[],i,higherRanks={},useUTC=defaultOptions.global.useUTC,minYear,minDate=new Date(min-getTZOffset(min)),interval=normalizedInterval.unitRange,count=normalizedInterval.count;if(defined(min)){minDate.setMilliseconds(interval>=timeUnits.second?0:count*mathFloor(minDate.getMilliseconds()/count)),interval>=timeUnits.second&&minDate.setSeconds(interval>=timeUnits.minute?0:count*mathFloor(minDate.getSeconds()/count)),interval>=timeUnits.minute&&minDate[setMinutes](interval>=timeUnits.hour?0:count*mathFloor(minDate[getMinutes]()/count)),interval>=timeUnits.hour&&minDate[setHours](interval>=timeUnits.day?0:count*mathFloor(minDate[getHours]()/count)),interval>=timeUnits.day&&minDate[setDate](interval>=timeUnits.month?1:count*mathFloor(minDate[getDate]()/count)),interval>=timeUnits.month&&(minDate[setMonth](interval>=timeUnits.year?0:count*mathFloor(minDate[getMonth]()/count)),minYear=minDate[getFullYear]()),interval>=timeUnits.year&&(minYear-=minYear%count,minDate[setFullYear](minYear)),interval===timeUnits.week&&minDate[setDate](minDate[getDate]()-minDate[getDay]()+pick(startOfWeek,1)),i=1,(timezoneOffset||getTimezoneOffset)&&(minDate=minDate.getTime(),minDate=new Date(minDate+getTZOffset(minDate))),minYear=minDate[getFullYear]();for(var time=minDate.getTime(),minMonth=minDate[getMonth](),minDateDate=minDate[getDate](),localTimezoneOffset=(timeUnits.day+(useUTC?getTZOffset(minDate):1e3*60*minDate.getTimezoneOffset()))%timeUnits.day;max>time;)tickPositions.push(time),interval===timeUnits.year?time=makeTime(minYear+i*count,0):interval===timeUnits.month?time=makeTime(minYear,minMonth+i*count):useUTC||interval!==timeUnits.day&&interval!==timeUnits.week?time+=interval*count:time=makeTime(minYear,minMonth,minDateDate+i*count*(interval===timeUnits.day?1:7)),i++;tickPositions.push(time),each(grep(tickPositions,function(time){return timeUnits.hour>=interval&&time%timeUnits.day===localTimezoneOffset}),function(time){higherRanks[time]="day"})}return tickPositions.info=extend(normalizedInterval,{higherRanks:higherRanks,totalRange:interval*count}),tickPositions},Axis.prototype.normalizeTimeTickInterval=function(tickInterval,unitsOption){var units=unitsOption||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],unit=units[units.length-1],interval=timeUnits[unit[0]],multiples=unit[1],count,i;for(i=0;units.length>i;i++)if(unit=units[i],interval=timeUnits[unit[0]],multiples=unit[1],units[i+1]){var lessThan=(interval*multiples[multiples.length-1]+timeUnits[units[i+1][0]])/2;if(lessThan>=tickInterval)break}return interval===timeUnits.year&&5*interval>tickInterval&&(multiples=[1,2,5]),count=normalizeTickInterval(tickInterval/interval,multiples,"year"===unit[0]?mathMax(getMagnitude(tickInterval/interval),1):1),{unitRange:interval,count:count,unitName:unit[0]}},Axis.prototype.getLogTickPositions=function(interval,min,max,minor){var axis=this,options=axis.options,axisLength=axis.len,positions=[];if(minor||(axis._minorAutoInterval=null),interval>=.5)interval=mathRound(interval),positions=axis.getLinearTickPositions(interval,min,max);else if(interval>=.08){var roundedMin=mathFloor(min),intermediate,i,j,len,pos,lastPos,break2;for(intermediate=interval>.3?[1,2,4]:interval>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],i=roundedMin;max+1>i&&!break2;i++)for(len=intermediate.length,j=0;len>j&&!break2;j++)pos=log2lin(lin2log(i)*intermediate[j]),pos>min&&(!minor||max>=lastPos)&&lastPos!==UNDEFINED&&positions.push(lastPos),lastPos>max&&(break2=!0),lastPos=pos}else{var realMin=lin2log(min),realMax=lin2log(max),tickIntervalOption=options[minor?"minorTickInterval":"tickInterval"],filteredTickIntervalOption="auto"===tickIntervalOption?null:tickIntervalOption,tickPixelIntervalOption=options.tickPixelInterval/(minor?5:1),totalPixelLength=minor?axisLength/axis.tickPositions.length:axisLength;interval=pick(filteredTickIntervalOption,axis._minorAutoInterval,(realMax-realMin)*tickPixelIntervalOption/(totalPixelLength||1)),interval=normalizeTickInterval(interval,null,getMagnitude(interval)),positions=map(axis.getLinearTickPositions(interval,realMin,realMax),log2lin),minor||(axis._minorAutoInterval=interval/5)}return minor||(axis.tickInterval=interval),positions};var Tooltip=Highcharts.Tooltip=function(){this.init.apply(this,arguments)};Tooltip.prototype={init:function(chart,options){var borderWidth=options.borderWidth,style=options.style,padding=pInt(style.padding);this.chart=chart,this.options=options,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=chart.renderer.label("",0,0,options.shape||"callout",null,null,options.useHTML,null,"tooltip").attr({padding:padding,fill:options.backgroundColor,"stroke-width":borderWidth,r:options.borderRadius,zIndex:8}).css(style).css({padding:0}).add().attr({y:-9999}),useCanVG||this.label.shadow(options.shadow),this.shared=options.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(x,y,anchorX,anchorY){var tooltip=this,now=tooltip.now,animate=tooltip.options.animation!==!1&&!tooltip.isHidden&&(mathAbs(x-now.x)>1||mathAbs(y-now.y)>1),skipAnchor=tooltip.followPointer||tooltip.len>1;extend(now,{x:animate?(2*now.x+x)/3:x,y:animate?(now.y+y)/2:y,anchorX:skipAnchor?UNDEFINED:animate?(2*now.anchorX+anchorX)/3:anchorX,anchorY:skipAnchor?UNDEFINED:animate?(now.anchorY+anchorY)/2:anchorY}),tooltip.label.attr(now),animate&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){tooltip&&tooltip.move(x,y,anchorX,anchorY)},32))},hide:function(delay){var tooltip=this,hoverPoints;clearTimeout(this.hideTimer),this.isHidden||(hoverPoints=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){tooltip.label.fadeOut(),tooltip.isHidden=!0},pick(delay,this.options.hideDelay,500)),hoverPoints&&each(hoverPoints,function(point){point.setState()}),this.chart.hoverPoints=null,this.chart.hoverSeries=null)},getAnchor:function(points,mouseEvent){var ret,chart=this.chart,inverted=chart.inverted,plotTop=chart.plotTop,plotLeft=chart.plotLeft,plotX=0,plotY=0,yAxis,xAxis;return points=splat(points),ret=points[0].tooltipPos,this.followPointer&&mouseEvent&&(mouseEvent.chartX===UNDEFINED&&(mouseEvent=chart.pointer.normalize(mouseEvent)),ret=[mouseEvent.chartX-chart.plotLeft,mouseEvent.chartY-plotTop]),ret||(each(points,function(point){yAxis=point.series.yAxis,xAxis=point.series.xAxis,plotX+=point.plotX+(!inverted&&xAxis?xAxis.left-plotLeft:0),plotY+=(point.plotLow?(point.plotLow+point.plotHigh)/2:point.plotY)+(!inverted&&yAxis?yAxis.top-plotTop:0)}),plotX/=points.length,plotY/=points.length,ret=[inverted?chart.plotWidth-plotY:plotX,this.shared&&!inverted&&points.length>1&&mouseEvent?mouseEvent.chartY-plotTop:inverted?chart.plotHeight-plotX:plotY]),map(ret,mathRound)},getPosition:function(boxWidth,boxHeight,point){var chart=this.chart,distance=this.distance,ret={},swapped,first=["y",chart.chartHeight,boxHeight,point.plotY+chart.plotTop],second=["x",chart.chartWidth,boxWidth,point.plotX+chart.plotLeft],preferFarSide=pick(point.ttBelow,chart.inverted&&!point.negative||!chart.inverted&&point.negative),firstDimension=function(dim,outerSize,innerSize,point){var roomLeft=point-distance>innerSize,roomRight=outerSize>point+distance+innerSize,alignedLeft=point-distance-innerSize,alignedRight=point+distance;if(preferFarSide&&roomRight)ret[dim]=alignedRight;else if(!preferFarSide&&roomLeft)ret[dim]=alignedLeft;else if(roomLeft)ret[dim]=alignedLeft;else{if(!roomRight)return!1;ret[dim]=alignedRight}},secondDimension=function(dim,outerSize,innerSize,point){return distance>point||point>outerSize-distance?!1:(ret[dim]=innerSize/2>point?1:point>outerSize-innerSize/2?outerSize-innerSize-2:point-innerSize/2,void 0)},swap=function(count){var temp=first;first=second,second=temp,swapped=count},run=function(){firstDimension.apply(0,first)!==!1?secondDimension.apply(0,second)!==!1||swapped||(swap(!0),run()):swapped?ret.x=ret.y=0:(swap(!0),run())};return(chart.inverted||this.len>1)&&swap(),run(),ret},defaultFormatter:function(tooltip){var items=this.points||splat(this),s;return s=[tooltip.tooltipFooterHeaderFormatter(items[0])],s=s.concat(tooltip.bodyFormatter(items)),s.push(tooltip.tooltipFooterHeaderFormatter(items[0],!0)),s.join("")},refresh:function(point,mouseEvent){var tooltip=this,chart=tooltip.chart,label=tooltip.label,options=tooltip.options,x,y,anchor,textConfig={},text,pointConfig=[],formatter=options.formatter||tooltip.defaultFormatter,hoverPoints=chart.hoverPoints,borderColor,shared=tooltip.shared,currentSeries;clearTimeout(this.hideTimer),tooltip.followPointer=splat(point)[0].series.tooltipOptions.followPointer,anchor=tooltip.getAnchor(point,mouseEvent),x=anchor[0],y=anchor[1],!shared||point.series&&point.series.noSharedTooltip?textConfig=point.getLabelConfig():(chart.hoverPoints=point,hoverPoints&&each(hoverPoints,function(point){point.setState()}),each(point,function(item){item.setState(HOVER_STATE),pointConfig.push(item.getLabelConfig())}),textConfig={x:point[0].category,y:point[0].y},textConfig.points=pointConfig,this.len=pointConfig.length,point=point[0]),text=formatter.call(textConfig,tooltip),currentSeries=point.series,this.distance=pick(currentSeries.tooltipOptions.distance,16),text===!1?this.hide():(tooltip.isHidden&&(stop(label),label.attr("opacity",1).show()),label.attr({text:text}),borderColor=options.borderColor||point.color||currentSeries.color||"#606060",label.attr({stroke:borderColor}),tooltip.updatePosition({plotX:x,plotY:y,negative:point.negative,ttBelow:point.ttBelow}),this.isHidden=!1),fireEvent(chart,"tooltipRefresh",{text:text,x:x+chart.plotLeft,y:y+chart.plotTop,borderColor:borderColor})},updatePosition:function(point){var chart=this.chart,label=this.label,pos=(this.options.positioner||this.getPosition).call(this,label.width,label.height,point);this.move(mathRound(pos.x),mathRound(pos.y),point.plotX+chart.plotLeft,point.plotY+chart.plotTop)},getXDateFormat:function(point,options,xAxis){var xDateFormat,dateTimeLabelFormats=options.dateTimeLabelFormats,closestPointRange=xAxis&&xAxis.closestPointRange,n,blank="01-01 00:00:00.000",strpos={millisecond:15,second:12,minute:9,hour:6,day:3},date,lastN;if(closestPointRange){date=dateFormat("%m-%d %H:%M:%S.%L",point.x);for(n in timeUnits){if(closestPointRange===timeUnits.week&&+dateFormat("%w",point.x)===xAxis.options.startOfWeek&&date.substr(6)===blank.substr(6)){n="week";break}if(timeUnits[n]>closestPointRange){n=lastN;break}if(strpos[n]&&date.substr(strpos[n])!==blank.substr(strpos[n]))break;"week"!==n&&(lastN=n)}n&&(xDateFormat=dateTimeLabelFormats[n])}else xDateFormat=dateTimeLabelFormats.day;return xDateFormat||dateTimeLabelFormats.year},tooltipFooterHeaderFormatter:function(point,isFooter){var footOrHead=isFooter?"footer":"header",series=point.series,tooltipOptions=series.tooltipOptions,xDateFormat=tooltipOptions.xDateFormat,xAxis=series.xAxis,isDateTime=xAxis&&"datetime"===xAxis.options.type&&isNumber(point.key),formatString=tooltipOptions[footOrHead+"Format"];return isDateTime&&!xDateFormat&&(xDateFormat=this.getXDateFormat(point,tooltipOptions,xAxis)),isDateTime&&xDateFormat&&(formatString=formatString.replace("{point.key}","{point.key:"+xDateFormat+"}")),format(formatString,{point:point,series:series})},bodyFormatter:function(items){return map(items,function(item){var tooltipOptions=item.series.tooltipOptions;return(tooltipOptions.pointFormatter||item.point.tooltipFormatter).call(item.point,tooltipOptions.pointFormat)})}};var hoverChartIndex;hasTouch=doc.documentElement.ontouchstart!==UNDEFINED;var Pointer=Highcharts.Pointer=function(chart,options){this.init(chart,options)};if(Pointer.prototype={init:function(chart,options){var chartOptions=options.chart,chartEvents=chartOptions.events,zoomType=useCanVG?"":chartOptions.zoomType,inverted=chart.inverted,zoomX,zoomY;this.options=options,this.chart=chart,this.zoomX=zoomX=/x/.test(zoomType),this.zoomY=zoomY=/y/.test(zoomType),this.zoomHor=zoomX&&!inverted||zoomY&&inverted,this.zoomVert=zoomY&&!inverted||zoomX&&inverted,this.hasZoom=zoomX||zoomY,this.runChartClick=chartEvents&&!!chartEvents.click,this.pinchDown=[],this.lastValidTouch={},Highcharts.Tooltip&&options.tooltip.enabled&&(chart.tooltip=new Tooltip(chart,options.tooltip),this.followTouchMove=pick(options.tooltip.followTouchMove,!0)),this.setDOMEvents()},normalize:function(e,chartPosition){var chartX,chartY,ePos;return e=e||window.event,e=washMouseEvent(e),e.target||(e.target=e.srcElement),ePos=e.touches?e.touches.length?e.touches.item(0):e.changedTouches[0]:e,chartPosition||(this.chartPosition=chartPosition=offset(this.chart.container)),ePos.pageX===UNDEFINED?(chartX=mathMax(e.x,e.clientX-chartPosition.left),chartY=e.y):(chartX=ePos.pageX-chartPosition.left,chartY=ePos.pageY-chartPosition.top),extend(e,{chartX:mathRound(chartX),chartY:mathRound(chartY)})},getCoordinates:function(e){var coordinates={xAxis:[],yAxis:[]};return each(this.chart.axes,function(axis){coordinates[axis.isXAxis?"xAxis":"yAxis"].push({axis:axis,value:axis.toValue(e[axis.horiz?"chartX":"chartY"])})}),coordinates},runPointActions:function(e){var pointer=this,chart=pointer.chart,series=chart.series,tooltip=chart.tooltip,shared=tooltip?tooltip.shared:!1,followPointer,hoverPoint=chart.hoverPoint,hoverSeries=chart.hoverSeries,i,trueXkd,trueX,distance=chart.chartWidth,rdistance=chart.chartWidth,anchor,noSharedTooltip,kdpoints=[],kdpoint,kdpointT;if(!shared&&!hoverSeries)for(i=0;series.length>i;i++)(series[i].directTouch||!series[i].options.stickyTracking)&&(series=[]);if(hoverSeries&&hoverSeries.noSharedTooltip||!shared&&hoverSeries?kdpoint=hoverSeries.directTouch&&hoverPoint||hoverSeries&&hoverSeries.searchPoint(e):(each(series,function(s){noSharedTooltip=s.noSharedTooltip&&shared,s.visible&&!noSharedTooltip&&pick(s.options.enableMouseTracking,!0)&&(kdpointT=s.searchPoint(e),kdpointT&&kdpoints.push(kdpointT))}),each(kdpoints,function(p){p&&defined(p.plotX)&&defined(p.plotY)&&(distance>p.dist.distX||(p.dist.distX===distance||p.series.kdDimensions>1)&&rdistance>p.dist.distR)&&(distance=p.dist.distX,rdistance=p.dist.distR,kdpoint=p)
})),kdpoint&&(kdpoint!==hoverPoint||tooltip&&tooltip.isHidden))if(shared&&!kdpoint.series.noSharedTooltip){for(i=kdpoints.length,trueXkd=kdpoint.clientX;i--;)trueX=kdpoints[i].clientX,(kdpoints[i].x!==kdpoint.x||trueX!==trueXkd||kdpoints[i].series.noSharedTooltip)&&kdpoints.splice(i,1);kdpoints.length&&tooltip&&tooltip.refresh(kdpoints,e),each(kdpoints,function(point){point!==kdpoint&&point.onMouseOver(e)}),kdpoint.onMouseOver(e)}else tooltip&&tooltip.refresh(kdpoint,e),kdpoint.onMouseOver(e);else followPointer=hoverSeries&&hoverSeries.tooltipOptions.followPointer,tooltip&&followPointer&&!tooltip.isHidden&&(anchor=tooltip.getAnchor([{}],e),tooltip.updatePosition({plotX:anchor[0],plotY:anchor[1]}));tooltip&&!pointer._onDocumentMouseMove&&(pointer._onDocumentMouseMove=function(e){charts[hoverChartIndex]&&charts[hoverChartIndex].pointer.onDocumentMouseMove(e)},addEvent(doc,"mousemove",pointer._onDocumentMouseMove)),each(chart.axes,function(axis){axis.drawCrosshair(e,pick(kdpoint,hoverPoint))})},reset:function(allowMove,delay){var pointer=this,chart=pointer.chart,hoverSeries=chart.hoverSeries,hoverPoint=chart.hoverPoint,tooltip=chart.tooltip,tooltipPoints=tooltip&&tooltip.shared?chart.hoverPoints:hoverPoint;allowMove=allowMove&&tooltip&&tooltipPoints,allowMove&&splat(tooltipPoints)[0].plotX===UNDEFINED&&(allowMove=!1),allowMove?(tooltip.refresh(tooltipPoints),hoverPoint&&(hoverPoint.setState(hoverPoint.state,!0),each(chart.axes,function(axis){pick(axis.options.crosshair&&axis.options.crosshair.snap,!0)?axis.drawCrosshair(null,allowMove):axis.hideCrosshair()}))):(hoverPoint&&hoverPoint.onMouseOut(),hoverSeries&&hoverSeries.onMouseOut(),tooltip&&tooltip.hide(delay),pointer._onDocumentMouseMove&&(removeEvent(doc,"mousemove",pointer._onDocumentMouseMove),pointer._onDocumentMouseMove=null),each(chart.axes,function(axis){axis.hideCrosshair()}),pointer.hoverX=null)},scaleGroups:function(attribs,clip){var chart=this.chart,seriesAttribs;each(chart.series,function(series){seriesAttribs=attribs||series.getPlotBox(),series.xAxis&&series.xAxis.zoomEnabled&&(series.group.attr(seriesAttribs),series.markerGroup&&(series.markerGroup.attr(seriesAttribs),series.markerGroup.clip(clip?chart.clipRect:null)),series.dataLabelsGroup&&series.dataLabelsGroup.attr(seriesAttribs))}),chart.clipRect.attr(clip||chart.clipBox)},dragStart:function(e){var chart=this.chart;chart.mouseIsDown=e.type,chart.cancelClick=!1,chart.mouseDownX=this.mouseDownX=e.chartX,chart.mouseDownY=this.mouseDownY=e.chartY},drag:function(e){var chart=this.chart,chartOptions=chart.options.chart,chartX=e.chartX,chartY=e.chartY,zoomHor=this.zoomHor,zoomVert=this.zoomVert,plotLeft=chart.plotLeft,plotTop=chart.plotTop,plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,clickedInside,size,mouseDownX=this.mouseDownX,mouseDownY=this.mouseDownY,panKey=chartOptions.panKey&&e[chartOptions.panKey+"Key"];plotLeft>chartX?chartX=plotLeft:chartX>plotLeft+plotWidth&&(chartX=plotLeft+plotWidth),plotTop>chartY?chartY=plotTop:chartY>plotTop+plotHeight&&(chartY=plotTop+plotHeight),this.hasDragged=Math.sqrt(Math.pow(mouseDownX-chartX,2)+Math.pow(mouseDownY-chartY,2)),this.hasDragged>10&&(clickedInside=chart.isInsidePlot(mouseDownX-plotLeft,mouseDownY-plotTop),chart.hasCartesianSeries&&(this.zoomX||this.zoomY)&&clickedInside&&!panKey&&(this.selectionMarker||(this.selectionMarker=chart.renderer.rect(plotLeft,plotTop,zoomHor?1:plotWidth,zoomVert?1:plotHeight,0).attr({fill:chartOptions.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),this.selectionMarker&&zoomHor&&(size=chartX-mouseDownX,this.selectionMarker.attr({width:mathAbs(size),x:(size>0?0:size)+mouseDownX})),this.selectionMarker&&zoomVert&&(size=chartY-mouseDownY,this.selectionMarker.attr({height:mathAbs(size),y:(size>0?0:size)+mouseDownY})),clickedInside&&!this.selectionMarker&&chartOptions.panning&&chart.pan(e,chartOptions.panning))},drop:function(e){var pointer=this,chart=this.chart,hasPinched=this.hasPinched;if(this.selectionMarker){var selectionData={xAxis:[],yAxis:[],originalEvent:e.originalEvent||e},selectionBox=this.selectionMarker,selectionLeft=selectionBox.attr?selectionBox.attr("x"):selectionBox.x,selectionTop=selectionBox.attr?selectionBox.attr("y"):selectionBox.y,selectionWidth=selectionBox.attr?selectionBox.attr("width"):selectionBox.width,selectionHeight=selectionBox.attr?selectionBox.attr("height"):selectionBox.height,runZoom;(this.hasDragged||hasPinched)&&(each(chart.axes,function(axis){if(axis.zoomEnabled&&defined(axis.min)&&(hasPinched||pointer[{xAxis:"zoomX",yAxis:"zoomY"}[axis.coll]])){var horiz=axis.horiz,minPixelPadding="touchend"===e.type?axis.minPixelPadding:0,selectionMin=axis.toValue((horiz?selectionLeft:selectionTop)+minPixelPadding),selectionMax=axis.toValue((horiz?selectionLeft+selectionWidth:selectionTop+selectionHeight)-minPixelPadding);selectionData[axis.coll].push({axis:axis,min:mathMin(selectionMin,selectionMax),max:mathMax(selectionMin,selectionMax)}),runZoom=!0}}),runZoom&&fireEvent(chart,"selection",selectionData,function(args){chart.zoom(extend(args,hasPinched?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),hasPinched&&this.scaleGroups()}chart&&(css(chart.container,{cursor:chart._cursor}),chart.cancelClick=this.hasDragged>10,chart.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(e){e=this.normalize(e),e.preventDefault&&e.preventDefault(),this.dragStart(e)},onDocumentMouseUp:function(e){charts[hoverChartIndex]&&charts[hoverChartIndex].pointer.drop(e)},onDocumentMouseMove:function(e){var chart=this.chart,chartPosition=this.chartPosition;e=this.normalize(e,chartPosition),!chartPosition||this.inClass(e.target,"highcharts-tracker")||chart.isInsidePlot(e.chartX-chart.plotLeft,e.chartY-chart.plotTop)||this.reset()},onContainerMouseLeave:function(){var chart=charts[hoverChartIndex];chart&&(chart.pointer.reset(),chart.pointer.chartPosition=null)},onContainerMouseMove:function(e){var chart=this.chart;hoverChartIndex=chart.index,e=this.normalize(e),e.returnValue=!1,"mousedown"===chart.mouseIsDown&&this.drag(e),!this.inClass(e.target,"highcharts-tracker")&&!chart.isInsidePlot(e.chartX-chart.plotLeft,e.chartY-chart.plotTop)||chart.openMenu||this.runPointActions(e)},inClass:function(element,className){for(var elemClassName;element;){if(elemClassName=attr(element,"class")){if(-1!==elemClassName.indexOf(className))return!0;if(-1!==elemClassName.indexOf(PREFIX+"container"))return!1}element=element.parentNode}},onTrackerMouseOut:function(e){var series=this.chart.hoverSeries,relatedTarget=e.relatedTarget||e.toElement,relatedSeries=relatedTarget&&relatedTarget.point&&relatedTarget.point.series;!series||series.options.stickyTracking||this.inClass(relatedTarget,PREFIX+"tooltip")||relatedSeries===series||series.onMouseOut()},onContainerClick:function(e){var chart=this.chart,hoverPoint=chart.hoverPoint,plotLeft=chart.plotLeft,plotTop=chart.plotTop;e=this.normalize(e),e.originalEvent=e,e.cancelBubble=!0,chart.cancelClick||(hoverPoint&&this.inClass(e.target,PREFIX+"tracker")?(fireEvent(hoverPoint.series,"click",extend(e,{point:hoverPoint})),chart.hoverPoint&&hoverPoint.firePointEvent("click",e)):(extend(e,this.getCoordinates(e)),chart.isInsidePlot(e.chartX-plotLeft,e.chartY-plotTop)&&fireEvent(chart,"click",e)))},setDOMEvents:function(){var pointer=this,container=pointer.chart.container;container.onmousedown=function(e){pointer.onContainerMouseDown(e)},container.onmousemove=function(e){pointer.onContainerMouseMove(e)},container.onclick=function(e){pointer.onContainerClick(e)},addEvent(container,"mouseleave",pointer.onContainerMouseLeave),1===chartCount&&addEvent(doc,"mouseup",pointer.onDocumentMouseUp),hasTouch&&(container.ontouchstart=function(e){pointer.onContainerTouchStart(e)},container.ontouchmove=function(e){pointer.onContainerTouchMove(e)},1===chartCount&&addEvent(doc,"touchend",pointer.onDocumentTouchEnd))},destroy:function(){var prop;removeEvent(this.chart.container,"mouseleave",this.onContainerMouseLeave),chartCount||(removeEvent(doc,"mouseup",this.onDocumentMouseUp),removeEvent(doc,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout);for(prop in this)this[prop]=null}},extend(Highcharts.Pointer.prototype,{pinchTranslate:function(pinchDown,touches,transform,selectionMarker,clip,lastValidTouch){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,pinchDown,touches,transform,selectionMarker,clip,lastValidTouch),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,pinchDown,touches,transform,selectionMarker,clip,lastValidTouch)},pinchTranslateDirection:function(horiz,pinchDown,touches,transform,selectionMarker,clip,lastValidTouch,forcedScale){var chart=this.chart,xy=horiz?"x":"y",XY=horiz?"X":"Y",sChartXY="chart"+XY,wh=horiz?"width":"height",plotLeftTop=chart["plot"+(horiz?"Left":"Top")],selectionWH,selectionXY,clipXY,scale=forcedScale||1,inverted=chart.inverted,bounds=chart.bounds[horiz?"h":"v"],singleTouch=1===pinchDown.length,touch0Start=pinchDown[0][sChartXY],touch0Now=touches[0][sChartXY],touch1Start=!singleTouch&&pinchDown[1][sChartXY],touch1Now=!singleTouch&&touches[1][sChartXY],outOfBounds,transformScale,scaleKey,setScale=function(){!singleTouch&&mathAbs(touch0Start-touch1Start)>20&&(scale=forcedScale||mathAbs(touch0Now-touch1Now)/mathAbs(touch0Start-touch1Start)),clipXY=(plotLeftTop-touch0Now)/scale+touch0Start,selectionWH=chart["plot"+(horiz?"Width":"Height")]/scale};setScale(),selectionXY=clipXY,bounds.min>selectionXY?(selectionXY=bounds.min,outOfBounds=!0):selectionXY+selectionWH>bounds.max&&(selectionXY=bounds.max-selectionWH,outOfBounds=!0),outOfBounds?(touch0Now-=.8*(touch0Now-lastValidTouch[xy][0]),singleTouch||(touch1Now-=.8*(touch1Now-lastValidTouch[xy][1])),setScale()):lastValidTouch[xy]=[touch0Now,touch1Now],inverted||(clip[xy]=clipXY-plotLeftTop,clip[wh]=selectionWH),scaleKey=inverted?horiz?"scaleY":"scaleX":"scale"+XY,transformScale=inverted?1/scale:scale,selectionMarker[wh]=selectionWH,selectionMarker[xy]=selectionXY,transform[scaleKey]=scale,transform["translate"+XY]=transformScale*plotLeftTop+(touch0Now-transformScale*touch0Start)},pinch:function(e){var self=this,chart=self.chart,pinchDown=self.pinchDown,touches=e.touches,touchesLength=touches.length,lastValidTouch=self.lastValidTouch,hasZoom=self.hasZoom,selectionMarker=self.selectionMarker,transform={},fireClickEvent=1===touchesLength&&(self.inClass(e.target,PREFIX+"tracker")&&chart.runTrackerClick||self.runChartClick),clip={};hasZoom&&!fireClickEvent&&e.preventDefault(),map(touches,function(e){return self.normalize(e)}),"touchstart"===e.type?(each(touches,function(e,i){pinchDown[i]={chartX:e.chartX,chartY:e.chartY}}),lastValidTouch.x=[pinchDown[0].chartX,pinchDown[1]&&pinchDown[1].chartX],lastValidTouch.y=[pinchDown[0].chartY,pinchDown[1]&&pinchDown[1].chartY],each(chart.axes,function(axis){if(axis.zoomEnabled){var bounds=chart.bounds[axis.horiz?"h":"v"],minPixelPadding=axis.minPixelPadding,min=axis.toPixels(pick(axis.options.min,axis.dataMin)),max=axis.toPixels(pick(axis.options.max,axis.dataMax)),absMin=mathMin(min,max),absMax=mathMax(min,max);bounds.min=mathMin(axis.pos,absMin-minPixelPadding),bounds.max=mathMax(axis.pos+axis.len,absMax+minPixelPadding)}}),self.res=!0):pinchDown.length&&(selectionMarker||(self.selectionMarker=selectionMarker=extend({destroy:noop},chart.plotBox)),self.pinchTranslate(pinchDown,touches,transform,selectionMarker,clip,lastValidTouch),self.hasPinched=hasZoom,self.scaleGroups(transform,clip),!hasZoom&&self.followTouchMove&&1===touchesLength?this.runPointActions(self.normalize(e)):self.res&&(self.res=!1,this.reset(!1,0)))},onContainerTouchStart:function(e){var chart=this.chart;hoverChartIndex=chart.index,1===e.touches.length?(e=this.normalize(e),chart.isInsidePlot(e.chartX-chart.plotLeft,e.chartY-chart.plotTop)&&!chart.openMenu?(this.runPointActions(e),this.pinch(e)):this.reset()):2===e.touches.length&&this.pinch(e)},onContainerTouchMove:function(e){(1===e.touches.length||2===e.touches.length)&&this.pinch(e)},onDocumentTouchEnd:function(e){charts[hoverChartIndex]&&charts[hoverChartIndex].pointer.drop(e)}}),win.PointerEvent||win.MSPointerEvent){var touches={},hasPointerEvent=!!win.PointerEvent,getWebkitTouches=function(){var key,fake=[];fake.item=function(i){return this[i]};for(key in touches)touches.hasOwnProperty(key)&&fake.push({pageX:touches[key].pageX,pageY:touches[key].pageY,target:touches[key].target});return fake},translateMSPointer=function(e,method,wktype,callback){var p;e=e.originalEvent||e,"touch"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_TOUCH||!charts[hoverChartIndex]||(callback(e),p=charts[hoverChartIndex].pointer,p[method]({type:wktype,target:e.currentTarget,preventDefault:noop,touches:getWebkitTouches()}))};extend(Pointer.prototype,{onContainerPointerDown:function(e){translateMSPointer(e,"onContainerTouchStart","touchstart",function(e){touches[e.pointerId]={pageX:e.pageX,pageY:e.pageY,target:e.currentTarget}})},onContainerPointerMove:function(e){translateMSPointer(e,"onContainerTouchMove","touchmove",function(e){touches[e.pointerId]={pageX:e.pageX,pageY:e.pageY},touches[e.pointerId].target||(touches[e.pointerId].target=e.currentTarget)})},onDocumentPointerUp:function(e){translateMSPointer(e,"onContainerTouchEnd","touchend",function(e){delete touches[e.pointerId]})},batchMSEvents:function(fn){fn(this.chart.container,hasPointerEvent?"pointerdown":"MSPointerDown",this.onContainerPointerDown),fn(this.chart.container,hasPointerEvent?"pointermove":"MSPointerMove",this.onContainerPointerMove),fn(doc,hasPointerEvent?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),wrap(Pointer.prototype,"init",function(proceed,chart,options){proceed.call(this,chart,options),(this.hasZoom||this.followTouchMove)&&css(chart.container,{"-ms-touch-action":NONE,"touch-action":NONE})}),wrap(Pointer.prototype,"setDOMEvents",function(proceed){proceed.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(addEvent)}),wrap(Pointer.prototype,"destroy",function(proceed){this.batchMSEvents(removeEvent),proceed.call(this)})}var Legend=Highcharts.Legend=function(chart,options){this.init(chart,options)};Legend.prototype={init:function(chart,options){var legend=this,itemStyle=options.itemStyle,padding,itemMarginTop=options.itemMarginTop||0;this.options=options,options.enabled&&(legend.itemStyle=itemStyle,legend.itemHiddenStyle=merge(itemStyle,options.itemHiddenStyle),legend.itemMarginTop=itemMarginTop,legend.padding=padding=pick(options.padding,8),legend.initialItemX=padding,legend.initialItemY=padding-5,legend.maxItemWidth=0,legend.chart=chart,legend.itemHeight=0,legend.symbolWidth=pick(options.symbolWidth,16),legend.pages=[],legend.render(),addEvent(legend.chart,"endResize",function(){legend.positionCheckboxes()}))},colorizeItem:function(item,visible){var legend=this,options=legend.options,legendItem=item.legendItem,legendLine=item.legendLine,legendSymbol=item.legendSymbol,hiddenColor=legend.itemHiddenStyle.color,textColor=visible?options.itemStyle.color:hiddenColor,symbolColor=visible?item.legendColor||item.color||"#CCC":hiddenColor,markerOptions=item.options&&item.options.marker,symbolAttr={fill:symbolColor},key,val;if(legendItem&&legendItem.css({fill:textColor,color:textColor}),legendLine&&legendLine.attr({stroke:symbolColor}),legendSymbol){if(markerOptions&&legendSymbol.isMarker){symbolAttr.stroke=symbolColor,markerOptions=item.convertAttribs(markerOptions);for(key in markerOptions)val=markerOptions[key],val!==UNDEFINED&&(symbolAttr[key]=val)}legendSymbol.attr(symbolAttr)}},positionItem:function(item){var legend=this,options=legend.options,symbolPadding=options.symbolPadding,ltr=!options.rtl,legendItemPos=item._legendItemPos,itemX=legendItemPos[0],itemY=legendItemPos[1],checkbox=item.checkbox;item.legendGroup&&item.legendGroup.translate(ltr?itemX:legend.legendWidth-itemX-2*symbolPadding-4,itemY),checkbox&&(checkbox.x=itemX,checkbox.y=itemY)},destroyItem:function(item){var checkbox=item.checkbox;each(["legendItem","legendLine","legendSymbol","legendGroup"],function(key){item[key]&&(item[key]=item[key].destroy())}),checkbox&&discardElement(item.checkbox)},clearItems:function(){var legend=this;each(legend.getAllItems(),function(item){legend.destroyItem(item)})},destroy:function(){var legend=this,legendGroup=legend.group,box=legend.box;box&&(legend.box=box.destroy()),legendGroup&&(legend.group=legendGroup.destroy())},positionCheckboxes:function(scrollOffset){var alignAttr=this.group.alignAttr,translateY,clipHeight=this.clipHeight||this.legendHeight;alignAttr&&(translateY=alignAttr.translateY,each(this.allItems,function(item){var checkbox=item.checkbox,top;checkbox&&(top=translateY+checkbox.y+(scrollOffset||0)+3,css(checkbox,{left:alignAttr.translateX+item.checkboxOffset+checkbox.x-20+PX,top:top+PX,display:top>translateY-6&&translateY+clipHeight-6>top?"":NONE}))}))},renderTitle:function(){var options=this.options,padding=this.padding,titleOptions=options.title,titleHeight=0,bBox;titleOptions.text&&(this.title||(this.title=this.chart.renderer.label(titleOptions.text,padding-3,padding-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(titleOptions.style).add(this.group)),bBox=this.title.getBBox(),titleHeight=bBox.height,this.offsetWidth=bBox.width,this.contentGroup.attr({translateY:titleHeight})),this.titleHeight=titleHeight},renderItem:function(item){var legend=this,chart=legend.chart,renderer=chart.renderer,options=legend.options,horizontal="horizontal"===options.layout,symbolWidth=legend.symbolWidth,symbolPadding=options.symbolPadding,itemStyle=legend.itemStyle,itemHiddenStyle=legend.itemHiddenStyle,padding=legend.padding,itemDistance=horizontal?pick(options.itemDistance,20):0,ltr=!options.rtl,itemHeight,widthOption=options.width,itemMarginBottom=options.itemMarginBottom||0,itemMarginTop=legend.itemMarginTop,initialItemX=legend.initialItemX,bBox,itemWidth,li=item.legendItem,series=item.series&&item.series.drawLegendSymbol?item.series:item,seriesOptions=series.options,showCheckbox=legend.createCheckboxForItem&&seriesOptions&&seriesOptions.showCheckbox,useHTML=options.useHTML;li||(item.legendGroup=renderer.g("legend-item").attr({zIndex:1}).add(legend.scrollGroup),item.legendItem=li=renderer.text(options.labelFormat?format(options.labelFormat,item):options.labelFormatter.call(item),ltr?symbolWidth+symbolPadding:-symbolPadding,legend.baseline||0,useHTML).css(merge(item.visible?itemStyle:itemHiddenStyle)).attr({align:ltr?"left":"right",zIndex:2}).add(item.legendGroup),legend.baseline||(legend.baseline=renderer.fontMetrics(itemStyle.fontSize,li).f+3+itemMarginTop,li.attr("y",legend.baseline)),series.drawLegendSymbol(legend,item),legend.setItemEvents&&legend.setItemEvents(item,li,useHTML,itemStyle,itemHiddenStyle),legend.colorizeItem(item,item.visible),showCheckbox&&legend.createCheckboxForItem(item)),bBox=li.getBBox(),itemWidth=item.checkboxOffset=options.itemWidth||item.legendItemWidth||symbolWidth+symbolPadding+bBox.width+itemDistance+(showCheckbox?20:0),legend.itemHeight=itemHeight=mathRound(item.legendItemHeight||bBox.height),horizontal&&legend.itemX-initialItemX+itemWidth>(widthOption||chart.chartWidth-2*padding-initialItemX-options.x)&&(legend.itemX=initialItemX,legend.itemY+=itemMarginTop+legend.lastLineHeight+itemMarginBottom),legend.maxItemWidth=mathMax(legend.maxItemWidth,itemWidth),legend.lastItemY=itemMarginTop+legend.itemY+itemMarginBottom,legend.lastLineHeight=mathMax(itemHeight,legend.lastLineHeight),item._legendItemPos=[legend.itemX,legend.itemY],horizontal?legend.itemX+=itemWidth:(legend.itemY+=itemMarginTop+itemHeight+itemMarginBottom,legend.lastLineHeight=itemHeight),legend.offsetWidth=widthOption||mathMax((horizontal?legend.itemX-initialItemX-itemDistance:itemWidth)+padding,legend.offsetWidth)},getAllItems:function(){var allItems=[];return each(this.chart.series,function(series){var seriesOptions=series.options;pick(seriesOptions.showInLegend,defined(seriesOptions.linkedTo)?!1:UNDEFINED,!0)&&(allItems=allItems.concat(series.legendItems||("point"===seriesOptions.legendType?series.data:series)))}),allItems},adjustMargins:function(margin,spacing){var chart=this.chart,options=this.options,alignment=options.align[0]+options.verticalAlign[0]+options.layout[0];this.display&&!options.floating&&each([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],function(alignments,side){alignments.test(alignment)&&!defined(margin[side])&&(chart[marginNames[side]]=mathMax(chart[marginNames[side]],chart.legend[(side+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][side]*options[side%2?"x":"y"]+pick(options.margin,12)+spacing[side]))})},render:function(){var legend=this,chart=legend.chart,renderer=chart.renderer,legendGroup=legend.group,allItems,display,legendWidth,legendHeight,box=legend.box,options=legend.options,padding=legend.padding,legendBorderWidth=options.borderWidth,legendBackgroundColor=options.backgroundColor;legend.itemX=legend.initialItemX,legend.itemY=legend.initialItemY,legend.offsetWidth=0,legend.lastItemY=0,legendGroup||(legend.group=legendGroup=renderer.g("legend").attr({zIndex:7}).add(),legend.contentGroup=renderer.g().attr({zIndex:1}).add(legendGroup),legend.scrollGroup=renderer.g().add(legend.contentGroup)),legend.renderTitle(),allItems=legend.getAllItems(),stableSort(allItems,function(a,b){return(a.options&&a.options.legendIndex||0)-(b.options&&b.options.legendIndex||0)}),options.reversed&&allItems.reverse(),legend.allItems=allItems,legend.display=display=!!allItems.length,legend.lastLineHeight=0,each(allItems,function(item){legend.renderItem(item)}),legendWidth=(options.width||legend.offsetWidth)+padding,legendHeight=legend.lastItemY+legend.lastLineHeight+legend.titleHeight,legendHeight=legend.handleOverflow(legendHeight),legendHeight+=padding,(legendBorderWidth||legendBackgroundColor)&&(box?legendWidth>0&&legendHeight>0&&(box[box.isNew?"attr":"animate"](box.crisp({width:legendWidth,height:legendHeight})),box.isNew=!1):(legend.box=box=renderer.rect(0,0,legendWidth,legendHeight,options.borderRadius,legendBorderWidth||0).attr({stroke:options.borderColor,"stroke-width":legendBorderWidth||0,fill:legendBackgroundColor||NONE}).add(legendGroup).shadow(options.shadow),box.isNew=!0),box[display?"show":"hide"]()),legend.legendWidth=legendWidth,legend.legendHeight=legendHeight,each(allItems,function(item){legend.positionItem(item)}),display&&legendGroup.align(extend({width:legendWidth,height:legendHeight},options),!0,"spacingBox"),chart.isResizing||this.positionCheckboxes()},handleOverflow:function(legendHeight){var legend=this,chart=this.chart,renderer=chart.renderer,options=this.options,optionsY=options.y,alignTop="top"===options.verticalAlign,spaceHeight=chart.spacingBox.height+(alignTop?-optionsY:optionsY)-this.padding,maxHeight=options.maxHeight,clipHeight,clipRect=this.clipRect,navOptions=options.navigation,animation=pick(navOptions.animation,!0),arrowSize=navOptions.arrowSize||12,nav=this.nav,pages=this.pages,lastY,allItems=this.allItems;return"horizontal"===options.layout&&(spaceHeight/=2),maxHeight&&(spaceHeight=mathMin(spaceHeight,maxHeight)),pages.length=0,legendHeight>spaceHeight&&!options.useHTML?(this.clipHeight=clipHeight=mathMax(spaceHeight-20-this.titleHeight-this.padding,0),this.currentPage=pick(this.currentPage,1),this.fullHeight=legendHeight,each(allItems,function(item,i){var y=item._legendItemPos[1],h=mathRound(item.legendItem.getBBox().height),len=pages.length;(!len||y-pages[len-1]>clipHeight&&(lastY||y)!==pages[len-1])&&(pages.push(lastY||y),len++),i===allItems.length-1&&y+h-pages[len-1]>clipHeight&&pages.push(y),y!==lastY&&(lastY=y)}),clipRect||(clipRect=legend.clipRect=renderer.clipRect(0,this.padding,9999,0),legend.contentGroup.clip(clipRect)),clipRect.attr({height:clipHeight}),nav||(this.nav=nav=renderer.g().attr({zIndex:1}).add(this.group),this.up=renderer.symbol("triangle",0,0,arrowSize,arrowSize).on("click",function(){legend.scroll(-1,animation)}).add(nav),this.pager=renderer.text("",15,10).css(navOptions.style).add(nav),this.down=renderer.symbol("triangle-down",0,0,arrowSize,arrowSize).on("click",function(){legend.scroll(1,animation)}).add(nav)),legend.scroll(0),legendHeight=spaceHeight):nav&&(clipRect.attr({height:chart.chartHeight}),nav.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),legendHeight},scroll:function(scrollBy,animation){var pages=this.pages,pageCount=pages.length,currentPage=this.currentPage+scrollBy,clipHeight=this.clipHeight,navOptions=this.options.navigation,activeColor=navOptions.activeColor,inactiveColor=navOptions.inactiveColor,pager=this.pager,padding=this.padding,scrollOffset;currentPage>pageCount&&(currentPage=pageCount),currentPage>0&&(animation!==UNDEFINED&&setAnimation(animation,this.chart),this.nav.attr({translateX:padding,translateY:clipHeight+this.padding+7+this.titleHeight,visibility:VISIBLE}),this.up.attr({fill:1===currentPage?inactiveColor:activeColor}).css({cursor:1===currentPage?"default":"pointer"}),pager.attr({text:currentPage+"/"+pageCount}),this.down.attr({x:18+this.pager.getBBox().width,fill:currentPage===pageCount?inactiveColor:activeColor}).css({cursor:currentPage===pageCount?"default":"pointer"}),scrollOffset=-pages[currentPage-1]+this.initialItemY,this.scrollGroup.animate({translateY:scrollOffset}),this.currentPage=currentPage,this.positionCheckboxes(scrollOffset))}};var LegendSymbolMixin=Highcharts.LegendSymbolMixin={drawRectangle:function(legend,item){var symbolHeight=legend.options.symbolHeight||12;item.legendSymbol=this.chart.renderer.rect(0,legend.baseline-5-symbolHeight/2,legend.symbolWidth,symbolHeight,legend.options.symbolRadius||0).attr({zIndex:3}).add(item.legendGroup)},drawLineMarker:function(legend){var options=this.options,markerOptions=options.marker,radius,legendOptions=legend.options,legendSymbol,symbolWidth=legend.symbolWidth,renderer=this.chart.renderer,legendItemGroup=this.legendGroup,verticalCenter=legend.baseline-mathRound(.3*renderer.fontMetrics(legendOptions.itemStyle.fontSize,this.legendItem).b),attr;options.lineWidth&&(attr={"stroke-width":options.lineWidth},options.dashStyle&&(attr.dashstyle=options.dashStyle),this.legendLine=renderer.path([M,0,verticalCenter,L,symbolWidth,verticalCenter]).attr(attr).add(legendItemGroup)),markerOptions&&markerOptions.enabled!==!1&&(radius=markerOptions.radius,this.legendSymbol=legendSymbol=renderer.symbol(this.symbol,symbolWidth/2-radius,verticalCenter-radius,2*radius,2*radius).add(legendItemGroup),legendSymbol.isMarker=!0)}};(/Trident\/7\.0/.test(userAgent)||isFirefox)&&wrap(Legend.prototype,"positionItem",function(proceed,item){var legend=this,runPositionItem=function(){item._legendItemPos&&proceed.call(legend,item)};runPositionItem(),setTimeout(runPositionItem)});var Chart=Highcharts.Chart=function(){this.init.apply(this,arguments)};Chart.prototype={callbacks:[],init:function(userOptions,callback){var options,seriesOptions=userOptions.series;userOptions.series=null,options=merge(defaultOptions,userOptions),options.series=userOptions.series=seriesOptions,this.userOptions=userOptions;var optionsChart=options.chart;this.margin=this.splashArray("margin",optionsChart),this.spacing=this.splashArray("spacing",optionsChart);var chartEvents=optionsChart.events;this.bounds={h:{},v:{}},this.callback=callback,this.isResizing=0,this.options=options,this.axes=[],this.series=[],this.hasCartesianSeries=optionsChart.showAxes;var chart=this,eventType;if(chart.index=charts.length,charts.push(chart),chartCount++,optionsChart.reflow!==!1&&addEvent(chart,"load",function(){chart.initReflow()}),chartEvents)for(eventType in chartEvents)addEvent(chart,eventType,chartEvents[eventType]);chart.xAxis=[],chart.yAxis=[],chart.animation=useCanVG?!1:pick(optionsChart.animation,!0),chart.pointCount=chart.colorCounter=chart.symbolCounter=0,chart.firstRender()},initSeries:function(options){var chart=this,optionsChart=chart.options.chart,type=options.type||optionsChart.type||optionsChart.defaultSeriesType,series,constr=seriesTypes[type];return constr||error(17,!0),series=new constr,series.init(this,options),series},isInsidePlot:function(plotX,plotY,inverted){var x=inverted?plotY:plotX,y=inverted?plotX:plotY;return x>=0&&this.plotWidth>=x&&y>=0&&this.plotHeight>=y},redraw:function(animation){var chart=this,axes=chart.axes,series=chart.series,pointer=chart.pointer,legend=chart.legend,redrawLegend=chart.isDirtyLegend,hasStackedSeries,hasDirtyStacks,hasCartesianSeries=chart.hasCartesianSeries,isDirtyBox=chart.isDirtyBox,seriesLength=series.length,i=seriesLength,serie,renderer=chart.renderer,isHiddenChart=renderer.isHidden(),afterRedraw=[];for(setAnimation(animation,chart),isHiddenChart&&chart.cloneRenderTo(),chart.layOutTitles();i--;)if(serie=series[i],serie.options.stacking&&(hasStackedSeries=!0,serie.isDirty)){hasDirtyStacks=!0;break}if(hasDirtyStacks)for(i=seriesLength;i--;)serie=series[i],serie.options.stacking&&(serie.isDirty=!0);each(series,function(serie){serie.isDirty&&"point"===serie.options.legendType&&(redrawLegend=!0)}),redrawLegend&&legend.options.enabled&&(legend.render(),chart.isDirtyLegend=!1),hasStackedSeries&&chart.getStacks(),hasCartesianSeries&&(chart.isResizing||(chart.maxTicks=null,each(axes,function(axis){axis.setScale()}))),chart.getMargins(),hasCartesianSeries&&(each(axes,function(axis){axis.isDirty&&(isDirtyBox=!0)}),each(axes,function(axis){axis.isDirtyExtremes&&(axis.isDirtyExtremes=!1,afterRedraw.push(function(){fireEvent(axis,"afterSetExtremes",extend(axis.eventArgs,axis.getExtremes())),delete axis.eventArgs})),(isDirtyBox||hasStackedSeries)&&axis.redraw()})),isDirtyBox&&chart.drawChartBox(),each(series,function(serie){serie.isDirty&&serie.visible&&(!serie.isCartesian||serie.xAxis)&&serie.redraw()}),pointer&&pointer.reset(!0),renderer.draw(),fireEvent(chart,"redraw"),isHiddenChart&&chart.cloneRenderTo(!0),each(afterRedraw,function(callback){callback.call()})},get:function(id){var chart=this,axes=chart.axes,series=chart.series,i,j,points;for(i=0;axes.length>i;i++)if(axes[i].options.id===id)return axes[i];for(i=0;series.length>i;i++)if(series[i].options.id===id)return series[i];for(i=0;series.length>i;i++)for(points=series[i].points||[],j=0;points.length>j;j++)if(points[j].id===id)return points[j];return null},getAxes:function(){var chart=this,options=this.options,xAxisOptions=options.xAxis=splat(options.xAxis||{}),yAxisOptions=options.yAxis=splat(options.yAxis||{}),optionsArray,axis;each(xAxisOptions,function(axis,i){axis.index=i,axis.isX=!0}),each(yAxisOptions,function(axis,i){axis.index=i}),optionsArray=xAxisOptions.concat(yAxisOptions),each(optionsArray,function(axisOptions){axis=new Axis(chart,axisOptions)})},getSelectedPoints:function(){var points=[];return each(this.series,function(serie){points=points.concat(grep(serie.points||[],function(point){return point.selected}))}),points},getSelectedSeries:function(){return grep(this.series,function(serie){return serie.selected})},getStacks:function(){var chart=this;each(chart.yAxis,function(axis){axis.stacks&&axis.hasVisibleSeries&&(axis.oldStacks=axis.stacks)}),each(chart.series,function(series){!series.options.stacking||series.visible!==!0&&chart.options.chart.ignoreHiddenSeries!==!1||(series.stackKey=series.type+pick(series.options.stack,""))})},setTitle:function(titleOptions,subtitleOptions,redraw){var chart=this,options=chart.options,chartTitleOptions,chartSubtitleOptions;chartTitleOptions=options.title=merge(options.title,titleOptions),chartSubtitleOptions=options.subtitle=merge(options.subtitle,subtitleOptions),each([["title",titleOptions,chartTitleOptions],["subtitle",subtitleOptions,chartSubtitleOptions]],function(arr){var name=arr[0],title=chart[name],titleOptions=arr[1],chartTitleOptions=arr[2];title&&titleOptions&&(chart[name]=title=title.destroy()),chartTitleOptions&&chartTitleOptions.text&&!title&&(chart[name]=chart.renderer.text(chartTitleOptions.text,0,0,chartTitleOptions.useHTML).attr({align:chartTitleOptions.align,"class":PREFIX+name,zIndex:chartTitleOptions.zIndex||4}).css(chartTitleOptions.style).add())
}),chart.layOutTitles(redraw)},layOutTitles:function(redraw){var titleOffset=0,title=this.title,subtitle=this.subtitle,options=this.options,titleOptions=options.title,subtitleOptions=options.subtitle,requiresDirtyBox,renderer=this.renderer,autoWidth=this.spacingBox.width-44;title&&(title.css({width:(titleOptions.width||autoWidth)+PX}).align(extend({y:renderer.fontMetrics(titleOptions.style.fontSize,title).b-3},titleOptions),!1,"spacingBox"),titleOptions.floating||titleOptions.verticalAlign||(titleOffset=title.getBBox().height)),subtitle&&(subtitle.css({width:(subtitleOptions.width||autoWidth)+PX}).align(extend({y:titleOffset+(titleOptions.margin-13)+renderer.fontMetrics(titleOptions.style.fontSize,subtitle).b},subtitleOptions),!1,"spacingBox"),subtitleOptions.floating||subtitleOptions.verticalAlign||(titleOffset=mathCeil(titleOffset+subtitle.getBBox().height))),requiresDirtyBox=this.titleOffset!==titleOffset,this.titleOffset=titleOffset,!this.isDirtyBox&&requiresDirtyBox&&(this.isDirtyBox=requiresDirtyBox,this.hasRendered&&pick(redraw,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var chart=this,optionsChart=chart.options.chart,widthOption=optionsChart.width,heightOption=optionsChart.height,renderTo=chart.renderToClone||chart.renderTo;defined(widthOption)||(chart.containerWidth=adapterRun(renderTo,"width")),defined(heightOption)||(chart.containerHeight=adapterRun(renderTo,"height")),chart.chartWidth=mathMax(0,widthOption||chart.containerWidth||600),chart.chartHeight=mathMax(0,pick(heightOption,chart.containerHeight>19?chart.containerHeight:400))},cloneRenderTo:function(revert){var clone=this.renderToClone,container=this.container;revert?clone&&(this.renderTo.appendChild(container),discardElement(clone),delete this.renderToClone):(container&&container.parentNode===this.renderTo&&this.renderTo.removeChild(container),this.renderToClone=clone=this.renderTo.cloneNode(0),css(clone,{position:ABSOLUTE,top:"-9999px",display:"block"}),clone.style.setProperty&&clone.style.setProperty("display","block","important"),doc.body.appendChild(clone),container&&clone.appendChild(container))},getContainer:function(){var chart=this,container,optionsChart=chart.options.chart,chartWidth,chartHeight,renderTo,indexAttrName="data-highcharts-chart",oldChartIndex,containerId;chart.renderTo=renderTo=optionsChart.renderTo,containerId=PREFIX+idCounter++,isString(renderTo)&&(chart.renderTo=renderTo=doc.getElementById(renderTo)),renderTo||error(13,!0),oldChartIndex=pInt(attr(renderTo,indexAttrName)),!isNaN(oldChartIndex)&&charts[oldChartIndex]&&charts[oldChartIndex].hasRendered&&charts[oldChartIndex].destroy(),attr(renderTo,indexAttrName,chart.index),renderTo.innerHTML="",optionsChart.skipClone||renderTo.offsetWidth||chart.cloneRenderTo(),chart.getChartSize(),chartWidth=chart.chartWidth,chartHeight=chart.chartHeight,chart.container=container=createElement(DIV,{className:PREFIX+"container"+(optionsChart.className?" "+optionsChart.className:""),id:containerId},extend({position:RELATIVE,overflow:HIDDEN,width:chartWidth+PX,height:chartHeight+PX,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},optionsChart.style),chart.renderToClone||renderTo),chart._cursor=container.style.cursor,chart.renderer=optionsChart.forExport?new SVGRenderer(container,chartWidth,chartHeight,optionsChart.style,!0):new Renderer(container,chartWidth,chartHeight,optionsChart.style),useCanVG&&chart.renderer.create(chart,container,chartWidth,chartHeight),chart.renderer.chartIndex=chart.index},getMargins:function(skipAxes){var chart=this,spacing=chart.spacing,margin=chart.margin,titleOffset=chart.titleOffset;chart.resetMargins(),titleOffset&&!defined(margin[0])&&(chart.plotTop=mathMax(chart.plotTop,titleOffset+chart.options.title.margin+spacing[0])),chart.legend.adjustMargins(margin,spacing),chart.extraBottomMargin&&(chart.marginBottom+=chart.extraBottomMargin),chart.extraTopMargin&&(chart.plotTop+=chart.extraTopMargin),skipAxes||this.getAxisMargins()},getAxisMargins:function(){var chart=this,axisOffset=chart.axisOffset=[0,0,0,0],margin=chart.margin;chart.hasCartesianSeries&&each(chart.axes,function(axis){axis.getOffset()}),each(marginNames,function(m,side){defined(margin[side])||(chart[m]+=axisOffset[side])}),chart.setChartSize()},reflow:function(e){var chart=this,optionsChart=chart.options.chart,renderTo=chart.renderTo,width=optionsChart.width||adapterRun(renderTo,"width"),height=optionsChart.height||adapterRun(renderTo,"height"),target=e?e.target:win,doReflow=function(){chart.container&&(chart.setSize(width,height,!1),chart.hasUserSize=null)};chart.hasUserSize||chart.isPrinting||!width||!height||target!==win&&target!==doc||((width!==chart.containerWidth||height!==chart.containerHeight)&&(clearTimeout(chart.reflowTimeout),e?chart.reflowTimeout=setTimeout(doReflow,100):doReflow()),chart.containerWidth=width,chart.containerHeight=height)},initReflow:function(){var chart=this,reflow=function(e){chart.reflow(e)};addEvent(win,"resize",reflow),addEvent(chart,"destroy",function(){removeEvent(win,"resize",reflow)})},setSize:function(width,height,animation){var chart=this,chartWidth,chartHeight,fireEndResize;chart.isResizing+=1,fireEndResize=function(){chart&&fireEvent(chart,"endResize",null,function(){chart.isResizing-=1})},setAnimation(animation,chart),chart.oldChartHeight=chart.chartHeight,chart.oldChartWidth=chart.chartWidth,defined(width)&&(chart.chartWidth=chartWidth=mathMax(0,mathRound(width)),chart.hasUserSize=!!chartWidth),defined(height)&&(chart.chartHeight=chartHeight=mathMax(0,mathRound(height))),(globalAnimation?animate:css)(chart.container,{width:chartWidth+PX,height:chartHeight+PX},globalAnimation),chart.setChartSize(!0),chart.renderer.setSize(chartWidth,chartHeight,animation),chart.maxTicks=null,each(chart.axes,function(axis){axis.isDirty=!0,axis.setScale()}),each(chart.series,function(serie){serie.isDirty=!0}),chart.isDirtyLegend=!0,chart.isDirtyBox=!0,chart.layOutTitles(),chart.getMargins(),chart.redraw(animation),chart.oldChartHeight=null,fireEvent(chart,"resize"),globalAnimation===!1?fireEndResize():setTimeout(fireEndResize,globalAnimation&&globalAnimation.duration||500)},setChartSize:function(skipAxes){var chart=this,inverted=chart.inverted,renderer=chart.renderer,chartWidth=chart.chartWidth,chartHeight=chart.chartHeight,optionsChart=chart.options.chart,spacing=chart.spacing,clipOffset=chart.clipOffset,clipX,clipY,plotLeft,plotTop,plotWidth,plotHeight,plotBorderWidth;chart.plotLeft=plotLeft=mathRound(chart.plotLeft),chart.plotTop=plotTop=mathRound(chart.plotTop),chart.plotWidth=plotWidth=mathMax(0,mathRound(chartWidth-plotLeft-chart.marginRight)),chart.plotHeight=plotHeight=mathMax(0,mathRound(chartHeight-plotTop-chart.marginBottom)),chart.plotSizeX=inverted?plotHeight:plotWidth,chart.plotSizeY=inverted?plotWidth:plotHeight,chart.plotBorderWidth=optionsChart.plotBorderWidth||0,chart.spacingBox=renderer.spacingBox={x:spacing[3],y:spacing[0],width:chartWidth-spacing[3]-spacing[1],height:chartHeight-spacing[0]-spacing[2]},chart.plotBox=renderer.plotBox={x:plotLeft,y:plotTop,width:plotWidth,height:plotHeight},plotBorderWidth=2*mathFloor(chart.plotBorderWidth/2),clipX=mathCeil(mathMax(plotBorderWidth,clipOffset[3])/2),clipY=mathCeil(mathMax(plotBorderWidth,clipOffset[0])/2),chart.clipBox={x:clipX,y:clipY,width:mathFloor(chart.plotSizeX-mathMax(plotBorderWidth,clipOffset[1])/2-clipX),height:mathMax(0,mathFloor(chart.plotSizeY-mathMax(plotBorderWidth,clipOffset[2])/2-clipY))},skipAxes||each(chart.axes,function(axis){axis.setAxisSize(),axis.setAxisTranslation()})},resetMargins:function(){var chart=this;each(marginNames,function(m,side){chart[m]=pick(chart.margin[side],chart.spacing[side])}),chart.axisOffset=[0,0,0,0],chart.clipOffset=[0,0,0,0]},drawChartBox:function(){var chart=this,optionsChart=chart.options.chart,renderer=chart.renderer,chartWidth=chart.chartWidth,chartHeight=chart.chartHeight,chartBackground=chart.chartBackground,plotBackground=chart.plotBackground,plotBorder=chart.plotBorder,plotBGImage=chart.plotBGImage,chartBorderWidth=optionsChart.borderWidth||0,chartBackgroundColor=optionsChart.backgroundColor,plotBackgroundColor=optionsChart.plotBackgroundColor,plotBackgroundImage=optionsChart.plotBackgroundImage,plotBorderWidth=optionsChart.plotBorderWidth||0,mgn,bgAttr,plotLeft=chart.plotLeft,plotTop=chart.plotTop,plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,plotBox=chart.plotBox,clipRect=chart.clipRect,clipBox=chart.clipBox;mgn=chartBorderWidth+(optionsChart.shadow?8:0),(chartBorderWidth||chartBackgroundColor)&&(chartBackground?chartBackground.animate(chartBackground.crisp({width:chartWidth-mgn,height:chartHeight-mgn})):(bgAttr={fill:chartBackgroundColor||NONE},chartBorderWidth&&(bgAttr.stroke=optionsChart.borderColor,bgAttr["stroke-width"]=chartBorderWidth),chart.chartBackground=renderer.rect(mgn/2,mgn/2,chartWidth-mgn,chartHeight-mgn,optionsChart.borderRadius,chartBorderWidth).attr(bgAttr).addClass(PREFIX+"background").add().shadow(optionsChart.shadow))),plotBackgroundColor&&(plotBackground?plotBackground.animate(plotBox):chart.plotBackground=renderer.rect(plotLeft,plotTop,plotWidth,plotHeight,0).attr({fill:plotBackgroundColor}).add().shadow(optionsChart.plotShadow)),plotBackgroundImage&&(plotBGImage?plotBGImage.animate(plotBox):chart.plotBGImage=renderer.image(plotBackgroundImage,plotLeft,plotTop,plotWidth,plotHeight).add()),clipRect?clipRect.animate({width:clipBox.width,height:clipBox.height}):chart.clipRect=renderer.clipRect(clipBox),plotBorderWidth&&(plotBorder?plotBorder.animate(plotBorder.crisp({x:plotLeft,y:plotTop,width:plotWidth,height:plotHeight,strokeWidth:-plotBorderWidth})):chart.plotBorder=renderer.rect(plotLeft,plotTop,plotWidth,plotHeight,0,-plotBorderWidth).attr({stroke:optionsChart.plotBorderColor,"stroke-width":plotBorderWidth,fill:NONE,zIndex:1}).add()),chart.isDirtyBox=!1},propFromSeries:function(){var chart=this,optionsChart=chart.options.chart,klass,seriesOptions=chart.options.series,i,value;each(["inverted","angular","polar"],function(key){for(klass=seriesTypes[optionsChart.type||optionsChart.defaultSeriesType],value=chart[key]||optionsChart[key]||klass&&klass.prototype[key],i=seriesOptions&&seriesOptions.length;!value&&i--;)klass=seriesTypes[seriesOptions[i].type],klass&&klass.prototype[key]&&(value=!0);chart[key]=value})},linkSeries:function(){var chart=this,chartSeries=chart.series;each(chartSeries,function(series){series.linkedSeries.length=0}),each(chartSeries,function(series){var linkedTo=series.options.linkedTo;isString(linkedTo)&&(linkedTo=":previous"===linkedTo?chart.series[series.index-1]:chart.get(linkedTo),linkedTo&&(linkedTo.linkedSeries.push(series),series.linkedParent=linkedTo))})},renderSeries:function(){each(this.series,function(serie){serie.translate(),serie.render()})},renderLabels:function(){var chart=this,labels=chart.options.labels;labels.items&&each(labels.items,function(label){var style=extend(labels.style,label.style),x=pInt(style.left)+chart.plotLeft,y=pInt(style.top)+chart.plotTop+12;delete style.left,delete style.top,chart.renderer.text(label.html,x,y).attr({zIndex:2}).css(style).add()})},render:function(){var chart=this,axes=chart.axes,renderer=chart.renderer,options=chart.options,tempWidth,tempHeight,redoHorizontal,redoVertical;chart.setTitle(),chart.legend=new Legend(chart,options.legend),chart.getStacks(),chart.getMargins(!0),chart.setChartSize(),tempWidth=chart.plotWidth,tempHeight=chart.plotHeight=chart.plotHeight-13,each(axes,function(axis){axis.setScale()}),chart.getAxisMargins(),redoHorizontal=tempWidth/chart.plotWidth>1.2,redoVertical=tempHeight/chart.plotHeight>1.1,(redoHorizontal||redoVertical)&&(chart.maxTicks=null,each(axes,function(axis){(axis.horiz&&redoHorizontal||!axis.horiz&&redoVertical)&&axis.setTickInterval(!0)}),chart.getMargins()),chart.drawChartBox(),chart.hasCartesianSeries&&each(axes,function(axis){axis.render()}),chart.seriesGroup||(chart.seriesGroup=renderer.g("series-group").attr({zIndex:3}).add()),chart.renderSeries(),chart.renderLabels(),chart.showCredits(options.credits),chart.hasRendered=!0},showCredits:function(credits){credits.enabled&&!this.credits&&(this.credits=this.renderer.text(credits.text,0,0).on("click",function(){credits.href&&(location.href=credits.href)}).attr({align:credits.position.align,zIndex:8}).css(credits.style).add().align(credits.position))},destroy:function(){var chart=this,axes=chart.axes,series=chart.series,container=chart.container,i,parentNode=container&&container.parentNode;for(fireEvent(chart,"destroy"),charts[chart.index]=UNDEFINED,chartCount--,chart.renderTo.removeAttribute("data-highcharts-chart"),removeEvent(chart),i=axes.length;i--;)axes[i]=axes[i].destroy();for(i=series.length;i--;)series[i]=series[i].destroy();each(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(name){var prop=chart[name];prop&&prop.destroy&&(chart[name]=prop.destroy())}),container&&(container.innerHTML="",removeEvent(container),parentNode&&discardElement(container));for(i in chart)delete chart[i]},isReadyToRender:function(){var chart=this;return!hasSVG&&win==win.top&&"complete"!==doc.readyState||useCanVG&&!win.canvg?(useCanVG?CanVGController.push(function(){chart.firstRender()},chart.options.global.canvasToolsURL):doc.attachEvent("onreadystatechange",function(){doc.detachEvent("onreadystatechange",chart.firstRender),"complete"===doc.readyState&&chart.firstRender()}),!1):!0},firstRender:function(){var chart=this,options=chart.options,callback=chart.callback;chart.isReadyToRender()&&(chart.getContainer(),fireEvent(chart,"init"),chart.resetMargins(),chart.setChartSize(),chart.propFromSeries(),chart.getAxes(),each(options.series||[],function(serieOptions){chart.initSeries(serieOptions)}),chart.linkSeries(),fireEvent(chart,"beforeRender"),Highcharts.Pointer&&(chart.pointer=new Pointer(chart,options)),chart.render(),chart.renderer.draw(),callback&&callback.apply(chart,[chart]),each(chart.callbacks,function(fn){chart.index!==UNDEFINED&&fn.apply(chart,[chart])}),fireEvent(chart,"load"),chart.cloneRenderTo(!0))},splashArray:function(target,options){var oVar=options[target],tArray=isObject(oVar)?oVar:[oVar,oVar,oVar,oVar];return[pick(options[target+"Top"],tArray[0]),pick(options[target+"Right"],tArray[1]),pick(options[target+"Bottom"],tArray[2]),pick(options[target+"Left"],tArray[3])]}};var CenteredSeriesMixin=Highcharts.CenteredSeriesMixin={getCenter:function(){var options=this.options,chart=this.chart,slicingRoom=2*(options.slicedOffset||0),handleSlicingRoom,plotWidth=chart.plotWidth-2*slicingRoom,plotHeight=chart.plotHeight-2*slicingRoom,centerOption=options.center,positions=[pick(centerOption[0],"50%"),pick(centerOption[1],"50%"),options.size||"100%",options.innerSize||0],smallestSize=mathMin(plotWidth,plotHeight),isPercent,i,value;for(i=0;4>i;++i)value=positions[i],isPercent=/%$/.test(value),handleSlicingRoom=2>i||2===i&&isPercent,positions[i]=(isPercent?[plotWidth,plotHeight,smallestSize,positions[2]][i]*pInt(value)/100:pInt(value))+(handleSlicingRoom?slicingRoom:0);return positions}},Point=function(){};Point.prototype={init:function(series,options,x){var point=this,colors;return point.series=series,point.color=series.color,point.applyOptions(options,x),point.pointAttr={},series.options.colorByPoint&&(colors=series.options.colors||series.chart.options.colors,point.color=point.color||colors[series.colorCounter++],series.colorCounter===colors.length&&(series.colorCounter=0)),series.chart.pointCount++,point},applyOptions:function(options,x){var point=this,series=point.series,pointValKey=series.options.pointValKey||series.pointValKey;return options=Point.prototype.optionsToObject.call(this,options),extend(point,options),point.options=point.options?extend(point.options,options):options,pointValKey&&(point.y=point[pointValKey]),point.x===UNDEFINED&&series&&(point.x=x===UNDEFINED?series.autoIncrement():x),point},optionsToObject:function(options){var ret={},series=this.series,pointArrayMap=series.pointArrayMap||["y"],valueCount=pointArrayMap.length,firstItemType,i=0,j=0;if("number"==typeof options||null===options)ret[pointArrayMap[0]]=options;else if(isArray(options))for(options.length>valueCount&&(firstItemType=typeof options[0],"string"===firstItemType?ret.name=options[0]:"number"===firstItemType&&(ret.x=options[0]),i++);valueCount>j;)ret[pointArrayMap[j++]]=options[i++];else"object"==typeof options&&(ret=options,options.dataLabels&&(series._hasPointLabels=!0),options.marker&&(series._hasPointMarkers=!0));return ret},destroy:function(){var point=this,series=point.series,chart=series.chart,hoverPoints=chart.hoverPoints,prop;chart.pointCount--,hoverPoints&&(point.setState(),erase(hoverPoints,point),hoverPoints.length||(chart.hoverPoints=null)),point===chart.hoverPoint&&point.onMouseOut(),(point.graphic||point.dataLabel)&&(removeEvent(point),point.destroyElements()),point.legendItem&&chart.legend.destroyItem(point);for(prop in point)point[prop]=null},destroyElements:function(){for(var point=this,props=["graphic","dataLabel","dataLabelUpper","group","connector","shadowGroup"],prop,i=6;i--;)prop=props[i],point[prop]&&(point[prop]=point[prop].destroy())},getLabelConfig:function(){var point=this;return{x:point.category,y:point.y,key:point.name||point.category,series:point.series,point:point,percentage:point.percentage,total:point.total||point.stackTotal}},tooltipFormatter:function(pointFormat){var series=this.series,seriesTooltipOptions=series.tooltipOptions,valueDecimals=pick(seriesTooltipOptions.valueDecimals,""),valuePrefix=seriesTooltipOptions.valuePrefix||"",valueSuffix=seriesTooltipOptions.valueSuffix||"";return each(series.pointArrayMap||["y"],function(key){key="{point."+key,(valuePrefix||valueSuffix)&&(pointFormat=pointFormat.replace(key+"}",valuePrefix+key+"}"+valueSuffix)),pointFormat=pointFormat.replace(key+"}",key+":,."+valueDecimals+"f}")}),format(pointFormat,{point:this,series:this.series})},firePointEvent:function(eventType,eventArgs,defaultFunction){var point=this,series=this.series,seriesOptions=series.options;(seriesOptions.point.events[eventType]||point.options&&point.options.events&&point.options.events[eventType])&&this.importEvents(),"click"===eventType&&seriesOptions.allowPointSelect&&(defaultFunction=function(event){point.select(null,event.ctrlKey||event.metaKey||event.shiftKey)}),fireEvent(this,eventType,eventArgs,defaultFunction)}};var Series=Highcharts.Series=function(){};Series.prototype={isCartesian:!0,type:"line",pointClass:Point,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(chart,options){var series=this,eventType,events,chartSeries=chart.series,sortByIndex=function(a,b){return pick(a.options.index,a._i)-pick(b.options.index,b._i)};series.chart=chart,series.options=options=series.setOptions(options),series.linkedSeries=[],series.bindAxes(),extend(series,{name:options.name,state:NORMAL_STATE,pointAttr:{},visible:options.visible!==!1,selected:options.selected===!0}),useCanVG&&(options.animation=!1),events=options.events;for(eventType in events)addEvent(series,eventType,events[eventType]);(events&&events.click||options.point&&options.point.events&&options.point.events.click||options.allowPointSelect)&&(chart.runTrackerClick=!0),series.getColor(),series.getSymbol(),each(series.parallelArrays,function(key){series[key+"Data"]=[]}),series.setData(options.data,!1),series.isCartesian&&(chart.hasCartesianSeries=!0),chartSeries.push(series),series._i=chartSeries.length-1,stableSort(chartSeries,sortByIndex),this.yAxis&&stableSort(this.yAxis.series,sortByIndex),each(chartSeries,function(series,i){series.index=i,series.name=series.name||"Series "+(i+1)})},bindAxes:function(){var series=this,seriesOptions=series.options,chart=series.chart,axisOptions;each(series.axisTypes||[],function(AXIS){each(chart[AXIS],function(axis){axisOptions=axis.options,(seriesOptions[AXIS]===axisOptions.index||seriesOptions[AXIS]!==UNDEFINED&&seriesOptions[AXIS]===axisOptions.id||seriesOptions[AXIS]===UNDEFINED&&0===axisOptions.index)&&(axis.series.push(series),series[AXIS]=axis,axis.isDirty=!0)}),series[AXIS]||series.optionalAxis===AXIS||error(18,!0)})},updateParallelArrays:function(point,i){var series=point.series,args=arguments,fn="number"==typeof i?function(key){var val="y"===key&&series.toYData?series.toYData(point):point[key];series[key+"Data"][i]=val}:function(key){Array.prototype[i].apply(series[key+"Data"],Array.prototype.slice.call(args,2))};each(series.parallelArrays,fn)},autoIncrement:function(){var options=this.options,xIncrement=this.xIncrement,date,pointInterval,pointIntervalUnit=options.pointIntervalUnit;return xIncrement=pick(xIncrement,options.pointStart,0),this.pointInterval=pointInterval=pick(this.pointInterval,options.pointInterval,1),("month"===pointIntervalUnit||"year"===pointIntervalUnit)&&(date=new Date(xIncrement),date="month"===pointIntervalUnit?+date[setMonth](date[getMonth]()+pointInterval):+date[setFullYear](date[getFullYear]()+pointInterval),pointInterval=date-xIncrement),this.xIncrement=xIncrement+pointInterval,xIncrement},getSegments:function(){var series=this,lastNull=-1,segments=[],i,points=series.points,pointsLength=points.length;if(pointsLength)if(series.options.connectNulls){for(i=pointsLength;i--;)null===points[i].y&&points.splice(i,1);points.length&&(segments=[points])}else each(points,function(point,i){null===point.y?(i>lastNull+1&&segments.push(points.slice(lastNull+1,i)),lastNull=i):i===pointsLength-1&&segments.push(points.slice(lastNull+1,i+1))});series.segments=segments},setOptions:function(itemOptions){var chart=this.chart,chartOptions=chart.options,plotOptions=chartOptions.plotOptions,userOptions=chart.userOptions||{},userPlotOptions=userOptions.plotOptions||{},typeOptions=plotOptions[this.type],options,zones;return this.userOptions=itemOptions,options=merge(typeOptions,plotOptions.series,itemOptions),this.tooltipOptions=merge(defaultOptions.tooltip,defaultOptions.plotOptions[this.type].tooltip,userOptions.tooltip,userPlotOptions.series&&userPlotOptions.series.tooltip,userPlotOptions[this.type]&&userPlotOptions[this.type].tooltip,itemOptions.tooltip),null===typeOptions.marker&&delete options.marker,this.zoneAxis=options.zoneAxis,zones=this.zones=(options.zones||[]).slice(),!options.negativeColor&&!options.negativeFillColor||options.zones||zones.push({value:options[this.zoneAxis+"Threshold"]||options.threshold||0,color:options.negativeColor,fillColor:options.negativeFillColor}),zones.length&&defined(zones[zones.length-1].value)&&zones.push({color:this.color,fillColor:this.fillColor}),options},getCyclic:function(prop,value,defaults){var i,userOptions=this.userOptions,indexName="_"+prop+"Index",counterName=prop+"Counter";value||(defined(userOptions[indexName])?i=userOptions[indexName]:(userOptions[indexName]=i=this.chart[counterName]%defaults.length,this.chart[counterName]+=1),value=defaults[i]),this[prop]=value},getColor:function(){this.options.colorByPoint||this.getCyclic("color",this.options.color||defaultPlotOptions[this.type].color,this.chart.options.colors)},getSymbol:function(){var seriesMarkerOption=this.options.marker;this.getCyclic("symbol",seriesMarkerOption.symbol,this.chart.options.symbols),/^url/.test(this.symbol)&&(seriesMarkerOption.radius=0)},drawLegendSymbol:LegendSymbolMixin.drawLineMarker,setData:function(data,redraw,animation,updatePoints){var series=this,oldData=series.points,oldDataLength=oldData&&oldData.length||0,dataLength,options=series.options,chart=series.chart,firstPoint=null,xAxis=series.xAxis,hasCategories=xAxis&&!!xAxis.categories,i,turboThreshold=options.turboThreshold,pt,xData=this.xData,yData=this.yData,pointArrayMap=series.pointArrayMap,valueCount=pointArrayMap&&pointArrayMap.length;if(data=data||[],dataLength=data.length,redraw=pick(redraw,!0),updatePoints!==!1&&dataLength&&oldDataLength===dataLength&&!series.cropped&&!series.hasGroupedData&&series.visible)each(data,function(point,i){oldData[i].update(point,!1,null,!1)});else{if(series.xIncrement=null,series.pointRange=hasCategories?1:options.pointRange,series.colorCounter=0,each(this.parallelArrays,function(key){series[key+"Data"].length=0}),turboThreshold&&dataLength>turboThreshold){for(i=0;null===firstPoint&&dataLength>i;)firstPoint=data[i],i++;if(isNumber(firstPoint)){var x=pick(options.pointStart,0),pointInterval=pick(options.pointInterval,1);for(i=0;dataLength>i;i++)xData[i]=x,yData[i]=data[i],x+=pointInterval;series.xIncrement=x}else if(isArray(firstPoint))if(valueCount)for(i=0;dataLength>i;i++)pt=data[i],xData[i]=pt[0],yData[i]=pt.slice(1,valueCount+1);else for(i=0;dataLength>i;i++)pt=data[i],xData[i]=pt[0],yData[i]=pt[1];else error(12)}else for(i=0;dataLength>i;i++)data[i]!==UNDEFINED&&(pt={series:series},series.pointClass.prototype.applyOptions.apply(pt,[data[i]]),series.updateParallelArrays(pt,i),hasCategories&&pt.name&&(xAxis.names[pt.x]=pt.name));for(isString(yData[0])&&error(14,!0),series.data=[],series.options.data=data,i=oldDataLength;i--;)oldData[i]&&oldData[i].destroy&&oldData[i].destroy();xAxis&&(xAxis.minRange=xAxis.userMinRange),series.isDirty=series.isDirtyData=chart.isDirtyBox=!0,animation=!1}redraw&&chart.redraw(animation)},processData:function(force){var series=this,processedXData=series.xData,processedYData=series.yData,dataLength=processedXData.length,croppedData,cropStart=0,cropped,distance,closestPointRange,xAxis=series.xAxis,i,options=series.options,cropThreshold=options.cropThreshold,isCartesian=series.isCartesian,xExtremes,min,max;if(isCartesian&&!series.isDirty&&!xAxis.isDirty&&!series.yAxis.isDirty&&!force)return!1;for(xAxis&&(xExtremes=xAxis.getExtremes(),min=xExtremes.min,max=xExtremes.max),isCartesian&&series.sorted&&(!cropThreshold||dataLength>cropThreshold||series.forceCrop)&&(min>processedXData[dataLength-1]||processedXData[0]>max?(processedXData=[],processedYData=[]):(min>processedXData[0]||processedXData[dataLength-1]>max)&&(croppedData=this.cropData(series.xData,series.yData,min,max),processedXData=croppedData.xData,processedYData=croppedData.yData,cropStart=croppedData.start,cropped=!0)),i=processedXData.length-1;i>=0;i--)distance=processedXData[i]-processedXData[i-1],distance>0&&(closestPointRange===UNDEFINED||closestPointRange>distance)?closestPointRange=distance:0>distance&&series.requireSorting&&error(15);series.cropped=cropped,series.cropStart=cropStart,series.processedXData=processedXData,series.processedYData=processedYData,null===options.pointRange&&(series.pointRange=closestPointRange||1),series.closestPointRange=closestPointRange},cropData:function(xData,yData,min,max){var dataLength=xData.length,cropStart=0,cropEnd=dataLength,cropShoulder=pick(this.cropShoulder,1),i;for(i=0;dataLength>i;i++)if(xData[i]>=min){cropStart=mathMax(0,i-cropShoulder);break}for(;dataLength>i;i++)if(xData[i]>max){cropEnd=i+cropShoulder;break}return{xData:xData.slice(cropStart,cropEnd),yData:yData.slice(cropStart,cropEnd),start:cropStart,end:cropEnd}},generatePoints:function(){var series=this,options=series.options,dataOptions=options.data,data=series.data,dataLength,processedXData=series.processedXData,processedYData=series.processedYData,pointClass=series.pointClass,processedDataLength=processedXData.length,cropStart=series.cropStart||0,cursor,hasGroupedData=series.hasGroupedData,point,points=[],i;if(!data&&!hasGroupedData){var arr=[];arr.length=dataOptions.length,data=series.data=arr}for(i=0;processedDataLength>i;i++)cursor=cropStart+i,hasGroupedData?points[i]=(new pointClass).init(series,[processedXData[i]].concat(splat(processedYData[i]))):(data[cursor]?point=data[cursor]:dataOptions[cursor]!==UNDEFINED&&(data[cursor]=point=(new pointClass).init(series,dataOptions[cursor],processedXData[i])),points[i]=point),points[i].index=cursor;if(data&&(processedDataLength!==(dataLength=data.length)||hasGroupedData))for(i=0;dataLength>i;i++)i!==cropStart||hasGroupedData||(i+=processedDataLength),data[i]&&(data[i].destroyElements(),data[i].plotX=UNDEFINED);series.data=data,series.points=points},getExtremes:function(yData){var xAxis=this.xAxis,yAxis=this.yAxis,xData=this.processedXData,yDataLength,activeYData=[],activeCounter=0,xExtremes=xAxis.getExtremes(),xMin=xExtremes.min,xMax=xExtremes.max,validValue,withinRange,dataMin,dataMax,x,y,i,j;for(yData=yData||this.stackedYData||this.processedYData,yDataLength=yData.length,i=0;yDataLength>i;i++)if(x=xData[i],y=yData[i],validValue=null!==y&&y!==UNDEFINED&&(!yAxis.isLog||y.length||y>0),withinRange=this.getExtremesFromAll||this.cropped||(xData[i+1]||x)>=xMin&&xMax>=(xData[i-1]||x),validValue&&withinRange)if(j=y.length)for(;j--;)null!==y[j]&&(activeYData[activeCounter++]=y[j]);else activeYData[activeCounter++]=y;this.dataMin=pick(dataMin,arrayMin(activeYData)),this.dataMax=pick(dataMax,arrayMax(activeYData))},translate:function(){this.processedXData||this.processData(),this.generatePoints();var series=this,options=series.options,stacking=options.stacking,xAxis=series.xAxis,categories=xAxis.categories,yAxis=series.yAxis,points=series.points,dataLength=points.length,hasModifyValue=!!series.modifyValue,i,pointPlacement=options.pointPlacement,dynamicallyPlaced="between"===pointPlacement||isNumber(pointPlacement),threshold=options.threshold,plotX,plotY,lastPlotX,closestPointRangePx=Number.MAX_VALUE;for(i=0;dataLength>i;i++){var point=points[i],xValue=point.x,yValue=point.y,yBottom=point.low,stack=stacking&&yAxis.stacks[(series.negStacks&&threshold>yValue?"-":"")+series.stackKey],pointStack,stackValues;yAxis.isLog&&null!==yValue&&0>=yValue&&(point.y=yValue=null,error(10)),point.plotX=plotX=xAxis.translate(xValue,0,0,0,1,pointPlacement,"flags"===this.type),stacking&&series.visible&&stack&&stack[xValue]&&(pointStack=stack[xValue],stackValues=pointStack.points[series.index+","+i],yBottom=stackValues[0],yValue=stackValues[1],0===yBottom&&(yBottom=pick(threshold,yAxis.min)),yAxis.isLog&&0>=yBottom&&(yBottom=null),point.total=point.stackTotal=pointStack.total,point.percentage=pointStack.total&&100*(point.y/pointStack.total),point.stackY=yValue,pointStack.setOffset(series.pointXOffset||0,series.barW||0)),point.yBottom=defined(yBottom)?yAxis.translate(yBottom,0,1,0,1):null,hasModifyValue&&(yValue=series.modifyValue(yValue,point)),point.plotY=plotY="number"==typeof yValue&&1/0!==yValue?mathMin(mathMax(-1e5,yAxis.translate(yValue,0,1,0,1)),1e5):UNDEFINED,point.isInside=plotY!==UNDEFINED&&plotY>=0&&yAxis.len>=plotY&&plotX>=0&&xAxis.len>=plotX,point.clientX=dynamicallyPlaced?xAxis.translate(xValue,0,0,0,1):plotX,point.negative=(threshold||0)>point.y,point.category=categories&&categories[point.x]!==UNDEFINED?categories[point.x]:point.x,i&&(closestPointRangePx=mathMin(closestPointRangePx,mathAbs(plotX-lastPlotX))),lastPlotX=plotX}series.closestPointRangePx=closestPointRangePx,series.getSegments()},setClip:function(animation){var chart=this.chart,renderer=chart.renderer,inverted=chart.inverted,seriesClipBox=this.clipBox,clipBox=seriesClipBox||chart.clipBox,sharedClipKey=this.sharedClipKey||["_sharedClip",animation&&animation.duration,animation&&animation.easing,clipBox.height].join(","),clipRect=chart[sharedClipKey],markerClipRect=chart[sharedClipKey+"m"];clipRect||(animation&&(clipBox.width=0,chart[sharedClipKey+"m"]=markerClipRect=renderer.clipRect(-99,inverted?-chart.plotLeft:-chart.plotTop,99,inverted?chart.chartWidth:chart.chartHeight)),chart[sharedClipKey]=clipRect=renderer.clipRect(clipBox)),animation&&(clipRect.count+=1),this.options.clip!==!1&&(this.group.clip(animation||seriesClipBox?clipRect:chart.clipRect),this.markerGroup.clip(markerClipRect),this.sharedClipKey=sharedClipKey),animation||(clipRect.count-=1,0>=clipRect.count&&sharedClipKey&&chart[sharedClipKey]&&(seriesClipBox||(chart[sharedClipKey]=chart[sharedClipKey].destroy()),chart[sharedClipKey+"m"]&&(chart[sharedClipKey+"m"]=chart[sharedClipKey+"m"].destroy())))
},animate:function(init){var series=this,chart=series.chart,clipRect,animation=series.options.animation,sharedClipKey;animation&&!isObject(animation)&&(animation=defaultPlotOptions[series.type].animation),init?series.setClip(animation):(sharedClipKey=this.sharedClipKey,clipRect=chart[sharedClipKey],clipRect&&clipRect.animate({width:chart.plotSizeX},animation),chart[sharedClipKey+"m"]&&chart[sharedClipKey+"m"].animate({width:chart.plotSizeX+99},animation),series.animate=null)},afterAnimate:function(){this.setClip(),fireEvent(this,"afterAnimate")},drawPoints:function(){var series=this,pointAttr,points=series.points,chart=series.chart,plotX,plotY,i,point,radius,symbol,isImage,graphic,options=series.options,seriesMarkerOptions=options.marker,seriesPointAttr=series.pointAttr[""],pointMarkerOptions,hasPointMarker,enabled,isInside,markerGroup=series.markerGroup,xAxis=series.xAxis,globallyEnabled=pick(seriesMarkerOptions.enabled,xAxis.isRadial,series.closestPointRangePx>2*seriesMarkerOptions.radius);if(seriesMarkerOptions.enabled!==!1||series._hasPointMarkers)for(i=points.length;i--;)point=points[i],plotX=mathFloor(point.plotX),plotY=point.plotY,graphic=point.graphic,pointMarkerOptions=point.marker||{},hasPointMarker=!!point.marker,enabled=globallyEnabled&&pointMarkerOptions.enabled===UNDEFINED||pointMarkerOptions.enabled,isInside=point.isInside,enabled&&plotY!==UNDEFINED&&!isNaN(plotY)&&null!==point.y?(pointAttr=point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE]||seriesPointAttr,radius=pointAttr.r,symbol=pick(pointMarkerOptions.symbol,series.symbol),isImage=0===symbol.indexOf("url"),graphic?graphic[isInside?"show":"hide"](!0).animate(extend({x:plotX-radius,y:plotY-radius},graphic.symbolName?{width:2*radius,height:2*radius}:{})):isInside&&(radius>0||isImage)&&(point.graphic=graphic=chart.renderer.symbol(symbol,plotX-radius,plotY-radius,2*radius,2*radius,hasPointMarker?pointMarkerOptions:seriesMarkerOptions).attr(pointAttr).add(markerGroup))):graphic&&(point.graphic=graphic.destroy())},convertAttribs:function(options,base1,base2,base3){var conversion=this.pointAttrToOptions,attr,option,obj={};options=options||{},base1=base1||{},base2=base2||{},base3=base3||{};for(attr in conversion)option=conversion[attr],obj[attr]=pick(options[option],base1[attr],base2[attr],base3[attr]);return obj},getAttribs:function(){var series=this,seriesOptions=series.options,normalOptions=defaultPlotOptions[series.type].marker?seriesOptions.marker:seriesOptions,stateOptions=normalOptions.states,stateOptionsHover=stateOptions[HOVER_STATE],pointStateOptionsHover,seriesColor=series.color,seriesNegativeColor=series.options.negativeColor,normalDefaults={stroke:seriesColor,fill:seriesColor},points=series.points||[],i,point,seriesPointAttr=[],pointAttr,pointAttrToOptions=series.pointAttrToOptions,hasPointSpecificOptions=series.hasPointSpecificOptions,defaultLineColor=normalOptions.lineColor,defaultFillColor=normalOptions.fillColor,turboThreshold=seriesOptions.turboThreshold,zones=series.zones,zoneAxis=series.zoneAxis||"y",attr,key;if(seriesOptions.marker?(stateOptionsHover.radius=stateOptionsHover.radius||normalOptions.radius+stateOptionsHover.radiusPlus,stateOptionsHover.lineWidth=stateOptionsHover.lineWidth||normalOptions.lineWidth+stateOptionsHover.lineWidthPlus):(stateOptionsHover.color=stateOptionsHover.color||Color(stateOptionsHover.color||seriesColor).brighten(stateOptionsHover.brightness).get(),stateOptionsHover.negativeColor=stateOptionsHover.negativeColor||Color(stateOptionsHover.negativeColor||seriesNegativeColor).brighten(stateOptionsHover.brightness).get()),seriesPointAttr[NORMAL_STATE]=series.convertAttribs(normalOptions,normalDefaults),each([HOVER_STATE,SELECT_STATE],function(state){seriesPointAttr[state]=series.convertAttribs(stateOptions[state],seriesPointAttr[NORMAL_STATE])}),series.pointAttr=seriesPointAttr,i=points.length,!turboThreshold||turboThreshold>i||hasPointSpecificOptions)for(;i--;){if(point=points[i],normalOptions=point.options&&point.options.marker||point.options,normalOptions&&normalOptions.enabled===!1&&(normalOptions.radius=0),zones.length){for(var j=0,threshold=zones[j];point[zoneAxis]>=threshold.value;)threshold=zones[++j];point.color=point.fillColor=threshold.color}if(hasPointSpecificOptions=seriesOptions.colorByPoint||point.color,point.options)for(key in pointAttrToOptions)defined(normalOptions[pointAttrToOptions[key]])&&(hasPointSpecificOptions=!0);hasPointSpecificOptions?(normalOptions=normalOptions||{},pointAttr=[],stateOptions=normalOptions.states||{},pointStateOptionsHover=stateOptions[HOVER_STATE]=stateOptions[HOVER_STATE]||{},seriesOptions.marker||(pointStateOptionsHover.color=pointStateOptionsHover.color||!point.options.color&&stateOptionsHover[point.negative&&seriesNegativeColor?"negativeColor":"color"]||Color(point.color).brighten(pointStateOptionsHover.brightness||stateOptionsHover.brightness).get()),attr={color:point.color},defaultFillColor||(attr.fillColor=point.color),defaultLineColor||(attr.lineColor=point.color),pointAttr[NORMAL_STATE]=series.convertAttribs(extend(attr,normalOptions),seriesPointAttr[NORMAL_STATE]),pointAttr[HOVER_STATE]=series.convertAttribs(stateOptions[HOVER_STATE],seriesPointAttr[HOVER_STATE],pointAttr[NORMAL_STATE]),pointAttr[SELECT_STATE]=series.convertAttribs(stateOptions[SELECT_STATE],seriesPointAttr[SELECT_STATE],pointAttr[NORMAL_STATE])):pointAttr=seriesPointAttr,point.pointAttr=pointAttr}},destroy:function(){var series=this,chart=series.chart,issue134=/AppleWebKit\/533/.test(userAgent),destroy,i,data=series.data||[],point,prop,axis;for(fireEvent(series,"destroy"),removeEvent(series),each(series.axisTypes||[],function(AXIS){axis=series[AXIS],axis&&(erase(axis.series,series),axis.isDirty=axis.forceRedraw=!0)}),series.legendItem&&series.chart.legend.destroyItem(series),i=data.length;i--;)point=data[i],point&&point.destroy&&point.destroy();series.points=null,clearTimeout(series.animationTimeout),each(["area","graph","dataLabelsGroup","group","markerGroup","tracker","graphNeg","areaNeg","posClip","negClip"],function(prop){series[prop]&&(destroy=issue134&&"group"===prop?"hide":"destroy",series[prop][destroy]())}),chart.hoverSeries===series&&(chart.hoverSeries=null),erase(chart.series,series);for(prop in series)delete series[prop]},getSegmentPath:function(segment){var series=this,segmentPath=[],step=series.options.step;return each(segment,function(point,i){var plotX=point.plotX,plotY=point.plotY,lastPoint;series.getPointSpline?segmentPath.push.apply(segmentPath,series.getPointSpline(segment,point,i)):(segmentPath.push(i?L:M),step&&i&&(lastPoint=segment[i-1],"right"===step?segmentPath.push(lastPoint.plotX,plotY):"center"===step?segmentPath.push((lastPoint.plotX+plotX)/2,lastPoint.plotY,(lastPoint.plotX+plotX)/2,plotY):segmentPath.push(plotX,lastPoint.plotY)),segmentPath.push(point.plotX,point.plotY))}),segmentPath},getGraphPath:function(){var series=this,graphPath=[],segmentPath,singlePoints=[];return each(series.segments,function(segment){segmentPath=series.getSegmentPath(segment),segment.length>1?graphPath=graphPath.concat(segmentPath):singlePoints.push(segment[0])}),series.singlePoints=singlePoints,series.graphPath=graphPath,graphPath},drawGraph:function(){var series=this,options=this.options,props=[["graph",options.lineColor||this.color,options.dashStyle]],lineWidth=options.lineWidth,roundCap="square"!==options.linecap,graphPath=this.getGraphPath(),fillColor=this.fillGraph&&this.color||NONE,zones=this.zones;each(zones,function(threshold,i){props.push(["colorGraph"+i,threshold.color||series.color,threshold.dashStyle||options.dashStyle])}),each(props,function(prop,i){var graphKey=prop[0],graph=series[graphKey],attribs;graph?(stop(graph),graph.animate({d:graphPath})):(lineWidth||fillColor)&&graphPath.length&&(attribs={stroke:prop[1],"stroke-width":lineWidth,fill:fillColor,zIndex:1},prop[2]?attribs.dashstyle=prop[2]:roundCap&&(attribs["stroke-linecap"]=attribs["stroke-linejoin"]="round"),series[graphKey]=series.chart.renderer.path(graphPath).attr(attribs).add(series.group).shadow(2>i&&options.shadow))})},applyZones:function(){var series=this,chart=this.chart,renderer=chart.renderer,zones=this.zones,translatedFrom,translatedTo,clips=this.clips||[],clipAttr,graph=this.graph,area=this.area,chartSizeMax=mathMax(chart.chartWidth,chart.chartHeight),zoneAxis=this.zoneAxis||"y",axis=this[zoneAxis+"Axis"],reversed=axis.reversed,horiz=axis.horiz,ignoreZones=!1;zones.length&&(graph||area)&&(graph.hide(),area&&area.hide(),each(zones,function(threshold,i){translatedFrom=pick(translatedTo,reversed?horiz?chart.plotWidth:0:horiz?0:axis.toPixels(axis.min)),translatedTo=mathRound(axis.toPixels(pick(threshold.value,axis.max),!0)),ignoreZones&&(translatedFrom=translatedTo=axis.toPixels(axis.max)),axis.isXAxis?(clipAttr={x:reversed?translatedTo:translatedFrom,y:0,width:Math.abs(translatedFrom-translatedTo),height:chartSizeMax},horiz||(clipAttr.x=chart.plotHeight-clipAttr.x)):(clipAttr={x:0,y:reversed?translatedFrom:translatedTo,width:chartSizeMax,height:Math.abs(translatedFrom-translatedTo)},horiz&&(clipAttr.y=chart.plotWidth-clipAttr.y)),chart.inverted&&renderer.isVML&&(clipAttr=axis.isXAxis?{x:0,y:reversed?translatedFrom:translatedTo,height:clipAttr.width,width:chart.chartWidth}:{x:clipAttr.y-chart.plotLeft-chart.spacingBox.x,y:0,width:clipAttr.height,height:chart.chartHeight}),clips[i]?clips[i].animate(clipAttr):(clips[i]=renderer.clipRect(clipAttr),series["colorGraph"+i].clip(clips[i]),area&&series["colorArea"+i].clip(clips[i])),ignoreZones=threshold.value>axis.max}),this.clips=clips)},invertGroups:function(){function setInvert(){var size={width:series.yAxis.len,height:series.xAxis.len};each(["group","markerGroup"],function(groupName){series[groupName]&&series[groupName].attr(size).invert()})}var series=this,chart=series.chart;series.xAxis&&(addEvent(chart,"resize",setInvert),addEvent(series,"destroy",function(){removeEvent(chart,"resize",setInvert)}),setInvert(),series.invertGroups=setInvert)},plotGroup:function(prop,name,visibility,zIndex,parent){var group=this[prop],isNew=!group;return isNew&&(this[prop]=group=this.chart.renderer.g(name).attr({visibility:visibility,zIndex:zIndex||.1}).add(parent)),group[isNew?"attr":"animate"](this.getPlotBox()),group},getPlotBox:function(){var chart=this.chart,xAxis=this.xAxis,yAxis=this.yAxis;return chart.inverted&&(xAxis=yAxis,yAxis=this.xAxis),{translateX:xAxis?xAxis.left:chart.plotLeft,translateY:yAxis?yAxis.top:chart.plotTop,scaleX:1,scaleY:1}},render:function(){var series=this,chart=series.chart,group,options=series.options,animation=options.animation,animDuration=animation&&!!series.animate&&chart.renderer.isSVG&&pick(animation.duration,500)||0,visibility=series.visible?VISIBLE:HIDDEN,zIndex=options.zIndex,hasRendered=series.hasRendered,chartSeriesGroup=chart.seriesGroup;group=series.plotGroup("group","series",visibility,zIndex,chartSeriesGroup),series.markerGroup=series.plotGroup("markerGroup","markers",visibility,zIndex,chartSeriesGroup),animDuration&&series.animate(!0),series.getAttribs(),group.inverted=series.isCartesian?chart.inverted:!1,series.drawGraph&&(series.drawGraph(),series.applyZones()),each(series.points,function(point){point.redraw&&point.redraw()}),series.drawDataLabels&&series.drawDataLabels(),series.visible&&series.drawPoints(),series.drawTracker&&series.options.enableMouseTracking!==!1&&series.drawTracker(),chart.inverted&&series.invertGroups(),options.clip===!1||series.sharedClipKey||hasRendered||group.clip(chart.clipRect),animDuration&&series.animate(),hasRendered||(animDuration?series.animationTimeout=setTimeout(function(){series.afterAnimate()},animDuration):series.afterAnimate()),series.isDirty=series.isDirtyData=!1,series.hasRendered=!0},redraw:function(){var series=this,chart=series.chart,wasDirtyData=series.isDirtyData,wasDirty=series.isDirty,group=series.group,xAxis=series.xAxis,yAxis=series.yAxis;group&&(chart.inverted&&group.attr({width:chart.plotWidth,height:chart.plotHeight}),group.animate({translateX:pick(xAxis&&xAxis.left,chart.plotLeft),translateY:pick(yAxis&&yAxis.top,chart.plotTop)})),series.translate(),series.render(),wasDirtyData&&fireEvent(series,"updatedData"),(wasDirty||wasDirtyData)&&delete this.kdTree},kdDimensions:1,kdTree:null,kdAxisArray:["plotX","plotY"],kdComparer:"distX",searchPoint:function(e){var series=this,xAxis=series.xAxis,yAxis=series.yAxis,inverted=series.chart.inverted;return e.plotX=inverted?xAxis.len-e.chartY+xAxis.pos:e.chartX-xAxis.pos,e.plotY=inverted?yAxis.len-e.chartX+yAxis.pos:e.chartY-yAxis.pos,this.searchKDTree(e)},buildKDTree:function(){function _kdtree(points,depth,dimensions){var axis,median,length=points&&points.length;return length?(axis=series.kdAxisArray[depth%dimensions],points.sort(function(a,b){return a[axis]-b[axis]}),median=Math.floor(length/2),{point:points[median],left:_kdtree(points.slice(0,median),depth+1,dimensions),right:_kdtree(points.slice(median+1),depth+1,dimensions)}):void 0}function startRecursive(){var points=grep(series.points,function(point){return null!==point.y});series.kdTree=_kdtree(points,dimensions,dimensions)}var series=this,dimensions=series.kdDimensions;delete series.kdTree,series.options.kdSync?startRecursive():setTimeout(startRecursive)},searchKDTree:function(point){function _distance(p1,p2){var x=defined(p1[kdX])&&defined(p2[kdX])?Math.pow(p1[kdX]-p2[kdX],2):null,y=defined(p1[kdY])&&defined(p2[kdY])?Math.pow(p1[kdY]-p2[kdY],2):null,r=(x||0)+(y||0);return{distX:defined(x)?Math.sqrt(x):Number.MAX_VALUE,distY:defined(y)?Math.sqrt(y):Number.MAX_VALUE,distR:defined(r)?Math.sqrt(r):Number.MAX_VALUE}}function _search(search,tree,depth,dimensions){var point=tree.point,axis=series.kdAxisArray[depth%dimensions],tdist,sideA,sideB,ret=point,nPoint1,nPoint2;return point.dist=_distance(search,point),tdist=search[axis]-point[axis],sideA=0>tdist?"left":"right",tree[sideA]&&(nPoint1=_search(search,tree[sideA],depth+1,dimensions),ret=nPoint1.dist[kdComparer]<ret.dist[kdComparer]?nPoint1:point,sideB=0>tdist?"right":"left",tree[sideB]&&Math.sqrt(tdist*tdist)<ret.dist[kdComparer]&&(nPoint2=_search(search,tree[sideB],depth+1,dimensions),ret=nPoint2.dist[kdComparer]<ret.dist[kdComparer]?nPoint2:ret)),ret}var series=this,kdComparer=this.kdComparer,kdX=this.kdAxisArray[0],kdY=this.kdAxisArray[1];return this.kdTree||this.buildKDTree(),this.kdTree?_search(point,this.kdTree,this.kdDimensions,this.kdDimensions):void 0}},StackItem.prototype={destroy:function(){destroyObjectProperties(this,this.axis)},render:function(group){var options=this.options,formatOption=options.format,str=formatOption?format(formatOption,this):options.formatter.call(this);this.label?this.label.attr({text:str,visibility:HIDDEN}):this.label=this.axis.chart.renderer.text(str,null,null,options.useHTML).css(options.style).attr({align:this.textAlign,rotation:options.rotation,visibility:HIDDEN}).add(group)},setOffset:function(xOffset,xWidth){var stackItem=this,axis=stackItem.axis,chart=axis.chart,inverted=chart.inverted,neg=this.isNegative,y=axis.translate(axis.usePercentage?100:this.total,0,0,0,1),yZero=axis.translate(0),h=mathAbs(y-yZero),x=chart.xAxis[0].translate(this.x)+xOffset,plotHeight=chart.plotHeight,stackBox={x:inverted?neg?y:y-h:x,y:inverted?plotHeight-x-xWidth:neg?plotHeight-y-h:plotHeight-y,width:inverted?h:xWidth,height:inverted?xWidth:h},label=this.label,alignAttr;label&&(label.align(this.alignOptions,null,stackBox),alignAttr=label.alignAttr,label[this.options.crop===!1||chart.isInsidePlot(alignAttr.x,alignAttr.y)?"show":"hide"](!0))}},Axis.prototype.buildStacks=function(){var series=this.series,reversedStacks=pick(this.options.reversedStacks,!0),i=series.length;if(!this.isXAxis){for(this.usePercentage=!1;i--;)series[reversedStacks?i:series.length-i-1].setStackedPoints();if(this.usePercentage)for(i=0;series.length>i;i++)series[i].setPercentStacks()}},Axis.prototype.renderStackTotals=function(){var axis=this,chart=axis.chart,renderer=chart.renderer,stacks=axis.stacks,stackKey,oneStack,stackCategory,stackTotalGroup=axis.stackTotalGroup;stackTotalGroup||(axis.stackTotalGroup=stackTotalGroup=renderer.g("stack-labels").attr({visibility:VISIBLE,zIndex:6}).add()),stackTotalGroup.translate(chart.plotLeft,chart.plotTop);for(stackKey in stacks){oneStack=stacks[stackKey];for(stackCategory in oneStack)oneStack[stackCategory].render(stackTotalGroup)}},Series.prototype.setStackedPoints=function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var series=this,xData=series.processedXData,yData=series.processedYData,stackedYData=[],yDataLength=yData.length,seriesOptions=series.options,threshold=seriesOptions.threshold,stackOption=seriesOptions.stack,stacking=seriesOptions.stacking,stackKey=series.stackKey,negKey="-"+stackKey,negStacks=series.negStacks,yAxis=series.yAxis,stacks=yAxis.stacks,oldStacks=yAxis.oldStacks,isNegative,stack,other,key,pointKey,i,x,y;for(i=0;yDataLength>i;i++)x=xData[i],y=yData[i],pointKey=series.index+","+i,isNegative=negStacks&&threshold>y,key=isNegative?negKey:stackKey,stacks[key]||(stacks[key]={}),stacks[key][x]||(oldStacks[key]&&oldStacks[key][x]?(stacks[key][x]=oldStacks[key][x],stacks[key][x].total=null):stacks[key][x]=new StackItem(yAxis,yAxis.options.stackLabels,isNegative,x,stackOption)),stack=stacks[key][x],stack.points[pointKey]=[stack.cum||0],"percent"===stacking?(other=isNegative?stackKey:negKey,negStacks&&stacks[other]&&stacks[other][x]?(other=stacks[other][x],stack.total=other.total=mathMax(other.total,stack.total)+mathAbs(y)||0):stack.total=correctFloat(stack.total+(mathAbs(y)||0))):stack.total=correctFloat(stack.total+(y||0)),stack.cum=(stack.cum||0)+(y||0),stack.points[pointKey].push(stack.cum),stackedYData[i]=stack.cum;"percent"===stacking&&(yAxis.usePercentage=!0),this.stackedYData=stackedYData,yAxis.oldStacks={}}},Series.prototype.setPercentStacks=function(){var series=this,stackKey=series.stackKey,stacks=series.yAxis.stacks,processedXData=series.processedXData;each([stackKey,"-"+stackKey],function(key){for(var i=processedXData.length,x,stack,pointExtremes,totalFactor;i--;)x=processedXData[i],stack=stacks[key]&&stacks[key][x],pointExtremes=stack&&stack.points[series.index+","+i],pointExtremes&&(totalFactor=stack.total?100/stack.total:0,pointExtremes[0]=correctFloat(pointExtremes[0]*totalFactor),pointExtremes[1]=correctFloat(pointExtremes[1]*totalFactor),series.stackedYData[i]=pointExtremes[1])})},extend(Chart.prototype,{addSeries:function(options,redraw,animation){var series,chart=this;return options&&(redraw=pick(redraw,!0),fireEvent(chart,"addSeries",{options:options},function(){series=chart.initSeries(options),chart.isDirtyLegend=!0,chart.linkSeries(),redraw&&chart.redraw(animation)})),series},addAxis:function(options,isX,redraw,animation){var key=isX?"xAxis":"yAxis",chartOptions=this.options,axis;axis=new Axis(this,merge(options,{index:this[key].length,isX:isX})),chartOptions[key]=splat(chartOptions[key]||{}),chartOptions[key].push(options),pick(redraw,!0)&&this.redraw(animation)},showLoading:function(str){var chart=this,options=chart.options,loadingDiv=chart.loadingDiv,loadingOptions=options.loading,setLoadingSize=function(){loadingDiv&&css(loadingDiv,{left:chart.plotLeft+PX,top:chart.plotTop+PX,width:chart.plotWidth+PX,height:chart.plotHeight+PX})};loadingDiv||(chart.loadingDiv=loadingDiv=createElement(DIV,{className:PREFIX+"loading"},extend(loadingOptions.style,{zIndex:10,display:NONE}),chart.container),chart.loadingSpan=createElement("span",null,loadingOptions.labelStyle,loadingDiv),addEvent(chart,"redraw",setLoadingSize)),chart.loadingSpan.innerHTML=str||options.lang.loading,chart.loadingShown||(css(loadingDiv,{opacity:0,display:""}),animate(loadingDiv,{opacity:loadingOptions.style.opacity},{duration:loadingOptions.showDuration||0}),chart.loadingShown=!0),setLoadingSize()},hideLoading:function(){var options=this.options,loadingDiv=this.loadingDiv;loadingDiv&&animate(loadingDiv,{opacity:0},{duration:options.loading.hideDuration||100,complete:function(){css(loadingDiv,{display:NONE})}}),this.loadingShown=!1}}),extend(Point.prototype,{update:function(options,redraw,animation,runEvent){function update(){point.applyOptions(options),isObject(options)&&!isArray(options)&&(point.redraw=function(){graphic&&(options&&options.marker&&options.marker.symbol?point.graphic=graphic.destroy():graphic.attr(point.pointAttr[point.state||""])),options&&options.dataLabels&&point.dataLabel&&(point.dataLabel=point.dataLabel.destroy()),point.redraw=null}),i=point.index,series.updateParallelArrays(point,i),names&&point.name&&(names[point.x]=point.name),seriesOptions.data[i]=point.options,series.isDirty=series.isDirtyData=!0,!series.fixedBox&&series.hasCartesianSeries&&(chart.isDirtyBox=!0),chart.legend.display&&"point"===seriesOptions.legendType&&(series.updateTotals(),chart.legend.clearItems()),redraw&&chart.redraw(animation)}var point=this,series=point.series,graphic=point.graphic,i,chart=series.chart,seriesOptions=series.options,names=series.xAxis&&series.xAxis.names;redraw=pick(redraw,!0),runEvent===!1?update():point.firePointEvent("update",{options:options},update)},remove:function(redraw,animation){this.series.removePoint(inArray(this,this.series.data),redraw,animation)}}),extend(Series.prototype,{addPoint:function(options,redraw,shift,animation){var series=this,seriesOptions=series.options,data=series.data,graph=series.graph,area=series.area,chart=series.chart,names=series.xAxis&&series.xAxis.names,currentShift=graph&&graph.shift||0,dataOptions=seriesOptions.data,point,isInTheMiddle,xData=series.xData,x,i;if(setAnimation(animation,chart),shift&&each([graph,area,series.graphNeg,series.areaNeg],function(shape){shape&&(shape.shift=currentShift+1)}),area&&(area.isArea=!0),redraw=pick(redraw,!0),point={series:series},series.pointClass.prototype.applyOptions.apply(point,[options]),x=point.x,i=xData.length,series.requireSorting&&xData[i-1]>x)for(isInTheMiddle=!0;i&&xData[i-1]>x;)i--;series.updateParallelArrays(point,"splice",i,0,0),series.updateParallelArrays(point,i),names&&point.name&&(names[x]=point.name),dataOptions.splice(i,0,options),isInTheMiddle&&(series.data.splice(i,0,null),series.processData()),"point"===seriesOptions.legendType&&series.generatePoints(),shift&&(data[0]&&data[0].remove?data[0].remove(!1):(data.shift(),series.updateParallelArrays(point,"shift"),dataOptions.shift())),series.isDirty=!0,series.isDirtyData=!0,redraw&&(series.getAttribs(),chart.redraw())},removePoint:function(i,redraw,animation){var series=this,data=series.data,point=data[i],points=series.points,chart=series.chart,remove=function(){data.length===points.length&&points.splice(i,1),data.splice(i,1),series.options.data.splice(i,1),series.updateParallelArrays(point||{series:series},"splice",i,1),point&&point.destroy(),series.isDirty=!0,series.isDirtyData=!0,redraw&&chart.redraw()};setAnimation(animation,chart),redraw=pick(redraw,!0),point?point.firePointEvent("remove",null,remove):remove()},remove:function(redraw,animation){var series=this,chart=series.chart;redraw=pick(redraw,!0),series.isRemoving||(series.isRemoving=!0,fireEvent(series,"remove",null,function(){series.destroy(),chart.isDirtyLegend=chart.isDirtyBox=!0,chart.linkSeries(),redraw&&chart.redraw(animation)})),series.isRemoving=!1},update:function(newOptions,redraw){var series=this,chart=this.chart,oldOptions=this.userOptions,oldType=this.type,proto=seriesTypes[oldType].prototype,preserve=["group","markerGroup","dataLabelsGroup"],n;(newOptions.type&&newOptions.type!==oldType||void 0!==newOptions.zIndex)&&(preserve.length=0),each(preserve,function(prop){preserve[prop]=series[prop],delete series[prop]}),newOptions=merge(oldOptions,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},newOptions),this.remove(!1);for(n in proto)this[n]=UNDEFINED;extend(this,seriesTypes[newOptions.type||oldType].prototype),each(preserve,function(prop){series[prop]=preserve[prop]}),this.init(chart,newOptions),chart.linkSeries(),pick(redraw,!0)&&chart.redraw(!1)}}),extend(Axis.prototype,{update:function(newOptions,redraw){var chart=this.chart;newOptions=chart.options[this.coll][this.options.index]=merge(this.userOptions,newOptions),this.destroy(!0),this._addedPlotLB=UNDEFINED,this.init(chart,extend(newOptions,{events:UNDEFINED})),chart.isDirtyBox=!0,pick(redraw,!0)&&chart.redraw()},remove:function(redraw){for(var chart=this.chart,key=this.coll,axisSeries=this.series,i=axisSeries.length;i--;)axisSeries[i]&&axisSeries[i].remove(!1);erase(chart.axes,this),erase(chart[key],this),chart.options[key].splice(this.options.index,1),each(chart[key],function(axis,i){axis.options.index=i}),this.destroy(),chart.isDirtyBox=!0,pick(redraw,!0)&&chart.redraw()},setTitle:function(newTitleOptions,redraw){this.update({title:newTitleOptions},redraw)},setCategories:function(categories,redraw){this.update({categories:categories},redraw)}});var LineSeries=extendClass(Series);seriesTypes.line=LineSeries,defaultPlotOptions.area=merge(defaultSeriesOptions,{threshold:0});var AreaSeries=extendClass(Series,{type:"area",getSegments:function(){var series=this,segments=[],segment=[],keys=[],xAxis=this.xAxis,yAxis=this.yAxis,stack=yAxis.stacks[this.stackKey],pointMap={},plotX,plotY,points=this.points,connectNulls=this.options.connectNulls,i,x;if(this.options.stacking&&!this.cropped){for(i=0;points.length>i;i++)pointMap[points[i].x]=points[i];for(x in stack)null!==stack[x].total&&keys.push(+x);keys.sort(function(a,b){return a-b}),each(keys,function(x){var y=0,stackPoint;if(!connectNulls||pointMap[x]&&null!==pointMap[x].y)if(pointMap[x])segment.push(pointMap[x]);else{for(i=series.index;yAxis.series.length>=i;i++)if(stackPoint=stack[x].points[i+","+x]){y=stackPoint[1];break}plotX=xAxis.translate(x),plotY=yAxis.toPixels(y,!0),segment.push({y:null,plotX:plotX,clientX:plotX,plotY:plotY,yBottom:plotY,onMouseOver:noop})}}),segment.length&&segments.push(segment)}else Series.prototype.getSegments.call(this),segments=this.segments;this.segments=segments},getSegmentPath:function(segment){var segmentPath=Series.prototype.getSegmentPath.call(this,segment),areaSegmentPath=[].concat(segmentPath),i,options=this.options,segLength=segmentPath.length,translatedThreshold=this.yAxis.getThreshold(options.threshold),yBottom;if(3===segLength&&areaSegmentPath.push(L,segmentPath[1],segmentPath[2]),options.stacking&&!this.closedStacks)for(i=segment.length-1;i>=0;i--)yBottom=pick(segment[i].yBottom,translatedThreshold),segment.length-1>i&&options.step&&areaSegmentPath.push(segment[i+1].plotX,yBottom),areaSegmentPath.push(segment[i].plotX,yBottom);else this.closeSegment(areaSegmentPath,segment,translatedThreshold);return this.areaPath=this.areaPath.concat(areaSegmentPath),segmentPath},closeSegment:function(path,segment,translatedThreshold){path.push(L,segment[segment.length-1].plotX,translatedThreshold,L,segment[0].plotX,translatedThreshold)},drawGraph:function(){this.areaPath=[],Series.prototype.drawGraph.apply(this);var series=this,areaPath=this.areaPath,options=this.options,zones=this.zones,props=[["area",this.color,options.fillColor]];each(zones,function(threshold,i){props.push(["colorArea"+i,threshold.color||series.color,threshold.fillColor||options.fillColor])}),each(props,function(prop){var areaKey=prop[0],area=series[areaKey];area?area.animate({d:areaPath}):series[areaKey]=series.chart.renderer.path(areaPath).attr({fill:pick(prop[2],Color(prop[1]).setOpacity(pick(options.fillOpacity,.75)).get()),zIndex:0}).add(series.group)})},drawLegendSymbol:LegendSymbolMixin.drawRectangle});seriesTypes.area=AreaSeries,defaultPlotOptions.spline=merge(defaultSeriesOptions);var SplineSeries=extendClass(Series,{type:"spline",getPointSpline:function(segment,point,i){var smoothing=1.5,denom=smoothing+1,plotX=point.plotX,plotY=point.plotY,lastPoint=segment[i-1],nextPoint=segment[i+1],leftContX,leftContY,rightContX,rightContY,ret;if(lastPoint&&nextPoint){var lastX=lastPoint.plotX,lastY=lastPoint.plotY,nextX=nextPoint.plotX,nextY=nextPoint.plotY,correction;leftContX=(smoothing*plotX+lastX)/denom,leftContY=(smoothing*plotY+lastY)/denom,rightContX=(smoothing*plotX+nextX)/denom,rightContY=(smoothing*plotY+nextY)/denom,correction=(rightContY-leftContY)*(rightContX-plotX)/(rightContX-leftContX)+plotY-rightContY,leftContY+=correction,rightContY+=correction,leftContY>lastY&&leftContY>plotY?(leftContY=mathMax(lastY,plotY),rightContY=2*plotY-leftContY):lastY>leftContY&&plotY>leftContY&&(leftContY=mathMin(lastY,plotY),rightContY=2*plotY-leftContY),rightContY>nextY&&rightContY>plotY?(rightContY=mathMax(nextY,plotY),leftContY=2*plotY-rightContY):nextY>rightContY&&plotY>rightContY&&(rightContY=mathMin(nextY,plotY),leftContY=2*plotY-rightContY),point.rightContX=rightContX,point.rightContY=rightContY}return i?(ret=["C",lastPoint.rightContX||lastPoint.plotX,lastPoint.rightContY||lastPoint.plotY,leftContX||plotX,leftContY||plotY,plotX,plotY],lastPoint.rightContX=lastPoint.rightContY=null):ret=[M,plotX,plotY],ret}});seriesTypes.spline=SplineSeries,defaultPlotOptions.areaspline=merge(defaultPlotOptions.area);var areaProto=AreaSeries.prototype,AreaSplineSeries=extendClass(SplineSeries,{type:"areaspline",closedStacks:!0,getSegmentPath:areaProto.getSegmentPath,closeSegment:areaProto.closeSegment,drawGraph:areaProto.drawGraph,drawLegendSymbol:LegendSymbolMixin.drawRectangle});seriesTypes.areaspline=AreaSplineSeries,defaultPlotOptions.column=merge(defaultSeriesOptions,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,tooltip:{distance:6},threshold:0});var ColumnSeries=extendClass(Series,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){Series.prototype.init.apply(this,arguments);var series=this,chart=series.chart;chart.hasRendered&&each(chart.series,function(otherSeries){otherSeries.type===series.type&&(otherSeries.isDirty=!0)})},getColumnMetrics:function(){var series=this,options=series.options,xAxis=series.xAxis,yAxis=series.yAxis,reversedXAxis=xAxis.reversed,stackKey,stackGroups={},columnIndex,columnCount=0;options.grouping===!1?columnCount=1:each(series.chart.series,function(otherSeries){var otherOptions=otherSeries.options,otherYAxis=otherSeries.yAxis;otherSeries.type===series.type&&otherSeries.visible&&yAxis.len===otherYAxis.len&&yAxis.pos===otherYAxis.pos&&(otherOptions.stacking?(stackKey=otherSeries.stackKey,stackGroups[stackKey]===UNDEFINED&&(stackGroups[stackKey]=columnCount++),columnIndex=stackGroups[stackKey]):otherOptions.grouping!==!1&&(columnIndex=columnCount++),otherSeries.columnIndex=columnIndex)});var categoryWidth=mathMin(mathAbs(xAxis.transA)*(xAxis.ordinalSlope||options.pointRange||xAxis.closestPointRange||xAxis.tickInterval||1),xAxis.len),groupPadding=categoryWidth*options.groupPadding,groupWidth=categoryWidth-2*groupPadding,pointOffsetWidth=groupWidth/columnCount,optionPointWidth=options.pointWidth,pointPadding=defined(optionPointWidth)?(pointOffsetWidth-optionPointWidth)/2:pointOffsetWidth*options.pointPadding,pointWidth=pick(optionPointWidth,pointOffsetWidth-2*pointPadding),colIndex=(reversedXAxis?columnCount-(series.columnIndex||0):series.columnIndex)||0,pointXOffset=pointPadding+(groupPadding+colIndex*pointOffsetWidth-categoryWidth/2)*(reversedXAxis?-1:1);return series.columnMetrics={width:pointWidth,offset:pointXOffset}},translate:function(){var series=this,chart=series.chart,options=series.options,borderWidth=series.borderWidth=pick(options.borderWidth,2>series.closestPointRange*series.xAxis.transA?0:1),yAxis=series.yAxis,threshold=options.threshold,translatedThreshold=series.translatedThreshold=yAxis.getThreshold(threshold),minPointLength=pick(options.minPointLength,5),metrics=series.getColumnMetrics(),pointWidth=metrics.width,seriesBarW=series.barW=mathMax(pointWidth,1+2*borderWidth),pointXOffset=series.pointXOffset=metrics.offset,xCrisp=-(borderWidth%2?.5:0),yCrisp=borderWidth%2?.5:1;
chart.renderer.isVML&&chart.inverted&&(yCrisp+=1),options.pointPadding&&(seriesBarW=mathCeil(seriesBarW)),Series.prototype.translate.apply(series),each(series.points,function(point){var yBottom=pick(point.yBottom,translatedThreshold),plotY=mathMin(mathMax(-999-yBottom,point.plotY),yAxis.len+999+yBottom),barX=point.plotX+pointXOffset,barW=seriesBarW,barY=mathMin(plotY,yBottom),right,bottom,fromTop,barH=mathMax(plotY,yBottom)-barY;minPointLength>mathAbs(barH)&&minPointLength&&(barH=minPointLength,barY=mathRound(mathAbs(barY-translatedThreshold)>minPointLength?yBottom-minPointLength:translatedThreshold-(translatedThreshold>=yAxis.translate(point.y,0,1,0,1)?minPointLength:0))),point.barX=barX,point.pointWidth=pointWidth,point.tooltipPos=chart.inverted?[yAxis.len+yAxis.pos-chart.plotLeft-plotY,series.xAxis.len-barX-barW/2]:[barX+barW/2,plotY+yAxis.pos-chart.plotTop],right=mathRound(barX+barW)+xCrisp,barX=mathRound(barX)+xCrisp,barW=right-barX,fromTop=.5>mathAbs(barY),bottom=mathMin(mathRound(barY+barH)+yCrisp,9e4),barY=mathRound(barY)+yCrisp,barH=bottom-barY,fromTop&&(barY-=1,barH+=1),point.shapeType="rect",point.shapeArgs={x:barX,y:barY,width:barW,height:barH}})},getSymbol:noop,drawLegendSymbol:LegendSymbolMixin.drawRectangle,drawGraph:noop,drawPoints:function(){var series=this,chart=this.chart,options=series.options,renderer=chart.renderer,animationLimit=options.animationLimit||250,shapeArgs,pointAttr;each(series.points,function(point){var plotY=point.plotY,graphic=point.graphic,borderAttr;plotY===UNDEFINED||isNaN(plotY)||null===point.y?graphic&&(point.graphic=graphic.destroy()):(shapeArgs=point.shapeArgs,borderAttr=defined(series.borderWidth)?{"stroke-width":series.borderWidth}:{},pointAttr=point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE]||series.pointAttr[NORMAL_STATE],graphic?(stop(graphic),graphic.attr(borderAttr)[animationLimit>chart.pointCount?"animate":"attr"](merge(shapeArgs))):point.graphic=graphic=renderer[point.shapeType](shapeArgs).attr(borderAttr).attr(pointAttr).add(series.group).shadow(options.shadow,null,options.stacking&&!options.borderRadius))})},animate:function(init){var series=this,yAxis=this.yAxis,options=series.options,inverted=this.chart.inverted,attr={},translatedThreshold;hasSVG&&(init?(attr.scaleY=.001,translatedThreshold=mathMin(yAxis.pos+yAxis.len,mathMax(yAxis.pos,yAxis.toPixels(options.threshold))),inverted?attr.translateX=translatedThreshold-yAxis.len:attr.translateY=translatedThreshold,series.group.attr(attr)):(attr.scaleY=1,attr[inverted?"translateX":"translateY"]=yAxis.pos,series.group.animate(attr,series.options.animation),series.animate=null))},remove:function(){var series=this,chart=series.chart;chart.hasRendered&&each(chart.series,function(otherSeries){otherSeries.type===series.type&&(otherSeries.isDirty=!0)}),Series.prototype.remove.apply(series,arguments)}});seriesTypes.column=ColumnSeries,defaultPlotOptions.bar=merge(defaultPlotOptions.column);var BarSeries=extendClass(ColumnSeries,{type:"bar",inverted:!0});seriesTypes.bar=BarSeries,defaultPlotOptions.scatter=merge(defaultSeriesOptions,{lineWidth:0,marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{series.color}"></span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}});var ScatterSeries=extendClass(Series,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,kdDimensions:2,kdComparer:"distR",drawGraph:function(){this.options.lineWidth&&Series.prototype.drawGraph.call(this)}});seriesTypes.scatter=ScatterSeries,defaultPlotOptions.pie=merge(defaultSeriesOptions,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var PiePoint=extendClass(Point,{init:function(){Point.prototype.init.apply(this,arguments);var point=this,toggleSlice;return extend(point,{visible:point.visible!==!1,name:pick(point.name,"Slice")}),toggleSlice=function(e){point.slice("select"===e.type)},addEvent(point,"select",toggleSlice),addEvent(point,"unselect",toggleSlice),point},setVisible:function(vis){var point=this,series=point.series,chart=series.chart,doRedraw=!series.isDirty&&series.options.ignoreHiddenPoint;point.visible=point.options.visible=vis=vis===UNDEFINED?!point.visible:vis,series.options.data[inArray(point,series.data)]=point.options,each(["graphic","dataLabel","connector","shadowGroup"],function(key){point[key]&&point[key][vis?"show":"hide"](!0)}),point.legendItem&&(chart.hasRendered&&(series.updateTotals(),chart.legend.clearItems(),doRedraw||chart.legend.render()),chart.legend.colorizeItem(point,vis)),doRedraw&&(series.isDirty=!0,chart.redraw())},slice:function(sliced,redraw,animation){var point=this,series=point.series,chart=series.chart,translation;setAnimation(animation,chart),redraw=pick(redraw,!0),point.sliced=point.options.sliced=sliced=defined(sliced)?sliced:!point.sliced,series.options.data[inArray(point,series.data)]=point.options,translation=sliced?point.slicedTranslation:{translateX:0,translateY:0},point.graphic.animate(translation),point.shadowGroup&&point.shadowGroup.animate(translation)},haloPath:function(size){var shapeArgs=this.shapeArgs,chart=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(chart.plotLeft+shapeArgs.x,chart.plotTop+shapeArgs.y,shapeArgs.r+size,shapeArgs.r+size,{innerR:this.shapeArgs.r,start:shapeArgs.start,end:shapeArgs.end})}}),PieSeries={type:"pie",isCartesian:!1,pointClass:PiePoint,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:noop,animate:function(init){var series=this,points=series.points,startAngleRad=series.startAngleRad;init||(each(points,function(point){var graphic=point.graphic,args=point.shapeArgs;graphic&&(graphic.attr({r:series.center[3]/2,start:startAngleRad,end:startAngleRad}),graphic.animate({r:args.r,start:args.start,end:args.end},series.options.animation))}),series.animate=null)},setData:function(data,redraw,animation,updatePoints){Series.prototype.setData.call(this,data,!1,animation,updatePoints),this.processData(),this.generatePoints(),pick(redraw,!0)&&this.chart.redraw(animation)},updateTotals:function(){var i,total=0,points,len,point,ignoreHiddenPoint=this.options.ignoreHiddenPoint;for(points=this.points,len=points.length,i=0;len>i;i++)point=points[i],0>point.y&&(point.y=null),total+=ignoreHiddenPoint&&!point.visible?0:point.y;for(this.total=total,i=0;len>i;i++)point=points[i],point.percentage=total>0&&(point.visible||!ignoreHiddenPoint)?100*(point.y/total):0,point.total=total},generatePoints:function(){Series.prototype.generatePoints.call(this),this.updateTotals()},translate:function(positions){this.generatePoints();var series=this,cumulative=0,precision=1e3,options=series.options,slicedOffset=options.slicedOffset,connectorOffset=slicedOffset+options.borderWidth,start,end,angle,startAngle=options.startAngle||0,startAngleRad=series.startAngleRad=mathPI/180*(startAngle-90),endAngleRad=series.endAngleRad=mathPI/180*(pick(options.endAngle,startAngle+360)-90),circ=endAngleRad-startAngleRad,points=series.points,radiusX,radiusY,labelDistance=options.dataLabels.distance,ignoreHiddenPoint=options.ignoreHiddenPoint,i,len=points.length,point;for(positions||(series.center=positions=series.getCenter()),series.getX=function(y,left){return angle=math.asin(mathMin((y-positions[1])/(positions[2]/2+labelDistance),1)),positions[0]+(left?-1:1)*mathCos(angle)*(positions[2]/2+labelDistance)},i=0;len>i;i++)point=points[i],start=startAngleRad+cumulative*circ,(!ignoreHiddenPoint||point.visible)&&(cumulative+=point.percentage/100),end=startAngleRad+cumulative*circ,point.shapeType="arc",point.shapeArgs={x:positions[0],y:positions[1],r:positions[2]/2,innerR:positions[3]/2,start:mathRound(start*precision)/precision,end:mathRound(end*precision)/precision},angle=(end+start)/2,angle>1.5*mathPI?angle-=2*mathPI:-mathPI/2>angle&&(angle+=2*mathPI),point.slicedTranslation={translateX:mathRound(mathCos(angle)*slicedOffset),translateY:mathRound(mathSin(angle)*slicedOffset)},radiusX=mathCos(angle)*positions[2]/2,radiusY=mathSin(angle)*positions[2]/2,point.tooltipPos=[positions[0]+.7*radiusX,positions[1]+.7*radiusY],point.half=-mathPI/2>angle||angle>mathPI/2?1:0,point.angle=angle,connectorOffset=mathMin(connectorOffset,labelDistance/2),point.labelPos=[positions[0]+radiusX+mathCos(angle)*labelDistance,positions[1]+radiusY+mathSin(angle)*labelDistance,positions[0]+radiusX+mathCos(angle)*connectorOffset,positions[1]+radiusY+mathSin(angle)*connectorOffset,positions[0]+radiusX,positions[1]+radiusY,0>labelDistance?"center":point.half?"right":"left",angle]},drawGraph:null,drawPoints:function(){var series=this,chart=series.chart,renderer=chart.renderer,groupTranslation,graphic,shadow=series.options.shadow,shadowGroup,shapeArgs;shadow&&!series.shadowGroup&&(series.shadowGroup=renderer.g("shadow").add(series.group)),each(series.points,function(point){graphic=point.graphic,shapeArgs=point.shapeArgs,shadowGroup=point.shadowGroup,shadow&&!shadowGroup&&(shadowGroup=point.shadowGroup=renderer.g("shadow").add(series.shadowGroup)),groupTranslation=point.sliced?point.slicedTranslation:{translateX:0,translateY:0},shadowGroup&&shadowGroup.attr(groupTranslation),graphic?graphic.animate(extend(shapeArgs,groupTranslation)):point.graphic=graphic=renderer[point.shapeType](shapeArgs).setRadialReference(series.center).attr(point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE]).attr({"stroke-linejoin":"round"}).attr(groupTranslation).add(series.group).shadow(shadow,shadowGroup),void 0!==point.visible&&point.setVisible(point.visible)})},searchPoint:noop,sortByAngle:function(points,sign){points.sort(function(a,b){return void 0!==a.angle&&(b.angle-a.angle)*sign})},drawLegendSymbol:LegendSymbolMixin.drawRectangle,getCenter:CenteredSeriesMixin.getCenter,getSymbol:noop};PieSeries=extendClass(Series,PieSeries),seriesTypes.pie=PieSeries,Series.prototype.drawDataLabels=function(){var series=this,seriesOptions=series.options,cursor=seriesOptions.cursor,options=seriesOptions.dataLabels,points=series.points,pointOptions,generalOptions,hasRendered=series.hasRendered||0,str,dataLabelsGroup,renderer=series.chart.renderer;(options.enabled||series._hasPointLabels)&&(series.dlProcessOptions&&series.dlProcessOptions(options),dataLabelsGroup=series.plotGroup("dataLabelsGroup","data-labels",options.defer?HIDDEN:VISIBLE,options.zIndex||6),pick(options.defer,!0)&&(dataLabelsGroup.attr({opacity:+hasRendered}),hasRendered||addEvent(series,"afterAnimate",function(){series.visible&&dataLabelsGroup.show(),dataLabelsGroup[seriesOptions.animation?"animate":"attr"]({opacity:1},{duration:200})})),generalOptions=options,each(points,function(point){var enabled,dataLabel=point.dataLabel,labelConfig,attr,name,rotation,connector=point.connector,isNew=!0,style,moreStyle={};if(pointOptions=point.dlOptions||point.options&&point.options.dataLabels,enabled=pick(pointOptions&&pointOptions.enabled,generalOptions.enabled),dataLabel&&!enabled)point.dataLabel=dataLabel.destroy();else if(enabled){if(options=merge(generalOptions,pointOptions),style=options.style,rotation=options.rotation,labelConfig=point.getLabelConfig(),str=options.format?format(options.format,labelConfig):options.formatter.call(labelConfig,options),style.color=pick(options.color,style.color,series.color,"black"),dataLabel)defined(str)?(dataLabel.attr({text:str}),isNew=!1):(point.dataLabel=dataLabel=dataLabel.destroy(),connector&&(point.connector=connector.destroy()));else if(defined(str)){attr={fill:options.backgroundColor,stroke:options.borderColor,"stroke-width":options.borderWidth,r:options.borderRadius||0,rotation:rotation,padding:options.padding,zIndex:1},"contrast"===style.color&&(moreStyle.color=options.inside||0>options.distance||seriesOptions.stacking?renderer.getContrast(point.color||series.color):"#000000"),cursor&&(moreStyle.cursor=cursor);for(name in attr)attr[name]===UNDEFINED&&delete attr[name];dataLabel=point.dataLabel=renderer[rotation?"text":"label"](str,0,-999,options.shape,null,null,options.useHTML).attr(attr).css(extend(style,moreStyle)).add(dataLabelsGroup).shadow(options.shadow)}dataLabel&&series.alignDataLabel(point,dataLabel,options,null,isNew)}}))},Series.prototype.alignDataLabel=function(point,dataLabel,options,alignTo,isNew){var chart=this.chart,inverted=chart.inverted,plotX=pick(point.plotX,-999),plotY=pick(point.plotY,-999),bBox=dataLabel.getBBox(),baseline=chart.renderer.fontMetrics(options.style.fontSize).b,rotCorr,visible=this.visible&&(point.series.forceDL||chart.isInsidePlot(plotX,mathRound(plotY),inverted)||alignTo&&chart.isInsidePlot(plotX,inverted?alignTo.x+1:alignTo.y+alignTo.height-1,inverted)),alignAttr;visible&&(alignTo=extend({x:inverted?chart.plotWidth-plotY:plotX,y:mathRound(inverted?chart.plotHeight-plotX:plotY),width:0,height:0},alignTo),extend(options,{width:bBox.width,height:bBox.height}),options.rotation?(rotCorr=chart.renderer.rotCorr(baseline,options.rotation),dataLabel[isNew?"attr":"animate"]({x:alignTo.x+options.x+alignTo.width/2+rotCorr.x,y:alignTo.y+options.y+alignTo.height/2}).attr({align:options.align})):(dataLabel.align(options,null,alignTo),alignAttr=dataLabel.alignAttr,"justify"===pick(options.overflow,"justify")?this.justifyDataLabel(dataLabel,options,alignAttr,bBox,alignTo,isNew):pick(options.crop,!0)&&(visible=chart.isInsidePlot(alignAttr.x,alignAttr.y)&&chart.isInsidePlot(alignAttr.x+bBox.width,alignAttr.y+bBox.height)),options.shape&&dataLabel.attr({anchorX:point.plotX,anchorY:point.plotY}))),visible||(dataLabel.attr({y:-999}),dataLabel.placed=!1)},Series.prototype.justifyDataLabel=function(dataLabel,options,alignAttr,bBox,alignTo,isNew){var chart=this.chart,align=options.align,verticalAlign=options.verticalAlign,off,justified,padding=dataLabel.box?0:dataLabel.padding||0;off=alignAttr.x+padding,0>off&&("right"===align?options.align="left":options.x=-off,justified=!0),off=alignAttr.x+bBox.width-padding,off>chart.plotWidth&&("left"===align?options.align="right":options.x=chart.plotWidth-off,justified=!0),off=alignAttr.y+padding,0>off&&("bottom"===verticalAlign?options.verticalAlign="top":options.y=-off,justified=!0),off=alignAttr.y+bBox.height-padding,off>chart.plotHeight&&("top"===verticalAlign?options.verticalAlign="bottom":options.y=chart.plotHeight-off,justified=!0),justified&&(dataLabel.placed=!isNew,dataLabel.align(options,null,alignTo))},seriesTypes.pie&&(seriesTypes.pie.prototype.drawDataLabels=function(){var series=this,data=series.data,point,chart=series.chart,options=series.options.dataLabels,connectorPadding=pick(options.connectorPadding,10),connectorWidth=pick(options.connectorWidth,1),plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,connector,connectorPath,softConnector=pick(options.softConnector,!0),distanceOption=options.distance,seriesCenter=series.center,radius=seriesCenter[2]/2,centerY=seriesCenter[1],outside=distanceOption>0,dataLabel,dataLabelWidth,labelPos,labelHeight,halves=[[],[]],x,y,visibility,rankArr,i,j,overflow=[0,0,0,0],sort=function(a,b){return b.y-a.y};if(series.visible&&(options.enabled||series._hasPointLabels)){for(Series.prototype.drawDataLabels.apply(series),each(data,function(point){point.dataLabel&&point.visible&&halves[point.half].push(point)}),i=2;i--;){var slots=[],slotsLength,usedSlots=[],points=halves[i],pos,bottom,length=points.length,slotIndex;if(length){for(series.sortByAngle(points,i-.5),j=labelHeight=0;!labelHeight&&points[j];)labelHeight=points[j]&&points[j].dataLabel&&(points[j].dataLabel.getBBox().height||21),j++;if(distanceOption>0){for(bottom=mathMin(centerY+radius+distanceOption,chart.plotHeight),pos=mathMax(0,centerY-radius-distanceOption);bottom>=pos;pos+=labelHeight)slots.push(pos);if(slotsLength=slots.length,length>slotsLength){for(rankArr=[].concat(points),rankArr.sort(sort),j=length;j--;)rankArr[j].rank=j;for(j=length;j--;)points[j].rank>=slotsLength&&points.splice(j,1);length=points.length}for(j=0;length>j;j++){point=points[j],labelPos=point.labelPos;var closest=9999,distance,slotI;for(slotI=0;slotsLength>slotI;slotI++)distance=mathAbs(slots[slotI]-labelPos[1]),closest>distance&&(closest=distance,slotIndex=slotI);if(j>slotIndex&&null!==slots[j])slotIndex=j;else if(length-j+slotIndex>slotsLength&&null!==slots[j])for(slotIndex=slotsLength-length+j;null===slots[slotIndex];)slotIndex++;else for(;null===slots[slotIndex];)slotIndex++;usedSlots.push({i:slotIndex,y:slots[slotIndex]}),slots[slotIndex]=null}usedSlots.sort(sort)}for(j=0;length>j;j++){var slot,naturalY;point=points[j],labelPos=point.labelPos,dataLabel=point.dataLabel,visibility=point.visible===!1?HIDDEN:VISIBLE,naturalY=labelPos[1],distanceOption>0?(slot=usedSlots.pop(),slotIndex=slot.i,y=slot.y,(naturalY>y&&null!==slots[slotIndex+1]||y>naturalY&&null!==slots[slotIndex-1])&&(y=mathMin(mathMax(0,naturalY),chart.plotHeight))):y=naturalY,x=options.justify?seriesCenter[0]+(i?-1:1)*(radius+distanceOption):series.getX(y===centerY-radius-distanceOption||y===centerY+radius+distanceOption?naturalY:y,i),dataLabel._attr={visibility:visibility,align:labelPos[6]},dataLabel._pos={x:x+options.x+({left:connectorPadding,right:-connectorPadding}[labelPos[6]]||0),y:y+options.y-10},dataLabel.connX=x,dataLabel.connY=y,null===this.options.size&&(dataLabelWidth=dataLabel.width,connectorPadding>x-dataLabelWidth?overflow[3]=mathMax(mathRound(dataLabelWidth-x+connectorPadding),overflow[3]):x+dataLabelWidth>plotWidth-connectorPadding&&(overflow[1]=mathMax(mathRound(x+dataLabelWidth-plotWidth+connectorPadding),overflow[1])),0>y-labelHeight/2?overflow[0]=mathMax(mathRound(-y+labelHeight/2),overflow[0]):y+labelHeight/2>plotHeight&&(overflow[2]=mathMax(mathRound(y+labelHeight/2-plotHeight),overflow[2])))}}}(0===arrayMax(overflow)||this.verifyDataLabelOverflow(overflow))&&(this.placeDataLabels(),outside&&connectorWidth&&each(this.points,function(point){connector=point.connector,labelPos=point.labelPos,dataLabel=point.dataLabel,dataLabel&&dataLabel._pos?(visibility=dataLabel._attr.visibility,x=dataLabel.connX,y=dataLabel.connY,connectorPath=softConnector?[M,x+("left"===labelPos[6]?5:-5),y,"C",x,y,2*labelPos[2]-labelPos[4],2*labelPos[3]-labelPos[5],labelPos[2],labelPos[3],L,labelPos[4],labelPos[5]]:[M,x+("left"===labelPos[6]?5:-5),y,L,labelPos[2],labelPos[3],L,labelPos[4],labelPos[5]],connector?(connector.animate({d:connectorPath}),connector.attr("visibility",visibility)):point.connector=connector=series.chart.renderer.path(connectorPath).attr({"stroke-width":connectorWidth,stroke:options.connectorColor||point.color||"#606060",visibility:visibility}).add(series.dataLabelsGroup)):connector&&(point.connector=connector.destroy())}))}},seriesTypes.pie.prototype.placeDataLabels=function(){each(this.points,function(point){var dataLabel=point.dataLabel,_pos;dataLabel&&(_pos=dataLabel._pos,_pos?(dataLabel.attr(dataLabel._attr),dataLabel[dataLabel.moved?"animate":"attr"](_pos),dataLabel.moved=!0):dataLabel&&dataLabel.attr({y:-999}))})},seriesTypes.pie.prototype.alignDataLabel=noop,seriesTypes.pie.prototype.verifyDataLabelOverflow=function(overflow){var center=this.center,options=this.options,centerOption=options.center,minSize=options.minSize||80,newSize=minSize,ret;return null!==centerOption[0]?newSize=mathMax(center[2]-mathMax(overflow[1],overflow[3]),minSize):(newSize=mathMax(center[2]-overflow[1]-overflow[3],minSize),center[0]+=(overflow[3]-overflow[1])/2),null!==centerOption[1]?newSize=mathMax(mathMin(newSize,center[2]-mathMax(overflow[0],overflow[2])),minSize):(newSize=mathMax(mathMin(newSize,center[2]-overflow[0]-overflow[2]),minSize),center[1]+=(overflow[0]-overflow[2])/2),center[2]>newSize?(center[2]=newSize,this.translate(center),each(this.points,function(point){point.dataLabel&&(point.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):ret=!0,ret}),seriesTypes.column&&(seriesTypes.column.prototype.alignDataLabel=function(point,dataLabel,options,alignTo,isNew){var inverted=this.chart.inverted,series=point.series,dlBox=point.dlBox||point.shapeArgs,below=point.below||point.plotY>pick(this.translatedThreshold,series.yAxis.len),inside=pick(options.inside,!!this.options.stacking);dlBox&&(alignTo=merge(dlBox),inverted&&(alignTo={x:series.yAxis.len-alignTo.y-alignTo.height,y:series.xAxis.len-alignTo.x-alignTo.width,width:alignTo.height,height:alignTo.width}),inside||(inverted?(alignTo.x+=below?0:alignTo.width,alignTo.width=0):(alignTo.y+=below?alignTo.height:0,alignTo.height=0))),options.align=pick(options.align,!inverted||inside?"center":below?"right":"left"),options.verticalAlign=pick(options.verticalAlign,inverted||inside?"middle":below?"top":"bottom"),Series.prototype.alignDataLabel.call(this,point,dataLabel,options,alignTo,isNew)}),function(H){var Chart=H.Chart,each=H.each,addEvent=HighchartsAdapter.addEvent;Chart.prototype.callbacks.push(function(chart){function collectAndHide(){var labels=[];each(chart.series,function(series){var dlOptions=series.options.dataLabels;(dlOptions.enabled||series._hasPointLabels)&&!dlOptions.allowOverlap&&series.visible&&each(series.points,function(point){point.dataLabel&&(point.dataLabel.labelrank=point.labelrank,labels.push(point.dataLabel))})}),chart.hideOverlappingLabels(labels)}collectAndHide(),addEvent(chart,"redraw",collectAndHide)}),Chart.prototype.hideOverlappingLabels=function(labels){var len=labels.length,label,i,j,label1,label2,intersectRect=function(pos1,pos2,size1,size2){return!(pos2.x>pos1.x+size1.width||pos2.x+size2.width<pos1.x||pos2.y>pos1.y+size1.height||pos2.y+size2.height<pos1.y)};for(i=0;len>i;i++)label=labels[i],label&&(label.oldOpacity=label.opacity,label.newOpacity=1);for(i=0;len>i;i++)for(label1=labels[i],j=i+1;len>j;++j)label2=labels[j],label1&&label2&&label1.placed&&label2.placed&&0!==label1.newOpacity&&0!==label2.newOpacity&&intersectRect(label1.alignAttr,label2.alignAttr,label1,label2)&&((label1.labelrank<label2.labelrank?label1:label2).newOpacity=0);for(i=0;len>i;i++)label=labels[i],label&&(label.oldOpacity!==label.newOpacity&&label.placed&&(label.alignAttr.opacity=label.newOpacity,label[label.isOld&&label.newOpacity?"animate":"attr"](label.alignAttr)),label.isOld=!0)}}(Highcharts);var TrackerMixin=Highcharts.TrackerMixin={drawTrackerPoint:function(){var series=this,chart=series.chart,pointer=chart.pointer,cursor=series.options.cursor,css=cursor&&{cursor:cursor},onMouseOver=function(e){for(var target=e.target,point;target&&!point;)point=target.point,target=target.parentNode;point!==UNDEFINED&&point!==chart.hoverPoint&&point.onMouseOver(e)};each(series.points,function(point){point.graphic&&(point.graphic.element.point=point),point.dataLabel&&(point.dataLabel.element.point=point)}),series._hasTracking||(each(series.trackerGroups,function(key){series[key]&&(series[key].addClass(PREFIX+"tracker").on("mouseover",onMouseOver).on("mouseout",function(e){pointer.onTrackerMouseOut(e)}).css(css),hasTouch&&series[key].on("touchstart",onMouseOver))}),series._hasTracking=!0)},drawTrackerGraph:function(){var series=this,options=series.options,trackByArea=options.trackByArea,trackerPath=[].concat(trackByArea?series.areaPath:series.graphPath),trackerPathLength=trackerPath.length,chart=series.chart,pointer=chart.pointer,renderer=chart.renderer,snap=chart.options.tooltip.snap,tracker=series.tracker,cursor=options.cursor,css=cursor&&{cursor:cursor},singlePoints=series.singlePoints,singlePoint,i,onMouseOver=function(){chart.hoverSeries!==series&&series.onMouseOver()},TRACKER_FILL="rgba(192,192,192,"+(hasSVG?1e-4:.002)+")";if(trackerPathLength&&!trackByArea)for(i=trackerPathLength+1;i--;)trackerPath[i]===M&&trackerPath.splice(i+1,0,trackerPath[i+1]-snap,trackerPath[i+2],L),(i&&trackerPath[i]===M||i===trackerPathLength)&&trackerPath.splice(i,0,L,trackerPath[i-2]+snap,trackerPath[i-1]);for(i=0;singlePoints.length>i;i++)singlePoint=singlePoints[i],trackerPath.push(M,singlePoint.plotX-snap,singlePoint.plotY,L,singlePoint.plotX+snap,singlePoint.plotY);tracker?tracker.attr({d:trackerPath}):(series.tracker=renderer.path(trackerPath).attr({"stroke-linejoin":"round",visibility:series.visible?VISIBLE:HIDDEN,stroke:TRACKER_FILL,fill:trackByArea?TRACKER_FILL:NONE,"stroke-width":options.lineWidth+(trackByArea?0:2*snap),zIndex:2}).add(series.group),each([series.tracker,series.markerGroup],function(tracker){tracker.addClass(PREFIX+"tracker").on("mouseover",onMouseOver).on("mouseout",function(e){pointer.onTrackerMouseOut(e)}).css(css),hasTouch&&tracker.on("touchstart",onMouseOver)}))}};seriesTypes.column&&(ColumnSeries.prototype.drawTracker=TrackerMixin.drawTrackerPoint),seriesTypes.pie&&(seriesTypes.pie.prototype.drawTracker=TrackerMixin.drawTrackerPoint),seriesTypes.scatter&&(ScatterSeries.prototype.drawTracker=TrackerMixin.drawTrackerPoint),extend(Legend.prototype,{setItemEvents:function(item,legendItem,useHTML,itemStyle,itemHiddenStyle){var legend=this;(useHTML?legendItem:item.legendGroup).on("mouseover",function(){item.setState(HOVER_STATE),legendItem.css(legend.options.itemHoverStyle)}).on("mouseout",function(){legendItem.css(item.visible?itemStyle:itemHiddenStyle),item.setState()}).on("click",function(event){var strLegendItemClick="legendItemClick",fnLegendItemClick=function(){item.setVisible()};event={browserEvent:event},item.firePointEvent?item.firePointEvent(strLegendItemClick,event,fnLegendItemClick):fireEvent(item,strLegendItemClick,event,fnLegendItemClick)})},createCheckboxForItem:function(item){var legend=this;item.checkbox=createElement("input",{type:"checkbox",checked:item.selected,defaultChecked:item.selected},legend.options.itemCheckboxStyle,legend.chart.container),addEvent(item.checkbox,"click",function(event){var target=event.target;fireEvent(item.series||item,"checkboxClick",{checked:target.checked,item:item},function(){item.select()})})}}),defaultOptions.legend.itemStyle.cursor="pointer",extend(Chart.prototype,{showResetZoom:function(){var chart=this,lang=defaultOptions.lang,btnOptions=chart.options.chart.resetZoomButton,theme=btnOptions.theme,states=theme.states,alignTo="chart"===btnOptions.relativeTo?null:"plotBox";this.resetZoomButton=chart.renderer.button(lang.resetZoom,null,null,function(){chart.zoomOut()},theme,states&&states.hover).attr({align:btnOptions.position.align,title:lang.resetZoomTitle}).add().align(btnOptions.position,!1,alignTo)},zoomOut:function(){var chart=this;fireEvent(chart,"selection",{resetSelection:!0},function(){chart.zoom()})},zoom:function(event){var chart=this,hasZoomed,pointer=chart.pointer,displayButton=!1,resetZoomButton;!event||event.resetSelection?each(chart.axes,function(axis){hasZoomed=axis.zoom()}):each(event.xAxis.concat(event.yAxis),function(axisData){var axis=axisData.axis,isXAxis=axis.isXAxis;(pointer[isXAxis?"zoomX":"zoomY"]||pointer[isXAxis?"pinchX":"pinchY"])&&(hasZoomed=axis.zoom(axisData.min,axisData.max),axis.displayBtn&&(displayButton=!0))}),resetZoomButton=chart.resetZoomButton,displayButton&&!resetZoomButton?chart.showResetZoom():!displayButton&&isObject(resetZoomButton)&&(chart.resetZoomButton=resetZoomButton.destroy()),hasZoomed&&chart.redraw(pick(chart.options.chart.animation,event&&event.animation,100>chart.pointCount))},pan:function(e,panning){var chart=this,hoverPoints=chart.hoverPoints,doRedraw;hoverPoints&&each(hoverPoints,function(point){point.setState()}),each("xy"===panning?[1,0]:[1],function(isX){var mousePos=e[isX?"chartX":"chartY"],axis=chart[isX?"xAxis":"yAxis"][0],startPos=chart[isX?"mouseDownX":"mouseDownY"],halfPointRange=(axis.pointRange||0)/2,extremes=axis.getExtremes(),newMin=axis.toValue(startPos-mousePos,!0)+halfPointRange,newMax=axis.toValue(startPos+chart[isX?"plotWidth":"plotHeight"]-mousePos,!0)-halfPointRange,goingLeft=startPos>mousePos;axis.series.length&&(goingLeft||newMin>mathMin(extremes.dataMin,extremes.min))&&(!goingLeft||mathMax(extremes.dataMax,extremes.max)>newMax)&&(axis.setExtremes(newMin,newMax,!1,!1,{trigger:"pan"}),doRedraw=!0),chart[isX?"mouseDownX":"mouseDownY"]=mousePos}),doRedraw&&chart.redraw(!1),css(chart.container,{cursor:"move"})}}),extend(Point.prototype,{select:function(selected,accumulate){var point=this,series=point.series,chart=series.chart;selected=pick(selected,!point.selected),point.firePointEvent(selected?"select":"unselect",{accumulate:accumulate},function(){point.selected=point.options.selected=selected,series.options.data[inArray(point,series.data)]=point.options,point.setState(selected&&SELECT_STATE),accumulate||each(chart.getSelectedPoints(),function(loopPoint){loopPoint.selected&&loopPoint!==point&&(loopPoint.selected=loopPoint.options.selected=!1,series.options.data[inArray(loopPoint,series.data)]=loopPoint.options,loopPoint.setState(NORMAL_STATE),loopPoint.firePointEvent("unselect"))})})},onMouseOver:function(e){var point=this,series=point.series,chart=series.chart,tooltip=chart.tooltip,hoverPoint=chart.hoverPoint;chart.hoverSeries!==series&&series.onMouseOver(),hoverPoint&&hoverPoint!==point&&hoverPoint.onMouseOut(),point.firePointEvent("mouseOver"),!tooltip||tooltip.shared&&!series.noSharedTooltip||tooltip.refresh(point,e),point.setState(HOVER_STATE),chart.hoverPoint=point},onMouseOut:function(){var chart=this.series.chart,hoverPoints=chart.hoverPoints;this.firePointEvent("mouseOut"),hoverPoints&&-1!==inArray(this,hoverPoints)||(this.setState(),chart.hoverPoint=null)},importEvents:function(){if(!this.hasImportedEvents){var point=this,options=merge(point.series.options.point,point.options),events=options.events,eventType;point.events=events;for(eventType in events)addEvent(point,eventType,events[eventType]);this.hasImportedEvents=!0}},setState:function(state,move){var point=this,plotX=point.plotX,plotY=point.plotY,series=point.series,stateOptions=series.options.states,markerOptions=defaultPlotOptions[series.type].marker&&series.options.marker,normalDisabled=markerOptions&&!markerOptions.enabled,markerStateOptions=markerOptions&&markerOptions.states[state],stateDisabled=markerStateOptions&&markerStateOptions.enabled===!1,stateMarkerGraphic=series.stateMarkerGraphic,pointMarker=point.marker||{},chart=series.chart,radius,halo=series.halo,haloOptions,newSymbol,pointAttr;state=state||NORMAL_STATE,pointAttr=point.pointAttr[state]||series.pointAttr[state],state===point.state&&!move||point.selected&&state!==SELECT_STATE||stateOptions[state]&&stateOptions[state].enabled===!1||state&&(stateDisabled||normalDisabled&&markerStateOptions.enabled===!1)||state&&pointMarker.states&&pointMarker.states[state]&&pointMarker.states[state].enabled===!1||(point.graphic?(radius=markerOptions&&point.graphic.symbolName&&pointAttr.r,point.graphic.attr(merge(pointAttr,radius?{x:plotX-radius,y:plotY-radius,width:2*radius,height:2*radius}:{})),stateMarkerGraphic&&stateMarkerGraphic.hide()):(state&&markerStateOptions&&(radius=markerStateOptions.radius,newSymbol=pointMarker.symbol||series.symbol,stateMarkerGraphic&&stateMarkerGraphic.currentSymbol!==newSymbol&&(stateMarkerGraphic=stateMarkerGraphic.destroy()),stateMarkerGraphic?stateMarkerGraphic[move?"animate":"attr"]({x:plotX-radius,y:plotY-radius}):newSymbol&&(series.stateMarkerGraphic=stateMarkerGraphic=chart.renderer.symbol(newSymbol,plotX-radius,plotY-radius,2*radius,2*radius).attr(pointAttr).add(series.markerGroup),stateMarkerGraphic.currentSymbol=newSymbol)),stateMarkerGraphic&&stateMarkerGraphic[state&&chart.isInsidePlot(plotX,plotY,chart.inverted)?"show":"hide"]()),haloOptions=stateOptions[state]&&stateOptions[state].halo,haloOptions&&haloOptions.size?(halo||(series.halo=halo=chart.renderer.path().add(chart.seriesGroup)),halo.attr(extend({fill:Color(point.color||series.color).setOpacity(haloOptions.opacity).get()},haloOptions.attributes))[move?"animate":"attr"]({d:point.haloPath(haloOptions.size)})):halo&&halo.attr({d:[]}),point.state=state)
},haloPath:function(size){var series=this.series,chart=series.chart,plotBox=series.getPlotBox(),inverted=chart.inverted;return chart.renderer.symbols.circle(plotBox.translateX+(inverted?series.yAxis.len-this.plotY:this.plotX)-size,plotBox.translateY+(inverted?series.xAxis.len-this.plotX:this.plotY)-size,2*size,2*size)}}),extend(Series.prototype,{onMouseOver:function(){var series=this,chart=series.chart,hoverSeries=chart.hoverSeries;hoverSeries&&hoverSeries!==series&&hoverSeries.onMouseOut(),series.options.events.mouseOver&&fireEvent(series,"mouseOver"),series.setState(HOVER_STATE),chart.hoverSeries=series},onMouseOut:function(){var series=this,options=series.options,chart=series.chart,tooltip=chart.tooltip,hoverPoint=chart.hoverPoint;hoverPoint&&hoverPoint.onMouseOut(),series&&options.events.mouseOut&&fireEvent(series,"mouseOut"),!tooltip||options.stickyTracking||tooltip.shared&&!series.noSharedTooltip||tooltip.hide(),series.setState(),chart.hoverSeries=null},setState:function(state){var series=this,options=series.options,graph=series.graph,graphNeg=series.graphNeg,stateOptions=options.states,lineWidth=options.lineWidth,attribs;if(state=state||NORMAL_STATE,series.state!==state){if(series.state=state,stateOptions[state]&&stateOptions[state].enabled===!1)return;state&&(lineWidth=(stateOptions[state].lineWidth||lineWidth)+(stateOptions[state].lineWidthPlus||0)),graph&&!graph.dashstyle&&(attribs={"stroke-width":lineWidth},graph.attr(attribs),graphNeg&&graphNeg.attr(attribs))}},setVisible:function(vis,redraw){var series=this,chart=series.chart,legendItem=series.legendItem,showOrHide,ignoreHiddenSeries=chart.options.chart.ignoreHiddenSeries,oldVisibility=series.visible;series.visible=vis=series.userOptions.visible=vis===UNDEFINED?!oldVisibility:vis,showOrHide=vis?"show":"hide",each(["group","dataLabelsGroup","markerGroup","tracker"],function(key){series[key]&&series[key][showOrHide]()}),(chart.hoverSeries===series||(chart.hoverPoint&&chart.hoverPoint.series)===series)&&series.onMouseOut(),legendItem&&chart.legend.colorizeItem(series,vis),series.isDirty=!0,series.options.stacking&&each(chart.series,function(otherSeries){otherSeries.options.stacking&&otherSeries.visible&&(otherSeries.isDirty=!0)}),each(series.linkedSeries,function(otherSeries){otherSeries.setVisible(vis,!1)}),ignoreHiddenSeries&&(chart.isDirtyBox=!0),redraw!==!1&&chart.redraw(),fireEvent(series,showOrHide)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(selected){var series=this;series.selected=selected=selected===UNDEFINED?!series.selected:selected,series.checkbox&&(series.checkbox.checked=selected),fireEvent(series,selected?"select":"unselect")},drawTracker:TrackerMixin.drawTrackerGraph}),extend(Highcharts,{Color:Color,Point:Point,Tick:Tick,Renderer:Renderer,SVGElement:SVGElement,SVGRenderer:SVGRenderer,arrayMin:arrayMin,arrayMax:arrayMax,charts:charts,dateFormat:dateFormat,error:error,format:format,pathAnim:pathAnim,getOptions:getOptions,hasBidiBug:hasBidiBug,isTouchDevice:isTouchDevice,setOptions:setOptions,addEvent:addEvent,removeEvent:removeEvent,createElement:createElement,discardElement:discardElement,css:css,each:each,map:map,merge:merge,splat:splat,extendClass:extendClass,pInt:pInt,svg:hasSVG,canvas:useCanVG,vml:!hasSVG&&!useCanVG,product:PRODUCT,version:VERSION})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("IntelRallyApp",{alias:"widget.intelrallyapp",extend:"Rally.app.App",_TrainConfigPrefName:"intel-train-config",_projectFields:["ObjectID","Releases","Children","Parent","Name","TeamMembers"],_portfolioItemFields:["Name","ObjectID","FormattedID","c_TeamCommits","c_MoSCoW","Release","c_Risks","Project","PlannedEndDate","Parent","Children","PortfolioItemType","Ordinal"],_userStoryFields:["Name","ObjectID","Release","Project","PortfolioItem","PlannedEndDate","ActualEndDate","FormattedID","Predecessors","Successors","c_Dependencies","Iteration","PlanEstimate"],_releaseFields:["Name","ObjectID","ReleaseDate","ReleaseStartDate","Project","TeamMembers"],_loadScheduleStates:function(){var me=this,deferred=Q.defer();return Rally.data.ModelFactory.getModel({type:"UserStory",success:function(model){model.getField("ScheduleState").getAllowedValueStore().load({callback:function(records,operation,success){me.ScheduleStates=_.map(records,function(r){return r.data.StringValue}),deferred.resolve()}})}}),deferred.promise},_loadPortfolioItemStatesForEachType:function(){var me=this;return me.PortfolioItemTypeStates=[],Q.all(_.map(me.PortfolioItemTypes,function(portfolioType,ordinal){var store=Ext.create("Rally.data.wsapi.Store",{model:"State",autoLoad:!1,limit:1/0,disableMetaChangeEvent:!0,fetch:["Name","Enabled","OrderIndex"],filters:[{property:"TypeDef.Name",value:portfolioType},{property:"Enabled",value:!0}]});return me._reloadStore(store).then(function(store){me.PortfolioItemTypeStates[ordinal]=store.getRange()})}))},_loadPortfolioItemTypes:function(){var me=this,deferred=Q.defer(),store=Ext.create("Rally.data.wsapi.Store",{model:"TypeDefinition",autoLoad:!0,limit:1/0,disableMetaChangeEvent:!0,fetch:["Ordinal","Name"],filters:[{property:"Parent.Name",value:"Portfolio Item"},{property:"Creatable",value:!0}],listeners:{load:function(portfolioTypeStore){me.PortfolioItemTypes=_.map(_.sortBy(_.map(portfolioTypeStore.getRange(),function(item){return{Name:item.data.Name,Ordinal:item.data.Ordinal}}),function(item){return item.Ordinal}),function(item){return item.Name}),deferred.resolve()}}});return deferred.promise},_loadModels:function(){var me=this,promises=[],models={Project:"Project",UserStory:"HierarchicalRequirement",PortfolioItem:"PortfolioItem"};return _.each(me.PortfolioItemTypes,function(name){models[name]="PortfolioItem/"+name}),_.each(models,function(modelType,modelName){var deferred=Q.defer();Rally.data.WsapiModelFactory.getModel({type:modelType,success:function(loadedModel){me[modelName]=loadedModel,deferred.resolve()}}),promises.push(deferred.promise)}),Q.all(promises)},_loadTrainConfig:function(){var me=this,deferred=Q.defer();return Rally.data.PreferenceManager.load({workspace:me.getContext().getWorkspace()._ref,filterByName:me._TrainConfigPrefName,success:function(prefs){var workspaceConfigString=prefs[me._TrainConfigPrefName],trainConfig;try{trainConfig=JSON.parse(workspaceConfigString)}catch(e){trainConfig=[]}me.TrainConfig=trainConfig,deferred.resolve()},failure:deferred.reject}),deferred.promise},_saveTrainConfig:function(trainConfig){var me=this,s={},deferred=Q.defer();return s[me._TrainConfigPrefName]=JSON.stringify(trainConfig),Rally.data.PreferenceManager.update({workspace:me.getContext().getWorkspace()._ref,filterByName:me._TrainConfigPrefName,settings:s,success:deferred.resolve,failure:deferred.reject}),deferred.promise},_configureIntelRallyApp:function(){var me=this;return Q.all([me._loadPortfolioItemTypes().then(function(){return Q.all([me._loadModels(),me._loadPortfolioItemStatesForEachType()])}),me._loadTrainConfig(),me._loadScheduleStates()])},_reloadStore:function(store){var deferred=Q.defer();return store.load({callback:function(records,operation,success){success?deferred.resolve(store):deferred.reject(operation.getError()||"Could not load data")}}),deferred.promise},_loadProject:function(oid){var me=this,deferred=Q.defer();return oid?me.Project?(me.Project.load(oid,{fetch:me._projectFields,context:{workspace:me.getContext().getWorkspace()._ref,project:null},callback:deferred.resolve}),deferred.promise):Q.reject("IntelRallyApp is not configured!"):Q.reject("Invalid arguments: LP")},_loadUserStory:function(oid,projectRecord){var me=this,deferred=Q.defer();return oid?me.UserStory?(me.UserStory.load(oid,{fetch:me._userStoryFields,context:{workspace:projectRecord?null:me.getContext().getWorkspace()._ref,project:projectRecord?projectRecord.data._ref:null},callback:deferred.resolve}),deferred.promise):Q.reject("IntelRallyApp is not configured!"):Q.reject("Invalid arguments: LUS")},_loadPortfolioItemByType:function(oid,type){var me=this,deferred=Q.defer();return oid&&type?(me[type].load(oid,{fetch:me._portfolioItemFields,context:{workspace:me.getContext().getWorkspace()._ref,project:null},callback:deferred.resolve}),deferred.promise):Q.reject("Invalid arguments: LPIBT")},_loadPortfolioItemByOrdinal:function(oid,ordinal){var me=this,deferred=Q.defer(),type=me.PortfolioItemTypes[ordinal];return me._loadPortfolioItemByType(oid,type)},_projectInWhichTrain:function(projectRecord){if(projectRecord){var me=this,foundTrainConfig=_.find(me.TrainConfig,function(trainConfig){return trainConfig.TrainProjectOID==projectRecord.data.ObjectID});if(foundTrainConfig)return Q(projectRecord);var parent=projectRecord.data.Parent;return parent?me._loadProject(parent.ObjectID).then(function(parentRecord){return me._projectInWhichTrain(parentRecord)}):Q()}return Q()},_loadTrainPortfolioProject:function(trainRecord){if(!trainRecord)return Q.reject("Invalid arguments: ltpp");var me=this,foundTrainConfig=_.find(me.TrainConfig,function(trainConfig){return trainConfig.TrainProjectOID==trainRecord.data.ObjectID});return foundTrainConfig?foundTrainConfig.TrainAndPortfolioLocationTheSame?Q(trainRecord):me._loadProject(foundTrainConfig.PortfolioProjectOID):Q.reject("Project "+trainRecord.data.Name+" is not a train!")},_getTrainName:function(trainRecord){if(!trainRecord)throw"Invalid arguments: gtn";var me=this,foundTrainConfig=_.find(me.TrainConfig,function(trainConfig){return trainConfig.TrainProjectOID==trainRecord.data.ObjectID});if(!foundTrainConfig)throw"Project "+trainRecord.data.Name+" is not a train!";return foundTrainConfig.TrainName?foundTrainConfig.TrainName:trainRecord.data.Name},_loadAllTrains:function(){var me=this,filter=_.reduce(me.TrainConfig,function(filter,item){var newFilter=Ext.create("Rally.data.wsapi.Filter",{property:"ObjectID",value:item.TrainProjectOID});return filter?filter.or(newFilter):newFilter},null);if(filter){var store=Ext.create("Rally.data.wsapi.Store",{model:"Project",limit:1/0,disableMetaChangeEvent:!0,autoLoad:!1,fetch:me._projectFields,filters:[filter],context:{workspace:me.getContext().getWorkspace()._ref,project:null}});return me._reloadStore(store).then(function(store){return store.getRange()})}return Q([])},__getUserStoryInReleaseTimeFrameFilter:function(releaseRecord){var me=this,twoWeeks=12096e5,releaseStartPadding=new Date(1*new Date(releaseRecord.data.ReleaseStartDate)+twoWeeks).toISOString(),releaseEndPadding=new Date(1*new Date(releaseRecord.data.ReleaseDate)-twoWeeks).toISOString();return Ext.create("Rally.data.wsapi.Filter",{property:"Release.ReleaseStartDate",operator:"<",value:releaseStartPadding}).and(Ext.create("Rally.data.wsapi.Filter",{property:"Release.ReleaseDate",operator:">",value:releaseEndPadding})).or(Ext.create("Rally.data.wsapi.Filter",{property:"Release.ObjectID",value:null}).and(Ext.create("Rally.data.wsapi.Filter",{property:"PortfolioItem.Release.ReleaseStartDate",operator:"<",value:releaseStartPadding}).and(Ext.create("Rally.data.wsapi.Filter",{property:"PortfolioItem.Release.ReleaseDate",operator:">",value:releaseEndPadding}))))},_loadRandomUserStory:function(projectRecord){if(!projectRecord)return Q.reject("Invalid arguments: LRUS");var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"HierarchicalRequirement",limit:1,pageSize:1,disableMetaChangeEvent:!0,fetch:!1,context:{workspace:me.getContext().getWorkspace()._ref,project:void 0},filters:[{property:"Project.ObjectID",value:projectRecord.data.ObjectID}]});return me._reloadStore(store).then(function(store){return store.getRange().pop()})},_loadRandomUserStoryFromReleaseTimeframe:function(projectRecord,releaseRecord){if(!projectRecord||!releaseRecord)return Q.reject("Invalid arguments: LRUSFR");var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"HierarchicalRequirement",limit:5,pageSize:5,disableMetaChangeEvent:!0,fetch:me._userStoryFields,context:{workspace:me.getContext().getWorkspace()._ref,project:void 0},sorters:[{property:"CreationDate",direction:"DESC"}],filters:[Ext.create("Rally.data.wsapi.Filter",{property:"Project.ObjectID",value:projectRecord.data.ObjectID}).and(me.__getUserStoryInReleaseTimeFrameFilter(releaseRecord))]});return me._reloadStore(store).then(function(store){var records=store.data.items;return records.length?Q(records[Math.floor(Math.random()*records.length)]):Q(void 0)})},_loadUserStoryByFID:function(formattedID,projectRecord){if(!formattedID||!projectRecord)return Q.reject("Invalid arguments: LUSBFID");var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"HierarchicalRequirement",limit:1,pageSize:1,disableMetaChangeEvent:!0,fetch:["Name","Project","ObjectID","FormattedID","Predecessors","Successors","c_Dependencies"],context:{workspace:me.getContext().getWorkspace()._ref,project:void 0},filters:[{property:"FormattedID",value:formattedID},{property:"Project.ObjectID",value:projectRecord.data.ObjectID}]});return me._reloadStore(store).then(function(store){return Q(store.data.items.pop())})},_loadPortfolioItemsOfType:function(portfolioProject,type){if(!portfolioProject||!type)return Q.reject("Invalid arguments: OPIOT");var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"PortfolioItem/"+type,limit:1/0,disableMetaChangeEvent:!0,remoteSort:!1,fetch:me._portfolioItemFields,context:{project:portfolioProject.data._ref,projectScopeDown:!0,projectScopeUp:!1}});return me._reloadStore(store)},_loadPortfolioItemsOfOrdinal:function(portfolioProject,ordinal){if(!portfolioProject||ordinal===void 0)return Q.reject("Invalid arguments: LPIOO");var me=this,type=me.PortfolioItemTypes[ordinal];return type?me._loadPortfolioItemsOfType(portfolioProject,type):Q.reject("Invalid PortfolioItem ordinal")},_portfolioItemTypeToOrdinal:function(type){return this.PortfolioItemTypes.indexOf(type)},_getPortfolioItemTypeStateByOrdinal:function(ordinal,stateName){return _.find(this.PortfolioItemTypeStates[ordinal],function(state){return state.data.Name==stateName})},_getPortfolioItemTypeStateByName:function(portfolioType,stateName){return this._getPortfolioItemTypeStateByOrdinal(this._portfolioItemTypeToOrdinal(portfolioType),stateName)},__storeItemsToProjTree:function(projects){for(var me=this,projTree={},i=0,len=projects.length;len>i;++i){var project=projects[i],thisRef=project.data.ObjectID,parentRef=project.data.Parent?project.data.Parent.ObjectID:void 0;projTree[thisRef]||(projTree[thisRef]={}),projTree[thisRef].ProjectRecord=project,parentRef&&(projTree[parentRef]||(projTree[parentRef]={}),projTree[parentRef][thisRef]=projTree[thisRef])}return projTree},_loadAllProjects:function(){var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"Project",fetch:me._projectFields,limit:1/0,disableMetaChangeEvent:!0,context:{workspace:me.getContext().getWorkspace()._ref,project:null}});return me._reloadStore(store).then(function(store){var map=_.reduce(store.getRange(),function(map,project){return map[project.data.ObjectID]=project,map},{});return map})},__addProjectsWithTeamMembersToList:function(projTree,hash){var me=this,curProj=projTree.ProjectRecord;curProj.data.TeamMembers.Count>0&&(hash[curProj.data.ObjectID]=curProj);for(var childProjRef in projTree)"ProjectRecord"!==childProjRef&&me.__addProjectsWithTeamMembersToList(projTree[childProjRef],hash)},_loadProjectsWithTeamMembers:function(rootProjectRecord){var me=this,projectsWithTeamMembers={},store=Ext.create("Rally.data.wsapi.Store",{model:"Project",fetch:me._projectFields,limit:1/0,disableMetaChangeEvent:!0,context:{workspace:me.getContext().getWorkspace()._ref,project:null}});return me._reloadStore(store).then(function(store){if(rootProjectRecord){var projTree=me.__storeItemsToProjTree(store.getRange());return me.__addProjectsWithTeamMembersToList(projTree[rootProjectRecord.data.ObjectID],projectsWithTeamMembers),projectsWithTeamMembers}return _.reduce(_.filter(store.getRange(),function(project){return project.data.TeamMembers.Count>0}),function(map,project){return map[project.data.ObjectID]=project,map},{})})},__allChildProjectToList:function(projTree,hash){var me=this,curProj=projTree.ProjectRecord;hash[curProj.data.ObjectID]=curProj;for(var childProjRef in projTree)"ProjectRecord"!==childProjRef&&me.__allChildProjectToList(projTree[childProjRef],hash)},_loadAllChildrenProjects:function(rootProjectRecord){var me=this,childrenProjects={},store=Ext.create("Rally.data.wsapi.Store",{model:"Project",fetch:me._projectFields,limit:1/0,disableMetaChangeEvent:!0,context:{workspace:me.getContext().getWorkspace()._ref,project:null}});return me._reloadStore(store).then(function(store){if(rootProjectRecord){var projTree=me.__storeItemsToProjTree(store.getRange());return me.__allChildProjectToList(projTree[rootProjectRecord.data.ObjectID],childrenProjects),childrenProjects}return _.reduce(store.getRange(),function(map,project){return map[project.data.ObjectID]=project,map},{})})},__allLeafProjectsToList:function(projTree,hash){var me=this,curProj=projTree.ProjectRecord;0===curProj.data.Children.Count&&(hash[curProj.data.ObjectID]=curProj);for(var childProjRef in projTree)"ProjectRecord"!==childProjRef&&me.__allLeafProjectsToList(projTree[childProjRef],hash)},_loadAllLeafProjects:function(rootProjectRecord){var me=this,leafProjects={},store=Ext.create("Rally.data.wsapi.Store",{model:"Project",fetch:me._projectFields,limit:1/0,disableMetaChangeEvent:!0,context:{workspace:me.getContext().getWorkspace()._ref,project:null}});return me._reloadStore(store).then(function(store){if(rootProjectRecord){var projTree=me.__storeItemsToProjTree(store.getRange());return me.__allLeafProjectsToList(projTree[rootProjectRecord.data.ObjectID],leafProjects),leafProjects}return _.reduce(_.filter(store.getRange(),function(project){return 0===project.data.Children.Count}),function(map,project){return map[project.data.ObjectID]=project,map},{})})},_loadProjectByName:function(projectName){if(!projectName)return Q.reject("Invalid arguments: LPBN");var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"Project",limit:1,pageSize:1,fetch:["Name","ObjectID"],disableMetaChangeEvent:!0,context:{workspace:me.getContext().getWorkspace()._ref,project:null},filters:[{property:"Name",value:projectName}]});return me._reloadStore(store).then(function(store){return Q(store.data.items.pop())})},_loadAllReleases:function(projectRecord){var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"Release",limit:1/0,disableMetaChangeEvent:!0,autoLoad:!1,fetch:me._releaseFields,filters:[{property:"Project.ObjectID",value:projectRecord.data.ObjectID}],context:{workspace:me.getContext().getWorkspace()._ref,project:null}});return me._reloadStore(store).then(function(store){return store.getRange()})},_loadReleasesAfterGivenDate:function(projectRecord,givenDate){var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"Release",limit:1/0,disableMetaChangeEvent:!0,autoLoad:!1,fetch:me._releaseFields,filters:[{property:"ReleaseDate",operator:">=",value:new Date(givenDate).toISOString()},{property:"Project.ObjectID",value:projectRecord.data.ObjectID}],context:{workspace:me.getContext().getWorkspace()._ref,project:null}});return me._reloadStore(store).then(function(store){return store.getRange()})},_loadReleasesBeforeGivenDate:function(projectRecord,givenDate){var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"Release",limit:1/0,autoLoad:!1,disableMetaChangeEvent:!0,fetch:me._releaseFields,filters:[{property:"ReleaseDate",operator:"<=",value:new Date(givenDate).toISOString()},{property:"Project.ObjectID",value:projectRecord.data.ObjectID}],context:{workspace:me.getContext().getWorkspace()._ref,project:null}});return me._reloadStore(store).then(function(store){return store.getRange()})},_loadReleasesInTheFuture:function(projectRecord){return this._loadReleasesAfterGivenDate(projectRecord,new Date)},_loadReleasesByNameUnderProject:function(releaseName,projectRecord){var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"Release",limit:1/0,disableMetaChangeEvent:!0,autoLoad:!1,fetch:me._releaseFields,filters:[{property:"Name",value:releaseName}],context:{project:projectRecord.data._ref,projectScopeDown:!0,projectScopeUp:!1}});return me._reloadStore(store).then(function(store){return store.getRange()})},_loadReleaseByNameForProject:function(releaseName,projectRecord){var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"Release",limit:1/0,disableMetaChangeEvent:!0,autoLoad:!1,fetch:me._releaseFields,filters:[{property:"Name",value:releaseName},{property:"Project.ObjectID",value:projectRecord.data.ObjectID}],context:{workspace:me.getContext().getWorkspace()._ref,project:null}});return me._reloadStore(store).then(function(store){return store.getRange().pop()})},_loadReleasesByNameContainsForProject:function(releaseName,projectRecord){var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"Release",limit:1/0,disableMetaChangeEvent:!0,autoLoad:!1,fetch:me._releaseFields,filters:[{property:"Name",operator:"contains",value:releaseName},{property:"Project.ObjectID",value:projectRecord.data.ObjectID}],context:{workspace:me.getContext().getWorkspace()._ref,project:null}});return me._reloadStore(store).then(function(store){return store.getRange()})},_getScopedRelease:function(releaseRecords,projectOID,appPrefs){var me=this,d=new Date,rs=releaseRecords,prefOID=appPrefs&&appPrefs.projs&&appPrefs.projs[projectOID]&&appPrefs.projs[projectOID].Release;return prefOID&&_.find(rs,function(r){return r.data.ObjectID==prefOID})||_.find(rs,function(r){return new Date(r.data.ReleaseDate)>=d&&d>=new Date(r.data.ReleaseStartDate)})||_.reduce(rs,function(best,r){if(null===best)return r;var d1=new Date(best.data.ReleaseStartDate),d2=new Date(r.data.ReleaseStartDate),now=new Date;return Math.abs(d1-now)<Math.abs(d2-now)?best:r},null)}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("WorkweekDropdown",{extend:"Ext.data.Model",fields:[{name:"Workweek",type:"string"},{name:"DateVal",type:"number"}]}),Ext.define("TrainConfigItem",{extend:"Ext.data.Model",fields:[{name:"TrainProjectOID",type:"number"},{name:"TrainName",type:"string"},{name:"TrainAndPortfolioLocationTheSame",type:"boolean"},{name:"PortfolioProjectOID",type:"number"}]})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("WindowListener",{__initWindowEventListener:function(eventName){var me=this;me._windowListeners||(me._windowListeners={}),me._windowListeners[eventName]=[],window.parent["on"+eventName]=function(event){for(var listeners=me._windowListeners[eventName],i=0,len=listeners.length;len>i;++i)listeners[i](event)}},_addWindowEventListener:function(eventName,fn){var me=this;me._windowListeners&&me._windowListeners[eventName]||me.__initWindowEventListener(eventName),me._windowListeners[eventName].push(fn)},_fireParentWindowEvent:function(eventName){var me=this;if(me._windowListeners&&me._windowListeners[eventName])for(var listeners=me._windowListeners[eventName],i=0,len=listeners.length;len>i;++i)listeners[i]()}})})();
                (function(){var Ext=window.Ext4||window.Ext,TOP_BAR_HEIGHT=40,BOTTOM_BAR_HEIGHT=24,TITLE_BAR_HEIGHT=33,IFRAME_HEADER_HEIGHT=28;Ext.define("IframeResize",{requires:["WindowListener"],_fixRallyDashboard:function(){if(window.frameElement){for(var me=this,bottomEl=Ext.get(window.frameElement),portlet=bottomEl.up(".x-portlet"),dashboard=portlet.up("#mydash_portlet"),titleBar=dashboard.down(".titlebar"),domNodeW=bottomEl.dom,domNodeH=bottomEl.dom,innerHeight=window.parent.innerHeight,innerWidth=window.parent.innerWidth;;){if(domNodeW.style.width=innerWidth-4+"px",domNodeW.style.padding="0",domNodeW.style.margin="0","mydash_portlet"===domNodeW.id)break;domNodeW=domNodeW.parentNode}for(;;){if(domNodeH.style.height=innerHeight-(TOP_BAR_HEIGHT+BOTTOM_BAR_HEIGHT+TITLE_BAR_HEIGHT+IFRAME_HEADER_HEIGHT)+"px",domNodeH.classList.contains("x-portlet"))break;domNodeH=domNodeH.parentNode}for(;;){if(domNodeH.style.height=innerHeight-(TOP_BAR_HEIGHT+BOTTOM_BAR_HEIGHT+TITLE_BAR_HEIGHT)+"px","mydash_portlet"==domNodeH.id)break;domNodeH=domNodeH.parentNode}dashboard.dom.style.height=innerHeight-(TOP_BAR_HEIGHT+BOTTOM_BAR_HEIGHT)+"px",dashboard.dom.style.padding="0 2px 0 2px",titleBar.dom.style.padding="2px",titleBar.dom.style.margin="0"}},_initFixRallyDashboard:function(){var me=this;me._addWindowEventListener&&me._addWindowEventListener("resize",function(){me._fixRallyDashboard()}),me._fixRallyDashboard()},_disableResizeHandle:function(){var me=this,handle;window.frameElement&&(handle=Ext.get(window.frameElement).up(".x-portlet").down(".x-resizable-handle"),handle.hide(),handle.dom.onshow=function(){handle&&handle.hide()})},_initDisableResizeHandle:function(){var me=this;me._addWindowEventListener&&me._addWindowEventListener("resize",function(){me._disableResizeHandle()}),me._disableResizeHandle()}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("PrettyAlert",{__getMessageBoxY:function(){var me=this,bottomEl=window.frameElement?Ext.get(window.frameElement):me.el,ph=window.parent.getWindowHeight(),ps=window.parent.getScrollY(),ofy=ps+bottomEl.dom.getBoundingClientRect().top,iyOffset=Math.floor(ph/2-ofy+ps-50);return 0>iyOffset?0:iyOffset},_alert:function(title,message){var me=this;message="string"==typeof message?message:message.message?message.message:JSON.stringify(message,null,"	"),1>arguments.length||(1===arguments.length&&(message=title,title=""),Ext.MessageBox.alert(title,message).setY(me.__getMessageBoxY()),setTimeout(function(){for(var x=Ext.MessageBox.down("button");x.isHidden();)x=x.nextSibling();x.focus()},50))},_confirm:function(title,message,fn){var me=this;message="string"==typeof message?message:message.message?message.message:JSON.stringify(message,null,"	"),2>arguments.length||(2===arguments.length&&(fn=message,message=title,title=""),"function"!=typeof fn&&(fn=function(){}),Ext.MessageBox.confirm(title,message,fn).setY(me.__getMessageBoxY()),setTimeout(function(){for(var x=Ext.MessageBox.down("button");x.isHidden();)x=x.nextSibling();x.focus()},20))}})})();
                (function(){var Ext=window.Ext4||window.Ext,intel_ww={},SECOND=1e3,MINUTE=60*SECOND,HOUR=60*MINUTE,DAY=24*HOUR,WEEK=7*DAY;Ext.define("IntelWorkweek",{_getWorkweek:function(_date){var date=new Date(_date),yearStart=new Date(date.getFullYear(),0,1),dayIndex=yearStart.getDay(),ww01Start=new Date(yearStart-dayIndex*DAY),utcDateMillis=Date.UTC(date.getFullYear(),date.getMonth(),date.getDate()),ww01Millis=Date.UTC(ww01Start.getFullYear(),ww01Start.getMonth(),ww01Start.getDate()),timeDiff=utcDateMillis-ww01Millis,ww=Math.floor(timeDiff/WEEK)+1,leap=0===date.getFullYear()%4,weekCount=leap&&dayIndex>=5||!leap&&6===dayIndex?53:52;return ww>weekCount?1:ww},_getWeekCount:function(_date){var date=new Date(_date),leap=0===date.getFullYear()%4,day=new Date(date.getFullYear(),0,1).getDay();return leap&&day>=5||!leap&&6===day?53:52},_roundDateDownToWeekStart:function(_date){var date=new Date(_date),day=date.getDay(),monthDate=date.getDate(),month=date.getMonth(),year=date.getFullYear(),sundayMidday=new Date(1*new Date(year,month,monthDate)-(day*DAY-.5*DAY));return new Date(sundayMidday.getFullYear(),sundayMidday.getMonth(),sundayMidday.getDate())},_getWorkweekDates:function(startDate,endDate){for(var startWeekDate=this._roundDateDownToWeekStart(startDate),endWeekDate=this._roundDateDownToWeekStart(endDate),startMillis=Date.UTC(startWeekDate.getFullYear(),startWeekDate.getMonth(),startWeekDate.getDate()),endMillis=Date.UTC(endWeekDate.getFullYear(),endWeekDate.getMonth(),endWeekDate.getDate()),totalWeeks=Math.floor((endMillis-startMillis)/WEEK)+1,weeks=Array(totalWeeks),i=0;totalWeeks>i;++i){var sundayMidday=new Date(1*startWeekDate+(WEEK*i+12*HOUR));weeks[i]=new Date(sundayMidday.getFullYear(),sundayMidday.getMonth(),sundayMidday.getDate())}return weeks},_workweekToDate:function(ww,year){var yearStart=new Date(year,0,1),dayIndex=yearStart.getDay(),ww01StartMidday=new Date(yearStart-(dayIndex*DAY-.5*DAY)),sundayMidday=new Date(1*ww01StartMidday+(ww-1)*WEEK);return new Date(sundayMidday.getFullYear(),sundayMidday.getMonth(),sundayMidday.getDate())},_getWorkWeeksForDropdown:function(releaseStartDate,releaseEndDate){for(var workweeks=this._getWorkweekDates(releaseStartDate,releaseEndDate),data=Array(workweeks.length),i=0,len=workweeks.length;len>i;++i)data[i]={Workweek:"ww"+this._getWorkweek(workweeks[i]),DateVal:1*workweeks[i]};return data}})})();
                (function(){var Ext=window.Ext4||window.Ext,ChartsTooltipDatemap={};Ext.define("CumulativeFlowChartMixin",{requires:["IntelRallyApp","IntelWorkweek"],_defaultCumulativeFlowChartConfig:{chart:{defaultSeriesType:"area",zoomType:"xy"},colors:["#ABABAB","#E57E3A","#E5D038","#0080FF","#3A874F","#26FF00","#000000"],xAxis:{tickmarkPlacement:"on",title:{text:"Days",margin:10},labels:{y:20}},yAxis:{title:{text:"Points"},labels:{x:-5,y:4}},tooltip:{formatter:function(){for(var sum=0,datemap=ChartsTooltipDatemap[this.series.chart.container.id],i=4;i>=this.series.index;--i)sum+=this.series.chart.series[i].data[this.point.x].y;return"<b>"+this.x+"</b>"+(datemap?" ("+datemap[this.point.x]+")":"")+"<br /><b>"+this.series.name+"</b>: "+(100*this.y>>0)/100+(4>=this.series.index?"<br /><b>Total</b>: "+(100*sum>>0)/100:"")}},plotOptions:{series:{marker:{enabled:!1,states:{hover:{enabled:!0}}},groupPadding:.01},area:{stacking:"normal",lineColor:"#666666",lineWidth:2,marker:{enabled:!1}}}},_getCumulativeFlowChartColors:function(){var me=this,colors=me._defaultCumulativeFlowChartConfig.colors,scheduleStates=me.ScheduleStates;return scheduleStates.length>=5?{colors:colors}:{colors:colors.slice(0,scheduleStates.length).concat(colors.slice(scheduleStates.length+1))}},__addProjectedTrendline:function(data,options){var me=this,totalPoints=options.totalPoints,trendType=options.trendType,validTypes=["FromZero","FromStartAccepted","LastWeek","LinearRegression","WeightedLinearRegression"],topScheduleState=me.ScheduleStates.slice(-1)[0],s=_.find(data.series,function(s){return s.name===topScheduleState}),i,len,projectedTrend={type:"spline",dashStyle:"Solid",name:"Projected",data:s.data.slice()},begin=0,end=projectedTrend.data.length-1;for(i=1;projectedTrend.data.length>i;++i)if(null!==projectedTrend.data[i]&&0!==projectedTrend.data[i]){begin=i-1;break}for(i=end;i>=begin;--i)if(0!==projectedTrend.data[i]){end=i;break}for(ratio=end===begin?0:(projectedTrend.data[end]-0)/(end-begin),projectedTrend.data=_.map(projectedTrend.data,function(p,j){return j>=begin?Math.round(100*(0+(j-begin)*ratio))/100:p}),i=1,len=projectedTrend.data.length;len>i;++i)if(projectedTrend.data[i]>=totalPoints){projectedTrend.data[i]={color:"red",marker:{enabled:!0,lineWidth:4,symbol:"circle",fillColor:"red",lineColor:"red"},y:projectedTrend.data[i]};break}return projectedTrend},_updateCumulativeFlowChartData:function(data,hideTrends){var me=this,now=new Date,datemap=[],totalPoints=new Date(data.categories[0])>now?0:_.reduce(data.series,function(sum,s){return sum+(s.data[s.data.length-1]||0)},0)||0,idealTrend,ratio;if(hideTrends||(idealTrend={type:"spline",dashStyle:"Solid",name:"Ideal",data:Array(data.categories.length)},ratio=totalPoints/(data.categories.length-1)||0,idealTrend.data=_.map(idealTrend.data,function(e,i){return Math.round(100*(0+i*ratio))/100})),_.each(data.categories,function(c,i,a){var d=new Date(c);a[i]="ww"+me._getWorkweek(d),datemap[i]=c,d>now&&_.each(data.series,function(s,j){s.data=s.data.slice(0,i).concat(_.map(Array(a.length-i),function(){return 0}))})}),!hideTrends){var projectedTrend=me.__addProjectedTrendline(data,{totalPoints:totalPoints});data.series.push(projectedTrend),data.series.push(idealTrend)}return data.datemap=datemap,data},_getCumulativeFlowChartTicks:function(startDate,endDate,width){var pixelTickWidth=40,ticks=width/pixelTickWidth>>0,oneDay=864e5,days=(1*endDate-1*startDate)/(5*oneDay/7)>>0,interval=5*((days/ticks>>0)/5>>0);return 5>interval?5:interval},_setCumulativeFlowChartDatemap:function(chartContainerId,datemap){ChartsTooltipDatemap[chartContainerId]=datemap}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("ParallelLoader",{__parallelLoadData:function(config){var me=this,pagesize=config.pagesize,url=config.url,params=config.params,promises=[],outputItems=[],totalRequestsSent=1;return _.times(totalRequestsSent,function(pageNum){var thisDeferred=Q.defer(),thisParams=Ext.merge({},params);promises.push(thisDeferred.promise),thisParams.start=config.itemOffset+pagesize*pageNum,Ext.data.JsonP.request({url:url,callbackKey:"jsonp",params:thisParams,success:function(resJSON){var items=resJSON.QueryResult?resJSON.QueryResult.Results:resJSON.Results,totalCount=resJSON.QueryResult?resJSON.QueryResult.TotalResultCount:resJSON.TotalResultCount,totalPages=(totalCount/pagesize>>0)+(totalCount%pagesize?1:0);if(outputItems=outputItems.concat(items),totalPages>totalRequestsSent){var additionalPromises=[];_.times(totalPages-totalRequestsSent,function(){var nextDeferred=Q.defer(),thisParams=Ext.merge({},params);additionalPromises.push(nextDeferred.promise),thisParams.start=config.itemOffset+pagesize*totalRequestsSent,++totalRequestsSent,Ext.data.JsonP.request({url:url,callbackKey:"jsonp",params:thisParams,success:function(resJSON){var items=resJSON.QueryResult?resJSON.QueryResult.Results:resJSON.Results;outputItems=outputItems.concat(items),nextDeferred.resolve()},failure:function(response){nextDeferred.reject(response)}})}),Q.all(additionalPromises).then(function(){thisDeferred.resolve()})}else thisDeferred.resolve()},failure:function(response){thisDeferred.reject(response)}})}),Q.all(promises).then(function(){return outputItems})},_parallelLoadWsapiStore:function(config){var me=this;return config.itemOffset=1,config.pagesize=config.pagesize>0&&200>=config.pagesize?config.pagesize:200,me.__parallelLoadData(config).then(function(items){return Ext.create("Rally.data.wsapi.Store",{model:config.model,totalCount:items.length,data:items,disableMetaChangeEvent:!0,load:function(){}})})},_parallelLoadLookbackStore:function(config){var me=this;return config.itemOffset=0,config.pagesize=config.pagesize>0&&2e4>=config.pagesize?config.pagesize:2e4,me.__parallelLoadData(config).then(function(items){return Ext.create("Rally.data.lookback.SnapshotStore",{totalCount:items.length,data:items,disableMetaChangeEvent:!0,model:Ext.define("Rally.data.lookback.SnapshotModel-"+Ext.id(),{extend:"Rally.data.lookback.SnapshotModel",fields:JSON.parse(config.params.fields||"[]")}),load:function(){}})})}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("UserAppsPreference",{_userAppsPref:"intel-user-apps-preference",_loadAppsPreference:function(){var me=this,deferred=Q.defer();return Rally.data.PreferenceManager.load({filterByUser:!0,filterByName:me._userAppsPref,success:function(prefs){var appPrefs=prefs[me._userAppsPref];try{appPrefs=JSON.parse(appPrefs)}catch(e){appPrefs={projs:{},refresh:0}}deferred.resolve(appPrefs)},failure:deferred.reject}),deferred.promise},_saveAppsPreference:function(prefs){var me=this,s={},deferred=Q.defer();return prefs={projs:prefs.projs,refresh:prefs.refresh},s[me._userAppsPref]=JSON.stringify(prefs),Rally.data.PreferenceManager.update({filterByUser:!0,filterByName:me._userAppsPref,settings:s,success:deferred.resolve,failure:deferred.reject}),deferred.promise}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("IntelFixedComboBox",{extend:"Ext.form.field.ComboBox",alias:["widget.intelfixedcombo","widget.intelfixedcombobox"],constructor:function(options){options=options||{},options=Ext.merge({editable:!1,allowBlank:!0,queryMode:"local",listeners:{change:function(combo,newval,oldval){0===newval.length&&combo.setValue(oldval)},focus:function(combo){combo.setValue(""),combo.expand()}}},options),this.callParent([options])}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("IntelReleasePicker",{extend:"IntelFixedComboBox",alias:["widget.intelreleasepicker"],constructor:function(options){options.releases&&options.currentRelease&&(options.displayField="Name",options.value=options.currentRelease.data.Name,options.store=Ext.create("Ext.data.Store",{fields:["Name"],sorters:[function(o1,o2){return o1.data.Name>o2.data.Name?-1:1}],data:_.map(options.releases,function(r){return{Name:r.data.Name}})}),options.fieldLabel=options.fieldLabel||"Release:",options.editable=options.editable||!1,options.width=options.width||240,options.labelWidth=options.labelWidth||50,this.callParent([options]))}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("FastCumulativeFlowCalculator",{constructor:function(options){this.scheduleStates=options.scheduleStates,this.endDate=options.endDate,this.startDate=options.startDate},_getDates:function(){for(var dates=[],curDay=this.startDate,day=864e5;this.endDate>=curDay;){var n=curDay.getDay();0!==n&&6!==n&&dates.push(curDay),curDay=new Date(1*curDay+day)}return dates},_dateToStringDisplay:function(date){return Ext.Date.format(date,"m/d/Y")},_getIndexHelper:function(date,dateArray){for(var curVal=dateArray.length/2,curInt=curVal>>0,div=curVal/2,lastInt=-1;curInt!==lastInt;){if(dateArray[curInt]===date)return curInt;dateArray[curInt]>date?curVal-=div:curVal+=div,div/=2,lastInt=curInt,curInt=curVal>>0}return curInt},_getIndexOnOrBefore:function(date,dateArray){if(0===dateArray.length)return-1;var pos=this._getIndexHelper(date,dateArray);return 0===pos?date>=dateArray[pos]?pos:-1:date>=dateArray[pos]?pos:pos-1},_getIndexOnOrAfter:function(date,dateArray){if(0===dateArray.length)return-1;var pos=this._getIndexHelper(date,dateArray);return pos===dateArray.length-1?dateArray[pos]>=date?pos:-1:dateArray[pos]>=date?pos:pos+1},runCalculation:function(items){if(!this.scheduleStates||!this.startDate||!this.endDate)throw"invalid constructor config";for(var dates=this._getDates(),day=864e5,dateMapTemplate=_.map(Array(dates.length),function(){return 0}),totals=_.reduce(this.scheduleStates,function(map,ss){return map[ss]=dateMapTemplate.slice(),map},{}),itemIndex=0,len=items.length;len>itemIndex;++itemIndex){var item=items[itemIndex].raw,iStart=new Date(item._ValidFrom),iEnd=new Date(item._ValidTo),state=item.ScheduleState,pe=item.PlanEstimate;if(pe&&iStart/day>>0!==iEnd/day>>0){var startIndex=this._getIndexOnOrAfter(iStart,dates),endIndex=this._getIndexOnOrBefore(iEnd,dates);if(-1!==startIndex&&-1!==endIndex)for(var i=startIndex;endIndex>=i;++i)totals[state][i]+=pe}}return{categories:_.map(dates,function(d){return this._dateToStringDisplay(d)},this),series:_.reduce(this.scheduleStates,function(outputArray,ss){return outputArray.concat([{name:ss,type:"area",dashStyle:"Solid",data:totals[ss]}])},[])}}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("TrainCfdCharts",{extend:"IntelRallyApp",cls:"app",requires:["FastCumulativeFlowCalculator"],mixins:["WindowListener","PrettyAlert","IframeResize","IntelWorkweek","CumulativeFlowChartMixin","ParallelLoader","UserAppsPreference"],minWidth:910,items:[{xtype:"container",id:"navBar"},{xtype:"container",width:"100%",layout:{type:"hbox",pack:"center"},items:[{xtype:"container",width:"66%",id:"aggregateChart"}]},{xtype:"container",id:"scrumCharts",layout:"column",width:"100%"}],_userAppsPref:"intel-ART-CFD",_loadSnapshotStores:function(){var me=this,promises=[],lowestPortfolioItem=me.PortfolioItemTypes[0];return me.AllSnapshots=[],me.TeamStores={},Q.all(_.map(me.ReleasesWithName,function(releaseRecord){var parallelLoaderConfig={pagesize:2e4,url:"https://rally1.rallydev.com/analytics/v2.0/service/rally/workspace/"+me.getContext().getWorkspace().ObjectID+"/artifact/snapshot/query.js",params:{workspace:me.getContext().getWorkspace()._ref,compress:!1,pagesize:2e4,find:JSON.stringify({_TypeHierarchy:"HierarchicalRequirement",Children:null,Release:releaseRecord.data.ObjectID}),fields:JSON.stringify(["ScheduleState","PlanEstimate",lowestPortfolioItem,"_ValidFrom","_ValidTo","ObjectID"]),hydrate:JSON.stringify(["ScheduleState"])}};return me._parallelLoadLookbackStore(parallelLoaderConfig).then(function(snapshotStore){var records=snapshotStore.getRange();records.length>0&&(me.TeamStores[releaseRecord.data.Project.Name]=records,me.AllSnapshots=me.AllSnapshots.concat(records))})}))},_loadAllChildReleases:function(){var me=this,releaseName=me.ReleaseRecord.data.Name;return me._loadReleasesByNameUnderProject(releaseName,me.TrainRecord).then(function(releaseRecords){me.ReleasesWithName=_.filter(releaseRecords,function(r){return r.data.Project&&r.data.Project.TeamMembers.Count>0})})},_loadPortfolioItemsOfTypeInRelease:function(portfolioProject,type){if(!portfolioProject||!type)return Q.reject("Invalid arguments: OPIOT");var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"PortfolioItem/"+type,limit:1/0,remoteSort:!1,fetch:me._portfolioItemFields,filters:[{property:"Release.Name",value:me.ReleaseRecord.data.Name}],context:{project:portfolioProject.data._ref,projectScopeDown:!0,projectScopeUp:!1}});return me._reloadStore(store)},_loadPortfolioItems:function(){var me=this;return me.PortfolioItemMap={},me.TopPortfolioItemNames=[],me.CurrentTopPortfolioItemName=null,Q.all(_.map(me.PortfolioItemTypes,function(type,ordinal){return(ordinal?me._loadPortfolioItemsOfType(me.TrainPortfolioProject,type):me._loadPortfolioItemsOfTypeInRelease(me.TrainPortfolioProject,type)).then(function(portfolioStore){return{ordinal:ordinal,store:portfolioStore}})})).then(function(items){var orderedPortfolioItemStores=_.sortBy(items,function(item){return item.ordinal}),lowestPortfolioItemStore=orderedPortfolioItemStores[0].store;me.PortfolioItemMap={},_.each(lowestPortfolioItemStore.getRange(),function(lowPortfolioItem){for(var ordinal=0,parentPortfolioItem=lowPortfolioItem,getParentRecord=function(child,parentList){return _.find(parentList,function(parent){return child.data.Parent&&parent.data.ObjectID==child.data.Parent.ObjectID})};orderedPortfolioItemStores.length-1>ordinal&&parentPortfolioItem;)parentPortfolioItem=getParentRecord(parentPortfolioItem,orderedPortfolioItemStores[ordinal+1].store.getRange()),++ordinal;ordinal===orderedPortfolioItemStores.length-1&&parentPortfolioItem&&(me.PortfolioItemMap[lowPortfolioItem.data.ObjectID]=parentPortfolioItem.data.Name)}),me.TopPortfolioItemNames=_.sortBy(_.map(_.union(_.values(me.PortfolioItemMap)),function(name){return{Name:name}}),function(name){return name.Name})})},_filterUserStoriesByTopPortfolioItem:function(){var me=this,topPiName=me.CurrentTopPortfolioItemName,lowestPortfolioItem=me.PortfolioItemTypes[0];return null===topPiName?(me.FilteredAllSnapshots=me.AllSnapshots,me.FilteredTeamStores=me.TeamStores):(me.FilteredAllSnapshots=[],me.FilteredTeamStores={},_.each(me.TeamStores,function(records,teamName){var filteredRecords=_.filter(records,function(record){return me.PortfolioItemMap[record.data[lowestPortfolioItem]]==topPiName});me.FilteredTeamStores[teamName]=filteredRecords,me.FilteredAllSnapshots=me.FilteredAllSnapshots.concat(filteredRecords)})),Q()},_hideHighchartsLinks:function(){$(".highcharts-container > svg > text:last-child").hide()},_redrawEverything:function(){var me=this;return me.setLoading("Loading Charts"),me._filterUserStoriesByTopPortfolioItem().then(function(){$("#scrumCharts-innerCt").empty(),me.ReleasePicker||me._buildReleasePicker(),me.TopPortfolioItemPicker&&me.TopPortfolioItemPicker.destroy(),me._buildTopPortfolioItemPicker(),me._buildCharts(),me._hideHighchartsLinks(),me.setLoading(!1)})},_reloadEverything:function(){var me=this;return me.setLoading("Loading Stores"),me._loadAllChildReleases().then(function(){return Q.all([me._loadSnapshotStores(),me._loadPortfolioItems()])}).then(function(){return me._redrawEverything()})},launch:function(){var me=this;me._initDisableResizeHandle(),me._initFixRallyDashboard(),me.setLoading("Loading Configuration"),me._configureIntelRallyApp().then(function(){var scopeProject=me.getContext().getProject();return me._loadProject(scopeProject.ObjectID)}).then(function(scopeProjectRecord){return me.ProjectRecord=scopeProjectRecord,Q.all([me._projectInWhichTrain(me.ProjectRecord).then(function(trainRecord){return trainRecord&&me.ProjectRecord.data.ObjectID==trainRecord.data.ObjectID?(me.TrainRecord=trainRecord,me._loadTrainPortfolioProject(trainRecord)):Q.reject("You are not scoped to a train.")}).then(function(trainPortfolioProject){me.TrainPortfolioProject=trainPortfolioProject}),me._loadAppsPreference().then(function(appsPref){me.AppsPref=appsPref;var twelveWeeks=72576e5;return me._loadReleasesAfterGivenDate(me.ProjectRecord,1*new Date-twelveWeeks)}).then(function(releaseRecords){me.ReleaseRecords=releaseRecords;var currentRelease=me._getScopedRelease(releaseRecords,me.ProjectRecord.data.ObjectID,me.AppsPref);return currentRelease?(me.ReleaseRecord=currentRelease,void 0):Q.reject("This project has no releases.")})])}).then(function(){return me._reloadEverything()}).fail(function(reason){me.setLoading(!1),me._alert("ERROR",reason||"")}).done()},_releasePickerSelected:function(combo,records){var me=this;if(me.ReleaseRecord.data.Name!==records[0].data.Name){me.setLoading(!0),me.ReleaseRecord=_.find(me.ReleaseRecords,function(rr){return rr.data.Name==records[0].data.Name}),me._workweekData=me._getWorkWeeksForDropdown(me.ReleaseRecord.data.ReleaseStartDate,me.ReleaseRecord.data.ReleaseDate);var pid=me.ProjectRecord.data.ObjectID;"object"!=typeof me.AppsPref.projs[pid]&&(me.AppsPref.projs[pid]={}),me.AppsPref.projs[pid].Release=me.ReleaseRecord.data.ObjectID,me._saveAppsPreference(me.AppsPref).then(function(){return me._reloadEverything()}).fail(function(reason){me._alert("ERROR",reason||""),me.setLoading(!1)}).done()}},_buildReleasePicker:function(){var me=this;me.ReleasePicker=Ext.getCmp("navBar").add({xtype:"intelreleasepicker",labelWidth:80,width:240,releases:me.ReleaseRecords,currentRelease:me.ReleaseRecord,listeners:{select:me._releasePickerSelected.bind(me)}})},_topPortfolioItemPickerSelected:function(combo,records){var me=this,topPiType=me.PortfolioItemTypes.length&&me.PortfolioItemTypes[me.PortfolioItemTypes.length-1],allPiOfTypeLabel=topPiType?"All "+topPiType+"s":"All",value=records[0].data.Name;null===value&&null===me.CurrentTopPortfolioItemName||value===me.CurrentTopPortfolioItemName||(me.CurrentTopPortfolioItemName=value===allPiOfTypeLabel?null:value,me._redrawEverything())},_buildTopPortfolioItemPicker:function(){var me=this,topPiType=me.PortfolioItemTypes.length&&me.PortfolioItemTypes[me.PortfolioItemTypes.length-1],allPiOfTypeLabel=topPiType?"All "+topPiType+"s":"All";me.TopPortfolioItemPicker=Ext.getCmp("navBar").add({xtype:"intelfixedcombo",fieldLabel:(topPiType||"Portfolio")+" Filter",labelWidth:80,width:240,store:Ext.create("Ext.data.Store",{fields:["Name"],data:[{Name:allPiOfTypeLabel}].concat(me.TopPortfolioItemNames)}),displayField:"Name",value:me.CurrentTopPortfolioItemName||allPiOfTypeLabel,listeners:{select:me._topPortfolioItemPickerSelected.bind(me)}})},_buildCharts:function(){var me=this,releaseStart=me.ReleaseRecord.data.ReleaseStartDate,releaseEnd=me.ReleaseRecord.data.ReleaseDate,calc=Ext.create("FastCumulativeFlowCalculator",{startDate:releaseStart,endDate:releaseEnd,scheduleStates:me.ScheduleStates}),aggregateChartData=me._updateCumulativeFlowChartData(calc.runCalculation(me.FilteredAllSnapshots)),aggregateChartContainer=$("#aggregateChart-innerCt").highcharts(Ext.Object.merge({},me._defaultCumulativeFlowChartConfig,me._getCumulativeFlowChartColors(),{chart:{height:400},legend:{enabled:!0,borderWidth:0,width:500,itemWidth:100},title:{text:me._getTrainName(me.TrainRecord)},subtitle:{text:me.ReleaseRecord.data.Name.split(" ")[0]+(me.CurrentTopPortfolioItemName?" ("+me.CurrentTopPortfolioItemName+")":"")},xAxis:{categories:aggregateChartData.categories,tickInterval:me._getCumulativeFlowChartTicks(releaseStart,releaseEnd,.66*me.getWidth())},series:aggregateChartData.series}))[0];me._setCumulativeFlowChartDatemap(aggregateChartContainer.childNodes[0].id,aggregateChartData.datemap);var sortedProjectNames=_.sortBy(Object.keys(me.FilteredTeamStores),function(projName){return projName}),scrumChartConfiguredChartTicks=me._getCumulativeFlowChartTicks(releaseStart,releaseEnd,.32*me.getWidth());_.each(sortedProjectNames,function(projectName){var scrumChartData=me._updateCumulativeFlowChartData(calc.runCalculation(me.FilteredTeamStores[projectName])),scrumCharts=$("#scrumCharts-innerCt"),scrumChartID="scrumChart-no-"+(scrumCharts.children().length+1);scrumCharts.append('<div class="scrum-chart" id="'+scrumChartID+'"></div>');var chartContainersContainer=$("#"+scrumChartID).highcharts(Ext.Object.merge({},me._defaultCumulativeFlowChartConfig,me._getCumulativeFlowChartColors(),{chart:{height:300},legend:{enabled:!1},title:{text:null},subtitle:{text:projectName},xAxis:{categories:scrumChartData.categories,tickInterval:scrumChartConfiguredChartTicks},series:scrumChartData.series}))[0];me._setCumulativeFlowChartDatemap(chartContainersContainer.childNodes[0].id,scrumChartData.datemap)}),me.doLayout()}})})();

            Rally.launchApp('TrainCfdCharts', {
                name:"Train CFD Charts",
	            parentRepos:""
            });

        });
    </script>


    <style type="text/css">
        .x-grid-cell.intel-editor-cell *,.x4-grid-cell.intel-editor-cell *,.intel-editor-cell{cursor:pointer !important}.fa.fa-md{font-size:1.05rem;line-height:.75em;vertical-align:-15%}
    </style>
    <style type="text/css">
        .app{overflow-x:hidden !important}.scrum-chart{padding-top:20px;height:360px;width:32%;float:left}
    </style>
</head>
<body>
</body>
</html>
